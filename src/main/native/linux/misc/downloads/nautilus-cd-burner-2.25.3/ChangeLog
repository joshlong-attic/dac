=== 2.25.3 ===

2008-12-16  Bastien Nocera  <hadess@hadess.net>

	* NEWS: upd
	* configure.in: 2.25.3

2008-12-16  Bastien Nocera  <hadess@hadess.net>

	* src/ncb-selection-dialog.c (label_entry_activated),
	(ncb_selection_dialog_init): Bind "Enter" to the default
	Write/Copy action (Closes: #397674)

2008-12-16  Bastien Nocera  <hadess@hadess.net>

	* Makefile.am:
	* configure.in:
	* doc/Makefile.am:
	* doc/reference/Makefile.am:
	* doc/reference/nautilus-cd-burner-docs.sgml:
	* doc/reference/version.xml.in: Patch from Frederic Peters
	<fpeters@0d.be> to create gtk-doc documentation for
	libnautilus-burn (Closes: #364539)

2008-12-16  Bastien Nocera  <hadess@hadess.net>

	* data/nautilus-cd-burner.glade: Remove unnecessary headings,
	and use of blank labels for indentation (Closes: #552336)

2008-12-16  Bastien Nocera  <hadess@hadess.net>

	* configure.in:
	* src/burn-extension.c (launch_process): Patch from A. Walton
	<awalton@gnome.org> to remove Eel usage (Closes: #524782)

2008-12-16  Bastien Nocera  <hadess@hadess.net>

	* src/ncb-operation.c (select_iso_filename): Use "Save" as
	the default action for the file chooser when writing to a
	file and not a drive (Closes: #389465)

2008-12-16  Bastien Nocera  <hadess@hadess.net>

	* src/ncb-operation.c (inhibit_suspend): Add some comments
	for translators about the inhibit strings (Closes: #517887)

2008-12-16  Bastien Nocera  <hadess@hadess.net>

	* src/nautilus-burn-recorder.c (cdrecord_stderr_line):
	Try to detect some errors from wodim in cdrecord mode, as well
	as detecting damaged media (Closes: #458427)

2008-12-16  Bastien Nocera  <hadess@hadess.net>

	* src/nautilus-burn-bar.c (nautilus_burn_bar_init): Add a hint
	to the clue bar (Closes: #316410)

2008-12-16  Bastien Nocera  <hadess@hadess.net>

	* data/nautilus-cd-burner.desktop.in: Add --no-default-window
	to the nautilus call, to avoid any other windows popping up,
	TryExec nautilus, as it's possible nautilus-cd-burner was installed
	without nautilus, but not n-c-b's desktop file without n-c-b,
	Make menu item visible under Applications -> System Tools
	(Closes: #529867)

2008-12-16  Bastien Nocera  <hadess@hadess.net>

	* src/ncb-selection-dialog.c (update_source),
	(ncb_selection_dialog_init): When copying a disc, make the
	action button be "Copy" and not "Write" (Closes: #548211)

2008-12-16  Bastien Nocera  <hadess@hadess.net>

	* src/nautilus-burn-drive-monitor.c (monitor_hal_shutdown),
	(monitor_hal_init): Patch from Wendy Hu <Huiwe.Hu@sun.com>
	to make sure the error is set before using it to print a warning
	(Closes: #525719)

2008-12-16  Bastien Nocera  <hadess@hadess.net>

	* src/make-iso.c:
	* src/nautilus-burn-drive-selection.h:
	* src/nautilus-burn-init.h:
	* src/nautilus-burn.h:
	* src/nautilus-cd-burner.h: Patch from Pedro Fragoso
	<ember@ubuntu.com> and Tal Benavidor <tal.bav@gmail.com>
	to move to single GTK+ includes (Closes: #563632)

2008-12-16  Bastien Nocera  <hadess@hadess.net>

	* configure.in:
	* src/ncb-operation.c (burn_folder_is_dvd_video):
	Use GIO to detect whether burn:/// contains a Video-DVD
	(Closes: #550012)

2008-11-17  William Jon McCann  <jmccann@redhat.com>

	* src/ncb-operation.c (prepare_tracks), (inhibit_gpm),
	(uninhibit_gpm):
	Make sure error is initialized.
	Fixes #560391

2008-09-23  William Jon McCann  <jmccann@redhat.com>

	* configure.in: Bump version

=== 2.24.0 ===

2008-09-23  William Jon McCann  <jmccann@redhat.com>

	* NEWS: Update for release.

2008-08-31  Bastien Nocera  <hadess@hadess.net>

	* ChangeLog: in UTF-8 now

2008-08-20  William Jon McCann  <jmccann@redhat.com>

	* configure.in: Post release version bump

=== 2.23.90 ===

2008-08-20  William Jon McCann  <jmccann@redhat.com>

	* NEWS: Update for release.

2008-08-19  William Jon McCann  <jmccann@redhat.com>

	* src/ncb-operation.c (get_sm_proxy), (get_gpm_proxy),
	(inhibit_sm), (uninhibit_sm), (inhibit_gpm), (uninhibit_gpm),
	(inhibit_suspend), (uninhibit_suspend), (burn_cd):
	Clean up the way gpm was inhibited.  Add code to inhibit the
	SessionManager.

2008-08-19  William Jon McCann  <jmccann@redhat.com>

	* configure.in: Post branch version bump

2008-04-07  William Jon McCann  <jmccann@redhat.com>

	* configure.in: Post release version bump
	Bump required version of nautilus for nautilus_file_info_get_mount.

=== 2.22.1 ===

2008-04-07  William Jon McCann  <jmccann@redhat.com>

	* NEWS: Update for release

2008-04-07  William Jon McCann  <jmccann@redhat.com>

	* src/burn-extension.c: (volume_is_blank), (drive_is_cd_device),
	(nautilus_burn_get_file_items),
	(nautilus_burn_get_background_items), (burn_monitor_cb):
	Fix copy disc menu item.
	Fixes #524467

2008-03-19  William Jon McCann  <jmccann@redhat.com>

	* src/burn-extension.c: (nautilus_burn_get_file_items):
	Don't do a sync operation.  Remove unused code.
	Patch from: Christian Kellner

2008-03-10  William Jon McCann  <jmccann@redhat.com>

	* configure.in: Post release version bump

=== 2.22.0 ===

2008-03-10  William Jon McCann  <jmccann@redhat.com>

	* NEWS: update for release.

2008-01-31  William Jon McCann  <mccann@jhu.edu>

	* configure.in: Change glib min version to 2.15.4.

2008-01-30  William Jon McCann  <mccann@jhu.edu>

	* configure.in: bump version

=== 2.21.6 ===

2008-01-30  William Jon McCann  <mccann@jhu.edu>

	* NEWS: Update for release

2008-01-28  William Jon McCann  <mccann@jhu.edu>

	* src/burn-extension.c: (volume_is_blank), (drive_is_cd_device),
	(nautilus_burn_get_file_items):
	Properly check HAL to see if we have a disc to copy.

2008-01-28  William Jon McCann  <mccann@jhu.edu>

	* src/burn-extension.c:
	* src/ncb-selection-dialog.c:
	Remove some straggling gnome-vfs includes.

2008-01-28  William Jon McCann  <mccann@jhu.edu>

	* configure.in: Bump nautilus dep.

2008-01-21  William Jon McCann  <mccann@jhu.edu>

	* data/Makefile.am:
	* data/mapping-modules.conf:
	Remove gnome-vfs module configuration file.

2008-01-21  William Jon McCann  <mccann@jhu.edu>

	* configure.in: Post release version bump

=== 2.21.5 ===

2008-01-21  William Jon McCann  <mccann@jhu.edu>

	* NEWS: update for release

2008-01-21  William Jon McCann  <mccann@jhu.edu>

	* src/burn-extension.c:
	* src/list_cddrives.c:
	* src/make-iso.c:
	* src/make-iso.h:
	* src/nautilus-burn-drive-monitor-private.h:
	* src/nautilus-burn-drive-monitor.c:
	* src/nautilus-burn-drive-monitor.h:
	* src/nautilus-burn-drive-private.h:
	* src/nautilus-burn-drive-selection.c:
	* src/nautilus-burn-drive-selection.h:
	* src/nautilus-burn-drive.c:
	* src/nautilus-burn-drive.h:
	* src/nautilus-burn-init.c:
	* src/nautilus-burn-init.h:
	* src/nautilus-burn-process.c:
	* src/nautilus-burn-process.h:
	* src/nautilus-burn-recorder.c:
	* src/nautilus-burn-recorder.h:
	* src/nautilus-burn.h:
	* src/nautilus-cd-burner.c:
	* src/nautilus-cd-burner.h:
	* src/ncb-operation.c:
	* src/ncb-operation.h:
	* src/ncb-progress-dialog.h:
	* src/ncb-rename-dialog.c:
	* src/ncb-rename-dialog.h:
	* src/ncb-selection-dialog.c:
	* src/ncb-selection-dialog.h:
	* src/ncb-selection.c:
	* src/ncb-selection.h:
	* src/test-monitor.c:
	* src/test_blank.c:
	Die you bastard tabs.

2008-01-21  William Jon McCann  <mccann@jhu.edu>

	* src/ncb-operation.c: (inhibit_suspend), (uninhibit_suspend),
	(burn_cd):
	Inihibit power management while burning.
	Patch from: Martin Schoen <martin_schoen@gmx.de>
	Fixes #344949

2008-01-21  William Jon McCann  <mccann@jhu.edu>

	* src/burn-extension.c: (dir_is_empty):
	* src/ncb-operation.c: (burn_folder_is_dvd_video):
	Remove check for "." and ".." since it is no longer needed
	with gio.

2008-01-21  William Jon McCann  <mccann@jhu.edu>

	* configure.in:
	* src/make-iso.c:
	* src/nautilus-cd-burner.c:
	* src/ncb-operation.c:
	* src/ncb-rename-dialog.c:
	* src/ncb-selection.c:
	Add missing headers and gio pkg requires.
	Patch from: GÃ¶tz Waschk <goetz.waschk@gmail.com>

2008-01-20  William Jon McCann  <mccann@jhu.edu>

	* data/cdspin*.png:
	Updated CD spin icons.
	From Denis Washington <denisw@svn.gnome.org>
	Fixes #470413

2008-01-20  William Jon McCann  <mccann@jhu.edu>

	* src/make-iso.c: (nautilus_burn_iso_graft_get_info),
	(nautilus_burn_iso_make_from_graft):
	* src/make-iso.h:
	* src/nautilus-burn-recorder.c:
	(nautilus_burn_recorder_write_growisofs):
	* src/nautilus-burn-recorder.h:
	* src/ncb-operation.c: (burn_folder_is_dvd_video),
	(create_track_from_burn_folder):
	Add support for creating DVD Video
	based on patch from Fabio Bonelli <fabiobonelli@libero.it>
	Fixes #341622

2008-01-20  William Jon McCann  <mccann@jhu.edu>

	* src/nautilus-burn-drive.c: (can_drive_eject),
	(nautilus_burn_drive_can_eject):
	* src/nautilus-burn-drive.h:
	Add nautilus_burn_drive_can_eject (linux only atm).
	Patch from: Dave Meikle <dkm@dave.meikle.co.uk>
	Fixes #506930.

2008-01-20  William Jon McCann  <mccann@jhu.edu>

	* data/nautilus-cd-burner.desktop.in:
	Add x-content support.
	Patch from: Matthias Clasen <mclasen@redhat.com>
	Fixes #510321

2008-01-20  William Jon McCann  <mccann@jhu.edu>

	* configure.in:
	* src/Makefile.am:
	* src/burn-extension.c: (uri_to_path), (write_iso_activate_cb),
	(write_cue_activate_cb), (_is_blank), (drive_get_first_volume),
	(_is_cd_device), (nautilus_burn_get_file_items), (dir_is_empty),
	(update_empty_idle), (burn_monitor_cb), (start_monitor),
	(nautilus_burn_finalize):
	* src/make-iso.c: (make_iso_get_free_space), (dir_is_empty),
	(get_backing_file), (file_info_is_allowed), (graft_file_visitor),
	(create_graft_file), (nautilus_burn_iso_graft_new),
	(nautilus_burn_iso_make_from_graft),
	(nautilus_burn_iso_make_from_drive):
	* src/mapping-daemon.c:
	* src/mapping-daemon.h:
	* src/mapping-method.c:
	* src/mapping-method.h:
	* src/mapping-protocol.c:
	* src/mapping-protocol.h:
	* src/nautilus-cd-burner.c: (expand_path_input), (main):
	* src/ncb-rename-dialog.c: (treemodel_file_move_cb),
	(delete_menu_item_cb), (check_filename_visitor),
	(set_invalid_filenames_internal),
	(ncb_rename_dialog_set_invalid_filenames):
	* src/ncb-selection.c: (get_backing_file), (file_info_is_image),
	(file_info_is_allowed), (estimate_size_visitor),
	(estimate_size_internal), (estimate_size):
	Initial port to GIO.
	Based on patch from Alexander Larsson <alexl@redhat.com>

2008-01-20  William Jon McCann  <mccann@jhu.edu>

	* configure.in:
	* src/Makefile.am:
	Use pkg-config to determine nautilus extension dir.
	Patch from: Damien Carbery <damien.carbery@sun.com>
	Fixes #508807

2007-12-12  William Jon McCann  <mccann@jhu.edu>

	* configure.in: Post branch version bump.

2007-11-15  William Jon McCann  <mccann@jhu.edu>

	* src/mapping-protocol.c (mapping_protocol_channel_fill_read_buffer_unlocked):
	Fix return value.

2007-11-15  William Jon McCann  <mccann@jhu.edu>

	* src/mapping-protocol.c:
	(mapping_protocol_channel_fill_read_buffer_unlocked),
	(mapping_protocol_channel_queue_messages_unlocked):
	Don't loop on AGAIN.

2007-11-15  William Jon McCann  <mccann@jhu.edu>

	* src/mapping-protocol.c: (flush_channel),
	(mapping_protocol_channel_dispatch_unlocked),
	(mapping_protocol_channel_send_internal),
	(mapping_protocol_channel_fill_read_buffer_unlocked),
	(mapping_protocol_channel_queue_messages_unlocked):
	Make sure we complete reads and flushes.
	Hopefully fixes #389760

2007-11-12  William Jon McCann  <mccann@jhu.edu>

	* src/mapping-protocol.c:
	(mapping_protocol_channel_dispatch_unlocked):
	Continue to write until no more data is available
	or an error occurs.  Hopefully fixes #389760

2007-09-17  William Jon McCann  <mccann@jhu.edu>

	* configure.in: Post release version bump

=== 2.20.0 ===

2007-09-17  William Jon McCann  <mccann@jhu.edu>

	* configure.in (BURN_LT_VERSION):
	* NEWS:
	Update for release

2007-07-30  William Jon McCann  <mccann@jhu.edu>

	* configure.in:
	Post release version bump

=== 2.19.6 ===

2007-07-30  William Jon McCann  <mccann@jhu.edu>

	* NEWS:
	* configure.in:
	Update for release

2007-07-30  William Jon McCann  <mccann@jhu.edu>

	* src/ncb-operation.c: (create_cue_track),
	(create_track_from_device):
	Fix copying audio discs.
	Patch from Roderich Schupp <roderich.schupp@googlemail.com>
	Fixes #435025

2007-05-12  William Jon McCann  <mccann@jhu.edu>

	* data/icons/Makefile.am (update-icon-cache): fix
	gtk-update-icon-cache for uninstall-hook.
	Patch from  David Farning  <dfarning@gmail.com>
	Fixes #433730

2007-04-23  William Jon McCann  <mccann@jhu.edu>

	* configure.in: Post release version bump

=== 2.19.1 ===

2007-04-23  William Jon McCann  <mccann@jhu.edu>

	* NEWS: Update for release

2007-04-23  William Jon McCann  <mccann@jhu.edu>

	* configure.in: Post branch version bump.

2007-04-10  William Jon McCann  <mccann@jhu.edu>

	* src/list_cddrives.c: (main):
	Init threads early.

	* src/nautilus-burn-drive.c: (unmount_thread_start):
	Pass environment to gnome-mount so it can check
	if it is in the active session.  Don't redirect
	stdout and stderr so we get error messages.

2007-04-09  William Jon McCann  <mccann@jhu.edu>

	* configure.in: Post release version bump

=== 2.18.1 ===

2007-04-09  William Jon McCann  <mccann@jhu.edu>

	* NEWS: Update for release

2007-03-12  William Jon McCann  <mccann@jhu.edu>

	* configure.in: Post release version bump

=== 2.18.0 ===

2007-03-12  William Jon McCann  <mccann@jhu.edu>

	* NEWS: Update for release

2007-02-26  William Jon McCann  <mccann@jhu.edu>

	* configure.in: Post release version bump

=== 2.17.8 ===

2007-02-26  William Jon McCann  <mccann@jhu.edu>

	* NEWS: Update for release

2007-02-12  William Jon McCann  <mccann@jhu.edu>

	* configure.in: Post release version bump

=== 2.17.7 ===

2007-02-12  William Jon McCann  <mccann@jhu.edu>

	* NEWS: Update for release

2007-02-10  William Jon McCann  <mccann@jhu.edu>

	* src/burn-extension.c: (volume_is_blank):
	Don't use a NULL udi.
	Fixes #406333

2007-01-22  William Jon McCann  <mccann@jhu.edu>

	* configure.in: Post release version bump

=== 2.17.6 ===

2007-01-22  William Jon McCann  <mccann@jhu.edu>

	* NEWS: Update for release

2007-01-20  Luca Ferretti  <elle.uca@libero.it>

	* data/nautilus-cd-burner.desktop.in:

	Update description as per http://live.gnome.org/UsabilityTeam/Menu
	(see bug #385382)

2007-01-10  William Jon McCann  <mccann@jhu.edu>

	* src/make-iso.c: (nautilus_burn_iso_make_from_graft),
	(nautilus_burn_iso_make_from_drive):
	* src/make-iso.h:
	* src/ncb-operation.c: (create_track_from_device),
	(create_track_from_burn_folder), (burn_cd):
	Show an error when not enough space to write ISO.
	Fixes #332615

2007-01-10  William Jon McCann  <mccann@jhu.edu>

	* src/nautilus-burn-drive.c: (create_command),
	(unmount_thread_start), (nautilus_burn_drive_eject):
	* src/ncb-operation.c: (create_track_from_device), (burn_cd):
	* src/ncb-progress-dialog.c: (dialog_sync_buttons),
	(ncb_progress_dialog_set_make_another_button_visible),
	(ncb_progress_dialog_init):
	* src/ncb-progress-dialog.h:
	Don't eject source discs when copying to a file.  Also
	don't show the make another copy button.  Fixes #395079

2007-01-10  William Jon McCann  <mccann@jhu.edu>

	* src/ncb-operation.c (finish_progress_dialog)
	(progress_dialog_response):
	Remove some remnants from before #356412.

2007-01-08  William Jon McCann  <mccann@jhu.edu>

	* configure.in: Post release version bump

=== 2.17.5 ===

2007-01-08  William Jon McCann  <mccann@jhu.edu>

	* NEWS: Update for release

2007-01-08  William Jon McCann  <mccann@jhu.edu>

	* src/burn-extension.c: (drive_get_first_volume),
	(nautilus_burn_get_file_items):
	Show the copy disc option on drives as well
	as volumes.  Fixes #355979

2006-12-18  William Jon McCann  <mccann@jhu.edu>

	* configure.in: Post release version bump

=== 2.17.4 ===

2006-12-18  William Jon McCann  <mccann@jhu.edu>

	* NEWS: Update for 2.17.4 release

2006-12-07  William Jon McCann  <mccann@jhu.edu>

	* src/make-iso.c: (nautilus_burn_iso_graft_get_info):
	Fix a possible double free.  Fixes #368024

2006-12-04  William Jon McCann  <mccann@jhu.edu>

	* configure.in: Post release version bump

=== 2.17.3 ===

2006-12-04  William Jon McCann  <mccann@jhu.edu>

	* NEWS: Update for 2.17.3 release

2006-12-04  William Jon McCann  <mccann@jhu.edu>

	* src/nautilus-cd-burner.c: (main):
	Don't unref a null drive.

2006-12-04  William Jon McCann  <mccann@jhu.edu>

	* data/nautilus-cd-burner.glade:
	* src/ncb-rename-dialog.c: (ncb_rename_dialog_class_init),
	(rename_menu_item_cb), (delete_menu_item_cb),
	(ncb_rename_dialog_init):
	* src/ncb-rename-dialog.h:
	Use glade for rename dialog.

2006-12-04  William Jon McCann  <mccann@jhu.edu>

	* po/POTFILES.in:
	* src/Makefile.am:
	* src/ncb-rename-dialog.c: (ncb_rename_dialog_class_init),
	(treemodel_file_move_cb), (ncb_rename_dialog_response_cb),
	(cell_editing_done_cb), (rename_menu_item_cb),
	(delete_menu_item_cb), (show_popup_menu),
	(treeview_button_pressed_cb), (treeview_popup_menu_cb),
	(ncb_rename_dialog_init), (make_valid_filename),
	(check_filename_cb), (pixmap_from_mime_type), (add_to_liststore),
	(ncb_rename_dialog_list_free),
	(ncb_rename_dialog_set_invalid_filenames), (ncb_rename_dialog_new),
	(ncb_rename_dialog_finalize):
	* src/ncb-rename-dialog.h:
	* src/ncb-selection.c: (verify_source_location_contents):
	Allow invalid filenames to be renamed.

	Patch from Fabio Bonelli <fabiobonelli@libero.it>
	Fixes #341622

2006-11-20  William Jon McCann  <mccann@jhu.edu>

	* src/ncb-selection.c: (verify_burn_folder):
	Make create from image work.  Fixes #366994

2006-11-20  William Jon McCann  <mccann@jhu.edu>

	* src/nautilus-burn-recorder.c: (growisofs_stderr_line):
	Set dangerous flag when erasing DVD.

2006-11-20  William Jon McCann  <mccann@jhu.edu>

	* src/burn-extension.c (nautilus_burn_get_file_items):
	Try to burn cue for x-cdrdao-toc mime types.

	Patch from Sven Arvidsson <sa@whiz.se>
	Fixes #366909

2006-11-20  William Jon McCann  <mccann@jhu.edu>

	* src/make-iso.c: (nautilus_burn_iso_graft_get_info):
	Initialize some variables.

2006-11-06  William Jon McCann  <mccann@jhu.edu>

	* configure.in: Post release version bump

=== 2.17.2 ===

2006-11-06  William Jon McCann  <mccann@jhu.edu>

	* NEWS: Update for 2.17.2 release

2006-10-25  William Jon McCann  <mccann@jhu.edu>

	* configure.in:
	* src/ncb-selection.c: (create_default_label):
	g_date_set_time is deprecated.
	Patch from Fabio Bonelli <fabiobonelli@libero.it>
	Fixes #347088

2006-10-25  William Jon McCann  <mccann@jhu.edu>

	* src/make-iso.c: (nautilus_burn_iso_graft_get_info):
	Fix checking for joliet capability.  Fixes #359997.

2006-10-25  William Jon McCann  <mccann@jhu.edu>

	* configure.in: Up libgnome dep.  Fixes #361641

2006-10-25  William Jon McCann  <mccann@jhu.edu>

	* src/ncb-operation.c: (prepare_tracks):
	* src/ncb-progress-dialog.c: (dialog_sync_buttons),
	(ncb_progress_dialog_init):
	Eject discs by default.  Fixes #356412

2006-10-16  William Jon McCann  <mccann@jhu.edu>

	* configure.in: Post release version bump

=== 2.17.1 ===

2006-10-16  William Jon McCann  <mccann@jhu.edu>

	* NEWS: Update for 2.17.1 release

2006-10-16  William Jon McCann  <mccann@jhu.edu>

	* configure.in: Bump version to 2.17.1 after branching.

2006-10-02  William Jon McCann  <mccann@jhu.edu>

	* configure.in: Post release version bump.

=== 2.16.1 ===

2006-10-02  William Jon McCann  <mccann@jhu.edu>

	* NEWS: Update for 2.16.1 release.

2006-09-29  William Jon McCann  <mccann@jhu.edu>

	* src/make-iso.c:
	* src/nautilus-burn-process.c:
	* src/nautilus-burn-recorder.c:
	Remove some obsolete system dependent includes.

	Patch from Fabio Bonelli <fabiobonelli@libero.it>
	Fixes #348986

2006-09-29  William Jon McCann  <mccann@jhu.edu>

	* src/nautilus-burn-drive-monitor.c: (fill_write_speeds),
	(hal_parse_write_speeds):
	Don't show every kbps speed available.
	Fixes #350082

2006-09-29  William Jon McCann  <mccann@jhu.edu>

	* src/Makefile.am:
	* src/make-iso.c:
	* src/nautilus-burn-drive-monitor.c:
	(nautilus_burn_drive_monitor_get_drive_for_device),
	(hal_drive_from_udi):
	* src/nautilus-burn-drive.c: (open_ioctl_handle):
	* src/nautilus-burn-recorder.c: (cdrecord_stderr_line):
	Misc fixes for Solaris

	Patch from Brian Cameron <brian.cameron@sun.com>
	Fixes #350669

2006-09-29  William Jon McCann  <mccann@jhu.edu>

	* data/nautilus-cd-burner-open-iso.desktop.in:
	* data/nautilus-cd-burner.desktop.in:
	Fix the bugzilla component.
	Fixes #353030

2006-09-15  William Jon McCann  <mccann@jhu.edu>

	* src/mapping-protocol.c: (block_for_reply),
	(mapping_protocol_channel_fill_read_buffer_unlocked),
	(mapping_protocol_channel_do_read_iteration_unlocked),
	(mapping_protocol_channel_do_iteration_unlocked),
	(mapping_protocol_channel_do_iteration),
	(mapping_protocol_channel_dispatch), (handle_write), (handle_read):
	When we get EOF from a read we need to pass that error back
	to the IO watch function to be interpreted as a HUP on BSD/Solaris.
	Fixes #355967

2006-09-15  William Jon McCann  <mccann@jhu.edu>

	* src/mapping-protocol.c: (block_for_reply):
	Remove read_watch before dispatching request.
	Check for reply before blocking.
	Fixes #355933

2006-09-14  William Jon McCann  <mccann@jhu.edu>

	* src/mapping-daemon.c: (profile_log), (subscription_free),
	(subscription_send_event), (virtual_node_subscription_event),
	(virtual_node_free), (create_dir_link), (create_link),
	(connection_add_subscription), (connection_remove_subscription),
	(connection_free), (connection_new), (connection_remove),
	(connection_error), (monitor_add), (monitor_cancel),
	(handle_message), (handle_new_client), (main):
	* src/mapping-method.c: (profile_log), (process_event),
	(request_op), (do_open), (do_create), (do_close), (do_read),
	(do_write), (do_seek), (do_tell), (do_truncate_handle),
	(do_open_directory), (do_close_directory), (do_read_directory),
	(do_get_file_info), (do_get_file_info_from_handle),
	(do_make_directory), (do_remove_directory), (do_unlink), (do_move),
	(do_set_file_info), (do_truncate), (do_create_symbolic_link),
	(do_monitor_add), (do_monitor_cancel), (vfs_module_init),
	(vfs_module_shutdown):
	* src/mapping-protocol.c: (profile_log),
	(mapping_protocol_message_new_reply),
	(mapping_protocol_channel_dispatch_unlocked),
	(mapping_protocol_channel_queue_write_unlocked),
	(lookup_reply_for_serial), (insert_reply_for_serial),
	(remove_reply_for_serial), (block_for_reply),
	(mapping_protocol_channel_fill_read_buffer_unlocked),
	(mapping_protocol_channel_queue_messages_unlocked),
	(mapping_protocol_channel_deliver_messages_unlocked),
	(mapping_protocol_channel_do_iteration),
	(mapping_protocol_channel_dispatch):
	Use profile technique for debug messages instead of
	writing to temp files.  Much more useful and easier to use.

2006-09-05  William Jon McCann  <mccann@jhu.edu>

	* src/nautilus-burn-process.c: (nautilus_burn_process_run):
	Drop locks when entering main loop.  Fixes #353899

2006-09-04  William Jon McCann  <mccann@jhu.edu>

	* configure.in: Post release version bump.

=== 2.16.0 ===

2006-09-04  William Jon McCann  <mccann@jhu.edu>

	* NEWS: Update for 2.16.0 release.

2006-08-21  William Jon McCann  <mccann@jhu.edu>

	* configure.in: Post release version bump.

=== 2.15.7 ===

2006-08-21  William Jon McCann  <mccann@jhu.edu>

	* NEWS: Update for 2.15.7 release.

2006-08-19  William Jon McCann  <mccann@jhu.edu>

	* src/burn-extension.c: (dir_is_empty), (update_empty_idle),
	(queue_update_empty), (burn_monitor_cb), (nautilus_burn_finalize):
	Only try to update the empty state when it has a chance of changing.

	* src/mapping-daemon.c: (subscription_ref), (subscription_unref),
	(subscription_send_event), (dispatch_data_free),
	(virtual_node_subscription_event), (virtual_node_new),
	(virtual_node_free), (virtual_node_unref), (virtual_node_ref),
	(virtual_root_free), (virtual_root_unref), (virtual_root_ref),
	(virtual_root_new), (virtual_mkdir), (virtual_unlink),
	(virtual_create), (remove_dir), (remove_file), (create_dir_link),
	(move_file), (list_dir), (connection_ref), (connection_unref),
	(connection_error), (handle_message), (handle_new_client),
	(free_roots_helper), (free_roots), (debug_shutdown), (main):
	Reference count VirtualNodes so subscriptions don't get cancelled
	before events are delivered.  Use new protocol API.  Don't return
	pointers to local data in replies.  Add mechanism for a timed
	exit to use with valgrind.  Unref the main loop.

	* src/mapping-method.c: (debug_print), (get_path_from_uri),
	(process_event), (request_op), (remove_file_helper), (do_open),
	(do_create), (do_open_directory), (do_get_file_info),
	(do_get_file_info_from_handle), (do_make_directory),
	(do_remove_directory), (do_unlink), (do_move), (do_set_file_info),
	(do_truncate), (do_create_symbolic_link), (do_monitor_add),
	(do_monitor_cancel), (handle_message), (vfs_module_init),
	(vfs_module_shutdown):
	Use new protocol API.

	* src/mapping-protocol.c: (debug_init), (debug_print),
	(_mapping_protocol_message_new),
	(mapping_protocol_message_get_serial),
	(mapping_protocol_message_set_serial),
	(mapping_protocol_message_new_reply),
	(mapping_protocol_message_new_monitor_event),
	(mapping_protocol_message_new_request),
	(mapping_protocol_message_ref), (mapping_protocol_reply_destroy),
	(mapping_protocol_request_destroy),
	(mapping_protocol_monitor_event_destroy),
	(mapping_protocol_message_unref), (encode_uint32), (encode_int32),
	(decode_uint32), (decode_int32), (decode_string), (decode_pointer),
	(encode_string), (encode_pointer), (encode_handshake),
	(mapping_protocol_request_encode), (channel_read_buffer_has_len),
	(mapping_protocol_request_decode),
	(mapping_protocol_decode_handshake),
	(mapping_protocol_reply_encode), (mapping_protocol_reply_decode),
	(mapping_protocol_monitor_event_encode),
	(mapping_protocol_monitor_event_decode),
	(mapping_protocol_get_unix_name), (wait_for_data),
	(mapping_protocol_channel_get_next_serial),
	(mapping_protocol_channel_dispatch_unlocked),
	(mapping_protocol_channel_queue_write_unlocked),
	(mapping_protocol_channel_send_internal),
	(mapping_protocol_channel_send), (lookup_reply_for_serial),
	(insert_reply_for_serial), (remove_reply_for_serial),
	(add_read_watch), (remove_read_watch), (add_write_watch),
	(remove_write_watch), (block_for_reply),
	(mapping_protocol_channel_send_with_reply), (decode_event),
	(decode_request), (decode_reply),
	(mapping_protocol_channel_fill_read_buffer_unlocked),
	(mapping_protocol_channel_queue_messages_unlocked),
	(mapping_protocol_channel_deliver_messages_unlocked),
	(mapping_protocol_channel_do_read_iteration_unlocked),
	(mapping_protocol_channel_do_iteration_unlocked),
	(mapping_protocol_channel_do_iteration),
	(mapping_protocol_channel_dispatch), (handle_write), (handle_read),
	(mapping_protocol_channel_new), (mapping_protocol_channel_free),
	(mapping_protocol_channel_ref), (mapping_protocol_channel_unref),
	(mapping_protocol_channel_set_message_handler):
	Fix thread-safety issues.  Improve buffering.
	Don't expose implementation details.  Fix crashes.
	Fixes #351514.

2006-08-10  William Jon McCann  <mccann@jhu.edu>

	* src/nautilus-burn-init.c: (nautilus_burn_init),
	(nautilus_burn_initialized), (nautilus_burn_shutdown):
	Use atomic ref counting on init/shutdown.

2006-08-07  William Jon McCann  <mccann@jhu.edu>

	* configure.in: Post release version bump.

=== 2.15.6 ===

2006-08-07  William Jon McCann  <mccann@jhu.edu>

	* NEWS: Update for 2.15.6 release.

2006-08-04  William Jon McCann  <mccann@jhu.edu>

	* configure.in:
	* src/burn-extension.c: (get_hal_context), (volume_is_blank),
	(nautilus_burn_get_file_items), (nautilus_module_shutdown):
	Don't show Copy Disc option when disc is blank or not present.

	Based on patch from Fabio Bonelli <fabiobonelli@libero.it>
	Fixes #326173

2006-07-24  William Jon McCann  <mccann@jhu.edu>

	* configure.in: Post release version bump.

=== 2.15.5 ===

2006-07-24  William Jon McCann  <mccann@jhu.edu>

	* NEWS: Update for 2.15.5 release.

2006-07-24  William Jon McCann  <mccann@jhu.edu>

	* data/Makefile.am:
	* data/nautilus-cd-burner.desktop.in:
	* data/nautilus-cd-burner-open-iso.desktop.in:
	Add application/x-cd-image handler.  Fix validation
	of desktop files.

	Based on patch from Fabio Bonelli <fabiobonelli@libero.it>
	Fixes #326170

2006-07-24  William Jon McCann  <mccann@jhu.edu>

	* src/list_cddrives.c: (list_drive_info):
	* src/nautilus-burn-drive.h:
	* src/nautilus-burn-recorder.c:
	(nautilus_burn_recorder_write_growisofs),
	(nautilus_burn_recorder_write_cdrecord):
	* src/nautilus-burn-recorder.h:
	* src/ncb-selection-dialog.c: (update_speeds_combobox),
	(speed_changed):

	Patch from Fabio Bonelli <fabiobonelli@libero.it>
	Fixes #346225

2006-07-14  William Jon McCann  <mccann@jhu.edu>

	* src/nautilus-burn-drive-monitor.c: (hal_drive_from_udi):
	* src/nautilus-cd-burner.c: (main):
	unref the GnomeProgram.

2006-07-11  William Jon McCann  <mccann@jhu.edu>

	* src/nautilus-burn-drive-monitor.c (monitor_hal_shutdown):
	Use dbus_connection_close not _disconnect.
	Fixes #347120

2006-07-10  William Jon McCann  <mccann@jhu.edu>

	* configure.in: Post release version bump.

=== 2.15.4 ===

2006-07-10  William Jon McCann  <mccann@jhu.edu>

	* NEWS: Update for 2.15.4 release

2006-07-06  William Jon McCann  <mccann@jhu.edu>

	* src/nautilus-burn-drive-monitor.c:
	(nautilus_burn_drive_monitor_get_drive_for_image):
	Fix reference counting problem.

	* src/nautilus-burn-drive-selection.c: (populate_model),
	(repopulate_model),
	(nautilus_burn_drive_selection_set_have_file_image),
	(nautilus_burn_drive_selection_set_recorders_only):
	Populate the model correctly when changing show-recorders-only
	after have-file-image.  Fixes #345831

2006-07-06  William Jon McCann  <mccann@jhu.edu>

	* src/nautilus-cd-burner.c: (gconf_load_device):
	Fix leak.

	Patch from Fabio Bonelli <fabiobonelli@libero.it>
	Fixes #346781

2006-07-06  William Jon McCann  <mccann@jhu.edu>

	* configure.in:
	* data/Makefile.am:
	* data/icons/.cvsignore:
	* data/icons/16x16/.cvsignore:
	* data/icons/16x16/Makefile.am:
	* data/icons/16x16/nautilus-cd-burner.png:
	* data/icons/22x22/.cvsignore:
	* data/icons/22x22/Makefile.am:
	* data/icons/22x22/nautilus-cd-burner.png:
	* data/icons/24x24/.cvsignore:
	* data/icons/24x24/Makefile.am:
	* data/icons/24x24/nautilus-cd-burner.png:
	* data/icons/Makefile.am:
	* data/icons/scalable/.cvsignore:
	* data/icons/scalable/Makefile.am:
	* data/icons/scalable/nautilus-cd-burner.svg:

	Add new icons from Jakub Steiner.  Fixes #346226

	* data/nautilus-cd-burner.desktop.in:
	* src/burn-extension.c: (nautilus_burn_get_file_items),
	(nautilus_burn_get_background_items):
	* src/nautilus-cd-burner.c: (ncb_hig_dialog):
	* src/ncb-operation.c: (ncb_hig_dialog):
	* src/ncb-selection-dialog.c: (ncb_selection_dialog_init):
	* src/ncb-selection.c: (ncb_hig_dialog):
	Use new icons.

2006-06-21  William Jon McCann  <mccann@jhu.edu>

	* data/libnautilus-burn.pc.in (Requires): Add gthread and hal
	to Requires.  Fixes #345237.

2006-06-20  William Jon McCann  <mccann@jhu.edu>

	* configure.in: Require nautilus 2.15.3.
	* src/burn-extension.c: (nautilus_burn_get_background_items),
	(burn_monitor_cb):
	Set sensitivity of Write to disc menu item.  Fixes #163849.

2006-06-12  William Jon McCann  <mccann@jhu.edu>

	* configure.in: Post release version bump

=== 2.15.3 ===

2006-06-12  William Jon McCann  <mccann@jhu.edu>

	* NEWS: Update for 2.15.3 release

2006-06-12  William Jon McCann  <mccann@jhu.edu>

	* src/nautilus-burn-drive.c:
	(nautilus_burn_drive_get_supported_media_string),
	(nautilus_burn_drive_media_type_get_capacity),
	(nautilus_burn_drive_get_supported_media_string_for_size):
	* src/nautilus-burn-drive.h:
	* src/ncb-operation.c: (ask_for_media):
	Only ask for the types of media that will accomodate the
	data size.

	Patch from Fabio Bonelli <fabiobonelli@libero.it>
	Fixes #343098

2006-06-12  William Jon McCann  <mccann@jhu.edu>

	* src/nautilus-burn-drive-monitor.c: (hal_mainloop_integration),
	(monitor_hal_shutdown):
	Use a private dbus connection.

2006-06-08  William Jon McCann  <mccann@jhu.edu>

	* src/burn-extension.c: (write_iso_activate_cb),
	(write_cue_activate_cb), (copy_disc_activate_cb),
	(nautilus_burn_get_file_items),
	(nautilus_burn_get_background_items), (dir_is_empty),
	(nautilus_burn_register_type), (nautilus_module_list_types):
	* src/list_cddrives.c: (main):
	* src/make-iso.c: (write_all), (copy_file), (escape_path),
	(dir_is_empty), (graft_file_end_dir_visitor), (graft_file_visitor),
	(create_graft_file), (nautilus_burn_iso_graft_free),
	(create_temp_dir), (nautilus_burn_iso_graft_new),
	(nautilus_burn_iso_run_process),
	(nautilus_burn_iso_graft_get_info), (mkisofs_stderr_line),
	(nautilus_burn_iso_make_from_graft), (nautilus_burn_iso_make),
	(get_disc_info), (nautilus_burn_iso_make_from_drive):
	* src/make-iso.h:
	* src/mapping-daemon.c: (virtual_node_new), (virtual_node_free),
	(virtual_root_new), (lookup_root), (virtual_dir_lookup),
	(virtual_node_lookup), (virtual_mkdir), (virtual_unlink),
	(virtual_create), (get_backing_file), (create_dir), (remove_dir),
	(remove_file), (create_file), (create_dir_link), (create_link),
	(move_file), (list_dir), (handle_request), (handle_new_client),
	(have_data), (cleanup_timeout), (main):
	* src/mapping-daemon.h:
	* src/mapping-method.c: (get_path_from_uri),
	(monitor_event_pending), (monitor_do_iter_unlocked), (do_open),
	(do_create), (do_open_directory), (do_close_directory),
	(do_read_directory), (do_get_file_info), (do_make_directory),
	(do_remove_directory), (do_unlink), (do_move), (do_set_file_info),
	(do_truncate), (do_create_symbolic_link), (do_monitor_add),
	(do_monitor_cancel), (daemon_child_setup), (launch_daemon),
	(vfs_module_init):
	* src/mapping-protocol.c: (read_all), (encode_string),
	(encode_pointer), (mapping_protocol_request_encode),
	(mapping_protocol_request_decode), (mapping_protocol_reply_encode),
	(mapping_protocol_reply_decode):
	* src/mapping-protocol.h:
	* src/nautilus-burn-bar.c: (nautilus_burn_bar_init):
	* src/nautilus-burn-drive-monitor.c:
	(monitor_get_drive_first_child_udi), (hal_type_to_media_type),
	(monitor_set_drive_media), (find_drive_by_udi),
	(find_drive_by_media_udi), (hal_device_property_modified),
	(follow_links), (hal_device_added), (hal_mainloop_integration),
	(hal_update_all), (monitor_hal_init),
	(nautilus_burn_drive_monitor_unref):
	* src/nautilus-burn-drive-monitor.h:
	* src/nautilus-burn-drive-selection.c:
	(nautilus_burn_drive_selection_init),
	(nautilus_burn_drive_selection_get_active):
	* src/nautilus-burn-drive-selection.h:
	* src/nautilus-burn-drive.c: (unmount_done), (unmount_timeout),
	(unmount_thread_start), (nautilus_burn_drive_unmount),
	(nautilus_burn_drive_eject), (nautilus_burn_drive_unref),
	(nautilus_burn_drive_ref), (nautilus_burn_drive_lock),
	(nautilus_burn_drive_unlock):
	* src/nautilus-burn-init.c:
	* src/nautilus-burn-process.c: (nautilus_burn_process_stdout_read),
	(nautilus_burn_process_stderr_read), (nautilus_burn_process_run):
	* src/nautilus-burn-process.h:
	* src/nautilus-burn-recorder.c: (cdrecord_stdout_line),
	(nautilus_burn_recorder_run_process),
	(nautilus_burn_recorder_blank_disc_cdrecord),
	(nautilus_burn_recorder_blank_disc_dvdrw_format):
	* src/nautilus-burn-recorder.h:
	* src/nautilus-cd-burner.c: (selection_dialog_response), (main):
	* src/nautilus-file-operations-progress-icons.h:
	* src/ncb-operation.c: (size_to_string_text),
	(insert_media_request_cb), (ask_rewrite_disc), (do_eject),
	(select_iso_filename), (sanitize_filename), (maybe_request_media),
	(create_track_from_burn_folder):
	* src/ncb-operation.h:
	* src/ncb-progress-dialog.c: (ncb_progress_dialog_update_icon),
	(dialog_sync_buttons):
	* src/ncb-selection-dialog.c: (size_to_string_text), (init_dialog):
	* src/ncb-selection.c: (verify_source_location_contents):
	* src/ncb-selection.h:
	* src/test-monitor.c:
	* src/test_blank.c: (main):

	Used git-stripspace to remove trailing whitespace.

2006-06-07  William Jon McCann  <mccann@jhu.edu>

	* src/nautilus-burn-bar.c: (nautilus_burn_bar_class_init),
	(nautilus_burn_bar_finalize):
	* src/nautilus-burn-drive.c: (nautilus_burn_drive_finalize),
	(nautilus_burn_drive_class_init):
	* src/nautilus-burn-recorder.c: (nautilus_burn_recorder_finalize),
	(nautilus_burn_recorder_class_init):
	G_DEFINE_TYPE takes care of peeking the parent class and declaring
	the _init() and _class_init() functions.

	Patch from Paolo Borelli <pborelli@katamail.com>
	Fixes #344139

2006-06-02  William Jon McCann  <mccann@jhu.edu>

	* src/nautilus-burn-drive.h:
	Remove drive_get_list().

2006-06-02  William Jon McCann  <mccann@jhu.edu>

	* src/nautilus-burn-drive-monitor.h:
	Remove drive_for_udi() for now since it
	is unimplemented.

2006-06-02  William Jon McCann  <mccann@jhu.edu>

	* src/nautilus-burn-drive-monitor.c (follow_links):
	Don't return null if no links found.

2006-06-01  William Jon McCann  <mccann@jhu.edu>

	* src/list_cddrives.c: (list_media_info):
	* src/nautilus-burn-drive-monitor.c: (monitor_set_drive_media),
	(nautilus_burn_drive_monitor_get_drive_for_device):
	* src/nautilus-burn-drive-private.h:
	* src/nautilus-burn-drive.c:
	(nautilus_burn_drive_media_is_appendable):
	* src/nautilus-burn-drive.h:
	Add nautilus_burn_drive_media_is_appendable to API.

	Patch from Philippe Rouquier <philippero@libertysurf.fr>
	Fixes #341804

2006-06-01  William Jon McCann  <mccann@jhu.edu>

	* src/bcs-test.c: (drive_changed), (main):
	Connect to new drive-changed signal.
	
	* src/nautilus-burn-drive-selection.[ch]:
	(nautilus_burn_drive_selection_class_init),
	(nautilus_burn_drive_selection_set_drive_internal),
	(combo_changed), (selection_update_sensitivity),
	(get_iter_for_drive), (selection_append_drive),
	(selection_remove_drive), (populate_model), (drive_connected_cb),
	(drive_disconnected_cb), (nautilus_burn_drive_selection_init),
	(nautilus_burn_drive_selection_finalize),
	(nautilus_burn_drive_selection_set_have_file_image),
	(nautilus_burn_drive_selection_set_recorders_only),
	(nautilus_burn_drive_selection_set_property),
	(nautilus_burn_drive_selection_get_property),
	(nautilus_burn_drive_selection_set_active),
	(nautilus_burn_drive_selection_get_active),
	(nautilus_burn_drive_selection_get_default_device),
	(nautilus_burn_drive_selection_set_device),
	(nautilus_burn_drive_selection_get_device),
	(nautilus_burn_drive_selection_get_drive):
	Handle adding and removing drives.  Fixes #145187

	* src/nautilus-burn.h:  Add nautilus-burn-drive-selection.h.

2006-05-31  William Jon McCann  <mccann@jhu.edu>

	* src/nautilus-burn-drive-monitor.c (canonicalize_filename) 
	(follow_links, resolve_symlink) 
	(nautilus_burn_drive_monitor_get_drive_for_device):
	Resolve symlinks and canonicalize paths.

	Fixes #329272

2006-05-31  William Jon McCann  <mccann@jhu.edu>

	* src/ncb-selection-dialog.c (ncb_selection_dialog_set_label):
	Fix bug from patch for #342360.

2006-05-31  William Jon McCann  <mccann@jhu.edu>

	* src/nautilus-burn-drive-monitor.c:
	Fix function name in comments.  Add missing comments.

	Patch from Fabio Bonelli <fabiobonelli@libero.it>
	Fixes #343417
	
2006-05-30  William Jon McCann  <mccann@jhu.edu>

	* src/make-iso.c: (ask_disable_joliet),
	(nautilus_burn_iso_run_process),
	(nautilus_burn_iso_make_from_drive):
	* src/nautilus-burn-recorder.c:
	(nautilus_burn_recorder_run_process), (cdrdao_stderr_line),
	(nautilus_burn_recorder_write_cdrecord):
	* src/nautilus-cd-burner.c: (ncb_hig_dialog):
	* src/ncb-operation.c: (ncb_hig_dialog):
	* src/ncb-selection.c: (ncb_hig_dialog):
	Fix up error handling.

	Fixes part of #343096

2006-05-30  William Jon McCann  <mccann@jhu.edu>

	* src/nautilus-burn-drive.h (NAUTILUS_BURN_DRIVE_SIZE_TO_TIME):
	Ensure that NAUTILUS_BURN_DRIVE_SIZE_TO_TIME doesn't return negative
	numbers.

	Patch from Fabio Bonelli <fabiobonelli@libero.it>
	Fixes #342520

2006-05-30  William Jon McCann  <mccann@jhu.edu>

	* src/ncb-selection-dialog.c: (ncb_selection_dialog_set_label):
	Only allow editing the label when burning from burn folder.

	Patch from Fabio Bonelli <fabiobonelli@libero.it>
	Partially fixes #342360

2006-05-30  William Jon McCann  <mccann@jhu.edu>

	* src/ncb-operation.c: (progress_dialog_response):
	* src/ncb-progress-dialog.c:
	Handle delete events from progress dialog.

2006-05-30  William Jon McCann  <mccann@jhu.edu>

	* configure.in:
	* po/POTFILES.in:
	* src/Makefile.am:
	* src/dvd_plus_rw_utils.cpp:
	* src/list_cddrives.c: (list_drive_info), (list_drives), (main):
	* src/make-iso.c: (get_disc_info),
	(nautilus_burn_iso_make_from_drive):
	* src/nautilus-burn-drive-monitor-private.h:
	* src/nautilus-burn-drive-monitor.c:
	(monitor_get_drive_first_child_udi), (hal_type_to_media_type),
	(monitor_set_drive_media), (find_drive_by_udi),
	(find_drive_by_media_udi), (hal_device_property_modified),
	(nautilus_burn_drive_monitor_get_drives),
	(nautilus_burn_drive_monitor_get_recorder_drives),
	(fill_write_speeds),
	(nautilus_burn_drive_monitor_get_drive_for_image),
	(nautilus_burn_drive_monitor_get_drive_for_device),
	(hal_parse_write_speeds), (hal_drive_from_udi),
	(monitor_drive_connected), (monitor_drive_disconnected),
	(monitor_drive_media_added), (monitor_drive_media_removed),
	(hal_device_added), (hal_device_removed),
	(hal_mainloop_integration), (hal_update_all),
	(set_hal_monitor_enabled), (monitor_hal_shutdown),
	(monitor_hal_init), (nautilus_burn_drive_monitor_set_property),
	(nautilus_burn_drive_monitor_get_property),
	(nautilus_burn_drive_monitor_class_init),
	(nautilus_burn_drive_monitor_unref),
	(nautilus_burn_drive_monitor_init),
	(nautilus_burn_drive_monitor_finalize),
	(nautilus_burn_get_drive_monitor),
	(_nautilus_burn_drive_monitor_shutdown):
	* src/nautilus-burn-drive-monitor.h:
	* src/nautilus-burn-drive-private.h:
	* src/nautilus-burn-drive-selection.c: (combo_device_changed),
	(cdrom_combo_box),
	(nautilus_burn_drive_selection_set_have_file_image),
	(compare_drives),
	(nautilus_burn_drive_selection_set_recorders_only),
	(nautilus_burn_drive_selection_set_active),
	(nautilus_burn_drive_selection_get_default_device),
	(nautilus_burn_drive_selection_set_device),
	(nautilus_burn_drive_selection_get_device):
	* src/nautilus-burn-drive.c:
	(nautilus_burn_drive_get_max_speed_write),
	(nautilus_burn_drive_get_max_speed_read),
	(nautilus_burn_drive_get_name_for_display),
	(nautilus_burn_drive_get_device),
	(nautilus_burn_drive_get_drive_type),
	(nautilus_burn_drive_can_rewrite), (nautilus_burn_drive_can_write),
	(nautilus_burn_drive_door_is_open),
	(nautilus_burn_drive_hal_get_media_type_full),
	(nautilus_burn_drive_get_media_type_full),
	(nautilus_burn_drive_get_media_size),
	(nautilus_burn_drive_get_media_capacity),
	(nautilus_burn_drive_get_media_label), (unmount_thread_start),
	(nautilus_burn_drive_unmount), (nautilus_burn_drive_is_mounted),
	(nautilus_burn_drive_eject), (get_hal_context),
	(nautilus_burn_drive_lock), (nautilus_burn_drive_unlock),
	(_nautilus_burn_drive_media_added),
	(_nautilus_burn_drive_media_removed),
	(_nautilus_burn_drive_disconnected),
	(nautilus_burn_drive_finalize), (nautilus_burn_drive_init),
	(_nautilus_burn_drive_new), (nautilus_burn_drive_equal),
	(nautilus_burn_drive_get_supported_media_string),
	(nautilus_burn_drive_set_property),
	(nautilus_burn_drive_get_property),
	(nautilus_burn_drive_class_init):
	* src/nautilus-burn-drive.h:
	* src/nautilus-burn-init.c: (nautilus_burn_init),
	(nautilus_burn_initialized), (nautilus_burn_shutdown):
	* src/nautilus-burn-init.h:
	* src/nautilus-burn-recorder.c: (can_burn_dvds),
	(nautilus_burn_recorder_wait_for_insertion),
	(nautilus_burn_recorder_write_growisofs),
	(nautilus_burn_recorder_write_cdrecord),
	(nautilus_burn_recorder_blank_disc_cdrecord),
	(nautilus_burn_recorder_blank_disc_dvdrw_format):
	* src/nautilus-burn.h:
	* src/nautilus-cd-burner.c: (selection_dialog_response), (main):
	* src/ncb-operation.c: (finish_progress_dialog), (request_media),
	(update_progress_dialog_disc_type), (maybe_request_media),
	(create_track_from_device), (create_track_from_burn_folder),
	(burn_cd):
	* src/ncb-selection-dialog.c: (update_speeds_combobox),
	(refresh_dialog):
	* src/ncb-selection.c: (verify_device):
	* src/test-monitor.c: (drive_media_added_cb),
	(drive_media_removed_cb), (drive_disconnected_cb),
	(monitor_connected_cb), (monitor_disconnected_cb),
	(monitor_media_added_cb), (monitor_media_removed_cb),
	(monitor_drives), (main):
	* src/test_blank.c: (blank_disc), (main):
	* src/transport.hxx:

	Add a NautilusBurnDriveMonitor singleton class to manage
	and monitor the list of drives.  Add nautilus_burn_init and
	nautilus_burn_shutdown API.  Add and prefer the use of
	nautilus-burn.h header.  Add signals for drive connecting
	and disconnecting.

	Fixes part of #145187

2006-05-19  William Jon McCann  <mccann@jhu.edu>

	* src/list_cddrives.c (list_media_info, display_size):
	Use both capacity and size API.

	* configure.in: Bump LT_VERSION since we break API.

	* src/nautilus-burn-drive.c:
	(nautilus_burn_drive_get_media_capacity_from_path),
	(nautilus_burn_drive_hal_get_media_capacity),
	(nautilus_burn_drive_get_media_size),
	(nautilus_burn_drive_get_media_capacity),
	(nautilus_burn_drive_nohal_is_mounted):
	* src/nautilus-burn-drive.h:
	* src/nautilus-burn-recorder.c:
	(nautilus_burn_recorder_wait_for_insertion):
	* src/ncb-operation.c: (request_media):
	* src/ncb-selection.c: (verify_device):
	Rename drive_get_media_size to get_media_capacity because
	that is what it actually is.  Add a new drive_get_media_size
	that reports the data size of the volume.

	Patch from Fabio Bonelli <fabiobonelli@libero.it>
	Fixes #328732

2006-05-17  William Jon McCann  <mccann@jhu.edu>

	* src/ncb-operation.c: (remove_file),
	(ncb_operation_temp_files_cleanup), (create_track_from_device),
	(create_track_from_burn_folder):
	Use g_remove to remove temporary directories as well as files.
	Wrap in a convenience function and check for errors.

2006-05-16  William Jon McCann  <mccann@jhu.edu>

	* src/make-iso.c: (process_error), (nautilus_burn_iso_run_process):
	Use new process error functions.

	* src/nautilus-burn-process.[ch]: (nautilus_burn_process_set_error),
	(nautilus_burn_process_get_error), (nautilus_burn_process_cancel):
	Add public get/set error functions.
	
	* src/nautilus-burn-recorder.c: (growisofs_stderr_line),
	(cdrecord_stderr_line), (nautilus_burn_recorder_write_tracks),
	(nautilus_burn_recorder_run_process):
	Use new process error functions.  Catch a growisofs error
	when unable to unmount disc.

2006-05-16  William Jon McCann  <mccann@jhu.edu>

	* configure.in: Make sure to define USE_HAL.
	
	* src/make-iso.c: (nautilus_burn_iso_graft_free):
	* src/ncb-operation.c: (ncb_operation_temp_files_add),
	(get_temp_path_gconf), (get_temp_paths),
	(create_track_from_device), (create_track_from_burn_folder):
	Rework the way we create temp files to simplify the
	logic and not leak.  Fixes #342017

2006-05-16  William Jon McCann  <mccann@jhu.edu>

	* src/nautilus-burn-drive.c:
	Disable non-HAL fallback code.
	
	* configure.in: Require HAL >= 0.5.7
	Fixes #339051

2006-05-15  William Jon McCann  <mccann@jhu.edu>

	* configure.in: Post release version bump.

=== 2.15.2 ===

2006-05-15  William Jon McCann  <mccann@jhu.edu>

	* NEWS: Update for 2.15.2 release

2006-05-15  William Jon McCann  <mccann@jhu.edu>

	* src/ncb-operation.c: (ncb_operation_temp_files_add),
	(ncb_operation_temp_files_cleanup),
	(create_track_from_burn_folder), (handle_cancel),
	(ncb_operation_finalize):
	Fix for cancellation and a few temp file leaks.

2006-05-15  William Jon McCann  <mccann@jhu.edu>

	* configure.in: Bump intltool req.

2006-05-15  William Jon McCann  <mccann@jhu.edu>

	* src/ncb-selection.c: (verify_source_location_contents):
	Reword burn from image message.  Fixes #341201

2006-05-15  William Jon McCann  <mccann@jhu.edu>

	* src/ncb-operation.c: (burn_cd):
	If preparing of tracks fails treat as if the process was
	cancelled.  All errors should already be handled.
	Fixes #341620

2006-05-15  William Jon McCann  <mccann@jhu.edu>

	* src/ncb-operation.c: (size_to_string_text), (ask_for_media):
	Display the size using the most sensible units.

2006-05-15  William Jon McCann  <mccann@jhu.edu>

	* src/ncb-selection-dialog.c: (size_to_string_text),
	(ncb_selection_dialog_set_size):
	Display the size using the most sensible units.

2006-05-09  William Jon McCann  <mccann@jhu.edu>

	* src/ncb-operation.c (create_track_from_device):
	Skip null filenames.

2006-05-09  William Jon McCann  <mccann@jhu.edu>

	* src/make-iso.[ch]: (nautilus_burn_iso_graft_free),
	(nautilus_burn_iso_graft_get_info), (nautilus_burn_iso_make):
	Add option to defer cleanup of graft files.  Expose get_info.
	
	* src/nautilus-burn-drive.h:  Add NAUTILUS_BURN_DRIVE_MEDIA_TYPE_IS_DVD
	
	* src/nautilus-burn-recorder.[ch]:
	(nautilus_burn_recorder_track_free), (cd_write_needs_growisofs),
	(growisofs_stderr_line), (create_temp_file),
	(create_temp_graft_file), (ncb_mkisofs_supports_utf8),
	(nautilus_burn_recorder_write_growisofs):
	Add new GRAFT_LIST track type.

	* src/ncb-operation.c: (maybe_request_media), (create_iso_track),
	(create_track_from_device), (create_graft_track),
	(create_track_from_burn_folder), (create_cue_track),
	(prepare_tracks), (burn_cd):
	Refactor to support using IsoGraft directly and new GRAFT_LIST track type.

	Fixes #113480

2006-05-09  William Jon McCann  <mccann@jhu.edu>

	* src/make-iso.c: (nautilus_burn_iso_make_from_graft):
	Store filename so it can be cleaned up.
	
	* src/nautilus-burn-process.c: (nautilus_burn_process_cancel),
	(nautilus_burn_process_stdout_read),
	(nautilus_burn_process_stderr_read):
	Add a few safety checks.
	
	* src/nautilus-cd-burner.c: (op_finished),
	(selection_dialog_response):
	Use async operation.
	
	* src/ncb-operation.[ch]: (do_make_another), (do_operation_idle),
	(ncb_operation_do_async), (handle_cancel), (handle_delete_event),
	(do_callback), (progress_dialog_response),
	(ncb_operation_finalize):
	Make the operation async so it can be unreffed in the callback.
	
	* src/ncb-progress-dialog.c: (ncb_progress_dialog_done): Remove space.
	
	* src/ncb-selection.c: (ncb_hig_show_error_dialog),
	(verify_source_location_contents), (verify_cue), (update_source):
	Add some error checking for CUE.  Show error dialog when errors
	are present.  Initialize error.

2006-05-08  William Jon McCann  <mccann@jhu.edu>

	* src/ncb-operation.c (nautilus_burn_progress_temp_files_add) 
	(nautilus_burn_progress_temp_files_cleanup): Remove debug.

	* src/nautilus-cd-burner.c:
	* src/ncb-progress-dialog.c: (ncb_progress_dialog_init):
	* src/ncb-selection-dialog.c: (ncb_selection_dialog_init):
	Update glade filename.  Fixes #341089

2006-05-08  William Jon McCann  <mccann@jhu.edu>

	* src/make-iso.[ch]: (graft_file_end_dir_visitor),
	(graft_file_visitor), (create_graft_file),
	(nautilus_burn_iso_graft_free), (create_temp_file),
	(create_temp_dir), (create_temp_graft_file),
	(nautilus_burn_iso_graft_new), (nautilus_burn_iso_graft_get_info),
	(nautilus_burn_iso_make_from_graft), (nautilus_burn_iso_make):
	Make an interface to the graft list stuff.

	* src/nautilus-cd-burner.c: (selection_dialog_response):
	* src/ncb-operation.c: (nautilus_burn_progress_temp_files_add),
	(nautilus_burn_progress_temp_files_cleanup), (burn_cd),
	(progress_dialog_response):  Don't leak operation.  Destroy
	dialog before calling gtk_main_quit so that removing files
	in finalize doesn't hang the window.

2006-05-08  William Jon McCann  <mccann@jhu.edu>

	* src/make-iso.c: (create_temp_dir), (nautilus_burn_iso_make):
	Don't free the template for mkdtemp.
	
	* src/ncb-operation.c: (finish_progress_dialog),
	(get_input_type_index): Don't offer eject if writing to ISO.

2006-05-08  William Jon McCann  <mccann@jhu.edu>

	* src/ncb-selection-dialog.c: (label_entry_insert_text),
	(label_entry_changed), (ncb_selection_dialog_init):
	Fix setting of label in selection.

2006-05-08  William Jon McCann  <mccann@jhu.edu>

	* src/make-iso.c: (nautilus_burn_iso_make_from_drive):
	Set the ISO size.

	* src/ncb-operation.c: (get_input_type_index),
	(update_progress_dialog_disc_type):
	Use the correct index into the arrays.

2006-05-08  William Jon McCann  <mccann@jhu.edu>

	* src/nautilus-burn-recorder.c:
	(nautilus_burn_recorder_run_process),
	(nautilus_burn_recorder_write_cdrecord):
	Remove spurious debug statements.

2006-05-08  William Jon McCann  <mccann@jhu.edu>

	* .cvsignore:
	* Makefile.am:
	* configure.in:
	* po/POTFILES.in:
	Updated for new locations
	
	* cdburn.glade:
	* cdrecorder-marshal.list:
	* *.png:
	* libnautilus-burn.pc.in:
	* dvd_plus_rw_utils.cpp:
	* *.[ch]:
	* transport.hxx:
	* mapping-modules.conf:
	* nautilus-cd-burner.desktop.in:
	* ncb.schemas.in:
	Moved files into subdirectories.

	* data/.cvsignore:
	* data/Makefile.am:
	* data/cdspin1.png:
	* data/cdspin2.png:
	* data/cdspin3.png:
	* data/cdspin4.png:
	* data/cdspin5.png:
	* data/cdspin6.png:
	* data/cdspin7.png:
	* data/cdspin8.png:
	* data/libnautilus-burn.pc.in:
	* data/mapping-modules.conf:
	* data/nautilus-cd-burner.desktop.in:
	* data/nautilus-cd-burner.glade:
	* data/nautilus-cd-burner.schemas.in:
	New location for files.
	
	* src/.cvsignore:
	* src/Makefile.am:
	* src/bcs-test.c: (on_file_image_checkbutton_toggled),
	(on_show_recorders_only_checkbutton_toggled), (main):
	* src/burn-extension.c: (debug_init), (debug_print),
	(launch_process), (launch_ncb_on_window), (write_activate_cb),
	(write_iso_activate_cb), (write_cue_activate_cb),
	(copy_disc_activate_cb), (nautilus_burn_get_file_items),
	(nautilus_burn_get_background_items),
	(nautilus_burn_get_toolbar_items),
	(nautilus_burn_menu_provider_iface_init), (bar_activated_cb),
	(dir_is_empty), (destroyed_callback), (sense_widget),
	(nautilus_burn_get_location_widget),
	(nautilus_burn_location_widget_provider_iface_init),
	(update_widget_sensitivity), (burn_monitor_cb), (start_monitor),
	(nautilus_burn_instance_init), (nautilus_burn_finalize),
	(nautilus_burn_class_init), (nautilus_burn_get_type),
	(nautilus_burn_register_type), (nautilus_module_initialize),
	(nautilus_module_shutdown), (nautilus_module_list_types):
	* src/cdrecorder-marshal.list:
	* src/dvd_plus_rw_utils.cpp:
	* src/list_cddrives.c: (list_drive_info), (list_media_info),
	(list_drives), (main):
	* src/make-iso.c: (nautilus_burn_iso_error_quark),
	(make_iso_get_free_space), (nautilus_burn_iso_cancel), (write_all),
	(copy_file), (escape_path), (dir_is_empty), (get_backing_file),
	(ask_disable_joliet), (graft_file_end_dir_visitor),
	(file_info_is_allowed), (graft_file_visitor), (create_graft_file),
	(process_error), (ncb_make_valid_utf8), (readcd_stderr_line),
	(get_average_rate), (cdrdao_stderr_line),
	(ncb_mkisofs_supports_utf8), (get_image_space_error_message),
	(nautilus_burn_iso_run_process), (create_temp_dir),
	(get_filelist_info), (mkisofs_stdout_line), (mkisofs_stderr_line),
	(nautilus_burn_iso_make), (get_disc_info),
	(nautilus_burn_iso_make_from_drive), (nautilus_burn_iso_verify),
	(nautilus_burn_iso_finalize), (nautilus_burn_iso_init),
	(nautilus_burn_iso_new), (nautilus_burn_iso_class_init):
	* src/make-iso.h:
	* src/mapping-daemon.c: (debug_init), (debug_print),
	(subscription_free), (subscription_ref), (subscription_unref),
	(subscription_new), (subscription_cancel), (subscription_get_path),
	(subscription_get_userdata), (subscription_send_event),
	(actually_dispatch_event), (dispatch_data_free),
	(virtual_node_add_subscription),
	(virtual_node_remove_subscription),
	(virtual_node_subscription_event), (virtual_node_new),
	(virtual_node_free), (virtual_root_free), (virtual_root_new),
	(lookup_root), (virtual_dir_lookup), (virtual_node_lookup),
	(virtual_mkdir), (virtual_unlink), (virtual_create),
	(get_backing_file), (create_dir), (remove_dir), (remove_file),
	(create_file), (create_dir_link), (create_link), (move_file),
	(list_dir), (connection_add_subscription),
	(connection_remove_subscription), (remove_subscription),
	(connection_free), (connection_ref), (connection_unref),
	(connection_new), (connection_get_subscription), (connection_add),
	(connection_remove), (connection_error), (monitor_add),
	(monitor_cancel), (init_roots), (operation_string),
	(handle_request), (handle_new_client), (have_data_helper),
	(have_data), (free_roots_helper), (free_roots), (cleanup_timeout),
	(main):
	* src/mapping-daemon.h:
	* src/mapping-method.c: (debug_init), (debug_print),
	(get_path_from_uri), (get_uri), (request_op_unlocked),
	(monitor_event_pending), (monitor_do_iter_unlocked), (request_op),
	(remove_file_helper), (do_open), (do_create), (do_close),
	(do_read), (do_write), (do_seek), (do_tell), (do_truncate_handle),
	(do_open_directory), (do_close_directory),
	(fill_in_directory_info), (do_read_directory), (do_get_file_info),
	(do_get_file_info_from_handle), (do_make_directory),
	(do_remove_directory), (do_unlink), (do_move), (do_is_local),
	(do_check_same_fs), (do_set_file_info), (do_truncate),
	(do_create_symbolic_link), (monitor_callback),
	(monitor_stop_unlocked), (monitor_setup), (do_monitor_add),
	(do_monitor_cancel), (do_file_control), (do_forget_cache),
	(daemon_child_setup), (launch_daemon), (vfs_module_init),
	(vfs_module_shutdown):
	* src/mapping-method.h:
	* src/mapping-protocol.c: (mapping_protocol_get_unix_name),
	(mapping_protocol_data_available), (mapping_protocol_channel_new),
	(mapping_protocol_channel_free), (mapping_protocol_channel_ref),
	(mapping_protocol_channel_unref), (write_all), (read_all),
	(encode_int), (decode_int), (encode_string), (decode_string),
	(encode_pointer), (decode_pointer),
	(mapping_protocol_request_encode),
	(mapping_protocol_request_decode),
	(mapping_protocol_request_destroy), (encode_handshake),
	(decode_handshake), (mapping_protocol_reply_encode),
	(decode_reply_error), (mapping_protocol_reply_decode),
	(mapping_protocol_reply_destroy),
	(mapping_protocol_monitor_event_encode),
	(mapping_protocol_monitor_event_decode),
	(mapping_protocol_monitor_event_destroy):
	* src/mapping-protocol.h:
	* src/mkdtemp.c:
	* src/mkdtemp.h:
	* src/nautilus-burn-bar.c: (nautilus_burn_bar_get_button),
	(nautilus_burn_bar_set_property), (nautilus_burn_bar_get_property),
	(nautilus_burn_bar_class_init), (button_clicked_cb),
	(nautilus_burn_bar_init), (nautilus_burn_bar_finalize),
	(nautilus_burn_bar_new):
	* src/nautilus-burn-bar.h:
	* src/nautilus-burn-drive-selection.c: (get_drive),
	(nautilus_burn_drive_selection_class_init), (combo_device_changed),
	(cdrom_combo_box), (nautilus_burn_drive_selection_init),
	(nautilus_burn_drive_selection_finalize),
	(nautilus_burn_drive_selection_new),
	(nautilus_burn_drive_selection_set_have_file_image),
	(compare_drives),
	(nautilus_burn_drive_selection_set_recorders_only),
	(nautilus_burn_drive_selection_set_property),
	(nautilus_burn_drive_selection_get_property),
	(nautilus_burn_drive_selection_set_active),
	(nautilus_burn_drive_selection_get_active),
	(nautilus_burn_drive_selection_get_default_device),
	(nautilus_burn_drive_selection_set_device),
	(nautilus_burn_drive_selection_get_device),
	(nautilus_burn_drive_selection_get_drive):
	* src/nautilus-burn-drive-selection.h:
	* src/nautilus-burn-drive.c: (fill_write_speeds),
	(open_ioctl_handle), (close_ioctl_handle), (get_hal_context),
	(get_device_max_write_speed), (get_device_max_read_speed),
	(cdrecord_get_stdout_for_id), (get_cd_properties), (add_whitelist),
	(nautilus_burn_drive_get_max_speed_write),
	(nautilus_burn_drive_get_max_speed_read),
	(nautilus_burn_drive_get_write_speeds),
	(nautilus_burn_drive_get_name_for_display),
	(nautilus_burn_drive_can_rewrite), (nautilus_burn_drive_can_write),
	(add_dvd_plus), (drive_door_is_open),
	(nautilus_burn_drive_door_is_open), (get_disc_type),
	(disc_type_get_info),
	(nautilus_burn_drive_get_media_type_from_path_full),
	(nautilus_burn_drive_get_media_type_from_path),
	(nautilus_burn_drive_get_media_type),
	(hal_drive_get_first_child_udi),
	(nautilus_burn_drive_hal_get_media_type_full),
	(nautilus_burn_drive_get_media_type_full),
	(nautilus_burn_drive_get_media_size_from_path),
	(try_media_size_from_type),
	(nautilus_burn_drive_hal_get_media_size),
	(nautilus_burn_drive_get_media_size),
	(nautilus_burn_drive_hal_get_media_label),
	(nautilus_burn_drive_get_media_label), (free_unmount_data),
	(unmount_done), (unmount_timeout), (create_command),
	(unmount_thread_start), (nautilus_burn_drive_unmount),
	(nautilus_burn_drive_hal_is_mounted),
	(nautilus_burn_drive_nohal_is_mounted),
	(nautilus_burn_drive_is_mounted), (nautilus_burn_drive_eject),
	(hal_udi_is_our_drive), (hal_device_added), (hal_device_removed),
	(hal_mainloop_integration), (drive_hal_shutdown), (drive_hal_init),
	(hal_parse_write_speeds), (hal_drive_from_udi), (hal_scan),
	(read_lines), (linux_add_whitelist), (get_scsi_units),
	(count_strings), (get_cd_scsi_id), (lookup_scsi_unit),
	(get_scsi_cd_name), (drive_get_name), (add_linux_cd_recorder),
	(add_linux_cd_drive), (get_cd_device_file), (linux_scan),
	(freebsd_scan), (cdrecord_scan_get_stdout), (cdrecord_scan),
	(nautilus_burn_drive_get_file_image), (test_cdroms),
	(nautilus_burn_drive_get_list), (nautilus_burn_drive_unref),
	(nautilus_burn_drive_ref), (nautilus_burn_drive_free),
	(nautilus_burn_drive_lock), (nautilus_burn_drive_unlock),
	(nautilus_burn_drive_finalize), (nautilus_burn_drive_init),
	(nautilus_burn_drive_new), (nautilus_burn_drive_new_from_path),
	(nautilus_burn_drive_copy), (nautilus_burn_drive_equal),
	(add_desc), (nautilus_burn_drive_get_supported_media_string),
	(nautilus_burn_drive_media_type_get_string),
	(nautilus_burn_drive_media_type_is_writable),
	(set_monitor_enabled_hal), (poll_tray_opened),
	(set_monitor_enabled_poll),
	(nautilus_burn_drive_set_monitor_enabled),
	(nautilus_burn_drive_set_property),
	(nautilus_burn_drive_get_property),
	(nautilus_burn_drive_class_init):
	* src/nautilus-burn-drive.h:
	* src/nautilus-burn-features.h.in:
	* src/nautilus-burn-process.c: (nautilus_burn_process_error_quark),
	(nautilus_burn_process_new), (nautilus_burn_process_free),
	(nautilus_burn_process_cancel), (start_async_with_watch),
	(nautilus_burn_process_stdout_read),
	(nautilus_burn_process_stderr_read), (nautilus_burn_process_run):
	* src/nautilus-burn-process.h:
	* src/nautilus-burn-recorder.c:
	(nautilus_burn_recorder_error_quark),
	(nautilus_burn_recorder_track_free), (can_burn_dvds),
	(cd_write_needs_growisofs), (nautilus_burn_recorder_cancel),
	(insert_cd_retry), (compute_time_remaining),
	(growisofs_stdout_line), (growisofs_blank_stdout_line),
	(get_average_rate), (cdrecord_stdout_line),
	(cdrecord_blank_stdout_line), (dvdrw_format_stderr_line),
	(growisofs_stderr_line), (cdrecord_stderr_line),
	(nautilus_burn_recorder_wait_for_insertion),
	(nautilus_burn_recorder_write_tracks),
	(nautilus_burn_recorder_run_process),
	(nautilus_burn_recorder_write_growisofs), (cdrdao_stderr_line),
	(nautilus_burn_recorder_write_cdrecord),
	(nautilus_burn_recorder_blank_disc_cdrecord),
	(nautilus_burn_recorder_blank_disc_dvdrw_format),
	(nautilus_burn_drive_format_needs_growisofs),
	(nautilus_burn_recorder_blank_disc),
	(nautilus_burn_recorder_finalize), (nautilus_burn_recorder_init),
	(nautilus_burn_recorder_new), (nautilus_burn_recorder_class_init):
	* src/nautilus-burn-recorder.h:
	* src/nautilus-cd-burner.c: (profile_add_indent),
	(_ncb_profile_log), (ncb_hig_dialog), (ncb_hig_show_error_dialog),
	(help_activate), (gconf_save_device), (gconf_load_device),
	(selection_dialog_response), (expand_path_input), (main):
	* src/nautilus-cd-burner.h:
	* src/nautilus-file-operations-progress-icons.h:
	* src/ncb-operation.c: (ncb_operation_set_property),
	(ncb_operation_get_property), (ncb_hig_dialog),
	(ncb_hig_show_error_dialog),
	(nautilus_burn_progress_temp_files_add),
	(nautilus_burn_progress_temp_files_cleanup),
	(iso_animation_changed_cb), (animation_changed_cb),
	(action_changed_cb), (iso_progress_changed_cb),
	(progress_changed_cb), (ask_for_media), (insert_media_request_cb),
	(ask_rewrite_disc), (warn_data_loss_cb), (show_error_message),
	(reset_progress_dialog), (do_eject), (do_make_another),
	(finish_progress_dialog), (overwrite_existing_file),
	(select_iso_filename), (request_media), (sanitize_filename),
	(get_output_filename), (write_disc), (get_input_type_index),
	(update_progress_dialog_disc_type), (maybe_request_media),
	(build_temp_iso_filename), (get_temp_filename_gconf),
	(get_temp_filename_tmp), (get_temp_filename_home), (create_iso),
	(ncb_operation_set_selection), (burn_cd), (ncb_operation_do),
	(ncb_operation_class_init), (ask_cancel), (do_cancel),
	(handle_delete_event), (progress_dialog_response),
	(ncb_operation_init), (ncb_operation_finalize),
	(ncb_operation_new):
	* src/ncb-operation.h:
	* src/ncb-progress-dialog.c: (ncb_progress_dialog_set_property),
	(ncb_progress_dialog_get_property),
	(ncb_progress_dialog_update_icon),
	(ncb_progress_dialog_set_fraction), (time_to_string_text),
	(ncb_progress_dialog_set_time_remaining),
	(ncb_progress_dialog_set_description),
	(ncb_progress_dialog_set_heading),
	(ncb_progress_dialog_set_operation_string),
	(ncb_progress_dialog_set_image), (ncb_progress_dialog_set_active),
	(ncb_progress_dialog_image_setup),
	(ncb_progress_dialog_image_cleanup), (dialog_sync_buttons),
	(ncb_progress_dialog_clear), (ncb_progress_dialog_done),
	(ncb_progress_dialog_class_init), (ncb_progress_dialog_init),
	(ncb_progress_dialog_finalize), (ncb_progress_dialog_new):
	* src/ncb-progress-dialog.h:
	* src/ncb-selection-dialog.c: (ncb_selection_dialog_set_property),
	(ncb_selection_dialog_get_property),
	(ncb_selection_dialog_set_size), (ncb_selection_dialog_set_label),
	(update_source), (update_source_size), (update_label),
	(update_dialog_selection), (ncb_selection_dialog_set_selection),
	(ncb_selection_dialog_get_selection), (label_entry_insert_text),
	(ncb_selection_dialog_set_drive), (ncb_selection_dialog_get_drive),
	(ncb_selection_dialog_class_init), (update_speeds_combobox),
	(dialog_media_added_cb), (refresh_dialog), (setup_speed_combobox),
	(sync_drive_selection), (target_changed),
	(ncb_selection_dialog_get_speed), (speed_changed), (init_dialog),
	(selection_source_type_changed), (selection_source_size_changed),
	(selection_label_changed), (selection_drive_changed),
	(ncb_selection_dialog_init), (ncb_selection_dialog_finalize),
	(ncb_selection_dialog_new):
	* src/ncb-selection-dialog.h:
	* src/ncb-selection.c: (ncb_selection_error_quark),
	(ncb_selection_source_get_type), (ncb_selection_set_property),
	(ncb_selection_get_property), (get_backing_file),
	(file_info_is_image), (file_info_is_allowed),
	(estimate_size_callback), (estimate_size), (ncb_hig_dialog),
	(verify_source_location_contents), (verify_source_image),
	(verify_burn_folder), (verify_device), (verify_cue), (verify_iso),
	(create_default_label), (update_source),
	(ncb_selection_set_source), (ncb_selection_set_drive),
	(ncb_selection_set_speed), (ncb_selection_set_size),
	(ncb_selection_get_size), (ncb_selection_set_label),
	(ncb_selection_get_source), (ncb_selection_get_drive),
	(ncb_selection_peek_drive), (ncb_selection_get_speed),
	(ncb_selection_get_label), (ncb_selection_peek_label),
	(ncb_selection_class_init), (ncb_selection_init),
	(ncb_selection_finalize), (ncb_selection_new):
	* src/ncb-selection.h:
	* src/test-monitor.c: (media_added_cb), (media_removed_cb),
	(monitor_drives), (main):
	* src/test_blank.c: (action_changed_cb), (progress_changed_cb),
	(blank_disc), (main):
	* src/transport.hxx:
	New location for files.  Split n-c-b up into a few different classes.
	Converted make-iso into a class.

2006-05-03  William Jon McCann  <mccann@jhu.edu>

	* nautilus-cd-burner.c: (gconf_save_device), (gconf_load_device),
	(selection_dialog_response), (create_selection_dialog):
	Save writing device.  Fixes #309518.

2006-04-25  William Jon McCann  <mccann@jhu.edu>

	* nautilus-burn-recorder.c: (cdrecord_stdout_line),
	(cdrecord_blank_stdout_line), (growisofs_stderr_line),
	(cdrecord_stderr_line), (nautilus_burn_recorder_run_process):
	* nautilus-burn-recorder.h:
	Try to get error messages out of cdrecord.

2006-04-24  William Jon McCann  <mccann@jhu.edu>

	* configure.in: Post release version bump.

=== 2.15.1 ===

2006-04-24  William Jon McCann  <mccann@jhu.edu>

	* NEWS: Update for 2.15.1 release
	* Makefile.am (nautilus_cd_burner_SOURCES): Add new file.

2006-04-24  William Jon McCann  <mccann@jhu.edu>

	* nautilus-cd-burner.c (setup_cancel_button): Hide the eject button
	when cancel is shown.

2006-04-24  William Jon McCann  <mccann@jhu.edu>

	* nautilus-cd-burner.c: (nautilus_burn_progress_update_icon),
	(nautilus_burn_progress_set_fraction),
	(nautilus_burn_progress_image_setup), (write_disc):
	* nautilus-file-operations-progress-icons.h:
	Use the nautilus file operations icon for window icon
	to report progress.

	Fixes #336413

2006-04-24  William Jon McCann  <mccann@jhu.edu>

	* Makefile.am (cdburn_DATA): Avoid listing files twice.

2006-04-21  Brian Pepple  <bdpepple@gmail.com>

	* configure.in: 
	* po/LINGUAS:
	Update handling of po/LINGUAS for new instructions.  Refer
	to http://live.gnome.org/GnomeGoals/PoLinguas

2006-04-19  William Jon McCann  <mccann@jhu.edu>

	* list_cddrives.c: (list_drive_info):
	* nautilus-burn-drive.c: (get_device_max_write_speed),
	(get_device_max_read_speed), (hal_parse_write_speeds),
	(hal_drive_from_udi):
	* nautilus-burn-drive.h:
	* nautilus-burn-recorder.c:
	(nautilus_burn_recorder_write_growisofs),
	(nautilus_burn_recorder_write_cdrecord):
	* nautilus-cd-burner.c: (update_speeds_combobox),
	(dialog_media_added_cb), (refresh_dialog):
	Show DVD speeds in speed selection when appropriate.

	Patch from Fabio Bonelli <fabiobonelli@libero.it>
	Fixes #333486

2006-04-19  William Jon McCann  <mccann@jhu.edu>

	* make-iso.c (mkisofs_stderr_read):
	Report incorrectly encoded filenames.

	Based on patch from Mads Chr. Olesen <gnome-bugzilla@shiyee.dk>
	Fixes #316177
	
2006-04-19  William Jon McCann  <mccann@jhu.edu>

	* nautilus-cd-burner.c (expand_path_input):
	Support relative paths from command line.
	Fixes #338972

2006-04-19  William Jon McCann  <mccann@jhu.edu>

	* configure.in: Don't use -Wall when not using gcc.
	Fixes #338225

2006-04-10  William Jon McCann  <mccann@jhu.edu>

	* nautilus-cd-burner.c (main): Use GOption.

	Patch from Sebastien Bacher <seb128@debian.org>
	Fixes #336091

2006-04-10  William Jon McCann  <mccann@jhu.edu>

	* po/LINGUAS: New file listing all supported languages.

	* configure.in: Use po/LINGUAS instead of including all languages
	directly in this file. See the wiki for more information:
	http://live.gnome.org/GnomeGoals/PoLinguas

	Patch from Brian Pepple  <bdpepple@gmail.com>
	Fixes #337949

2006-04-10  William Jon McCann  <mccann@jhu.edu>

	* configure.in: Bump version to 2.15.1 after branching.

2006-04-10  William Jon McCann  <mccann@jhu.edu>

	* configure.in: Post release version bump.

=== 2.14.1 ===

2006-04-10  William Jon McCann  <mccann@jhu.edu>

	* NEWS: Update for 2.14.1 release.

2006-03-29  William Jon McCann  <mccann@jhu.edu>

	* nautilus-cd-burner.c (profile_add_indent, _ncb_profile_log) 
	(nautilus_burn_progress_write_data_free, ncb_hig_dialog) 
	(nautilus_burn_progress_image_cleanup, ask_for_media) 
	(insert_media_request_cb, file_info_is_image):
	Be consistent with braces.
	(sanitize_filename): New function to strip unsafe chars from filenames.
	(get_output_filename): Sanitize filenames.  Fixes #333333.
	(burn_cd, lookup_current_recorder, get_speed_selection) 
	(verify_source_location_contents, verify_source_image) 
	(selection_dialog_response, fill_selection_dialog): Brace consistency.

2006-03-27  Vladimer Sichinava  <vlsichinava@gmail.com>

        * ka.po: Updated Georgian translation by
	 Tea Kharitonashvili <taya@convert.ge>

2006-03-22  William Jon McCann  <mccann@jhu.edu>

	* nautilus-burn-recorder.c (nautilus_burn_process_free) 
	(compute_time_remaining, get_average_rate, cdrecord_stdout_line):
	Average the rates to smooth out rounding errors from cdrecord.

	Fixes #319761

2006-03-22  William Jon McCann  <mccann@jhu.edu>

	* nautilus-burn-recorder.c (cdrecord_stdout_line):
	Sum the sizes of the tracks to get the total
	size to write instead of looking at the	image size.

	Fixes #335420

2006-03-22  William Jon McCann  <mccann@jhu.edu>

	* nautilus-burn-drive.c (add_linux_cd_recorder):
	Unref drive instead of freeing it when getting id fails.

	May fix #333464.

2006-03-20  Vladimer Sichinava  <vlsichinava@gmail.com>

        * configure.in: Added "ka" (Georgian) to ALL_LINGUAS

2006-03-15  William Jon McCann  <mccann@jhu.edu>

	* configure.in: Post release version bump.

=== 2.14.0.2 ===

2006-03-15  William Jon McCann  <mccann@jhu.edu>

	* NEWS: Update for 2.14.0.2 release.

2006-03-15  William Jon McCann  <mccann@jhu.edu>

	* configure.in: Unbump version number.
	The last release used 0.1 as the minor version
	number.  This doesn't work since we use the
	minor version number in the preprocessor macro
	NAUTILUS_BURN_CHECK_VERSION and they don't like
	floating point numbers. Fixes #334628.

2006-03-13  William Jon McCann  <mccann@jhu.edu>

	* configure.in: Post release version bump.

=== 2.14.0.1 ===

2006-03-13  William Jon McCann  <mccann@jhu.edu>

	* NEWS: Update for 2.14.0.1 release.

2006-03-13  William Jon McCann  <mccann@jhu.edu>

	* configure.in: Unbump released version.

	* nautilus-burn-drive-selection.c (combo_device_changed):
	Do notify on selection instead of combo.  #333263

2006-03-13  William Jon McCann  <mccann@jhu.edu>

	* configure.in: Post release version bump.

=== 2.14.0 ===

2006-03-13  William Jon McCann  <mccann@jhu.edu>

	* NEWS: Update for 2.14.0 release.

2006-03-08  William Jon McCann  <mccann@jhu.edu>

	* test_blank.c (blank_disc): Initialize glib types
	before using libnautilus-burn.

	Patch from Fabio Bonelli <fabiobonelli@libero.it>
	Fixes #333758

2006-03-03  Ross Burton  <ross@burtonini.com>

	* nautilus-burn-drive-selection.c:
	Emit the notify signal when changing the drive property (#333263)

2006-02-27  William Jon McCann  <mccann@jhu.edu>

	* configure.in: Post release version bump.

=== 2.13.92 ===

2006-02-27  William Jon McCann  <mccann@jhu.edu>

	* NEWS: Update for 2.13.92 release.

2006-02-27  William Jon McCann  <mccann@jhu.edu>

	* nautilus-cd-burner.c (burn_cd): Braces.

2006-02-24  William Jon McCann  <mccann@jhu.edu>

	* nautilus-burn-recorder.h: 
	* nautilus-burn-recorder.c (cdrecord_stdout_line) 
	(dvdrw_format_stderr_line, nautilus_burn_recorder_run_process) 
	(cdrdao_stderr_line): A few more attempts at fixing #317607.
	(nautilus_burn_recorder_wait_for_insertion): Fix warning.

2006-02-24  William Jon McCann  <mccann@jhu.edu>

	* nautilus-cd-burner.c (ask_cancel): Set correct default button position.

2006-02-24  William Jon McCann  <mccann@jhu.edu>

	* nautilus-cd-burner.c (request_media): 
	Check return value of drive_unmount and show a warning if it fails.

	* nautilus-burn-recorder.c (nautilus_burn_recorder_wait_for_insertion):
	Check return value of drive_unmount and show a warning if it fails.

	* nautilus-burn-drive.c (create_command):
	Don't try to figure out whether to use gnome-mount
	or not at run time.  This doesn't work well.  Particularly
	when the PATH gets messed up.
	(unmount_thread_start): Add warning on error.
	(nautilus_burn_drive_eject): Don't check for gnome-mount
	at runtime.

	* configure.in: Add a check for gnome-mount support.

2006-02-24  William Jon McCann  <mccann@jhu.edu>

	* nautilus-cd-burner.c (get_backing_file, estimate_size_callback) 
	(estimate_size): Lookup the backing file for ISO images
	that we write as image from burn:///.  Fixes #332413.

2006-02-14  William Jon McCann  <mccann@jhu.edu>

	* nautilus-burn-recorder.c (nautilus_burn_recorder_wait_for_insertion):
	Remove unused variable.

	* nautilus-burn-drive.c (use_gnome_mount):
	Don't define var in middle of block.

	Patch from Jens Granseuer <jengr@gmx.net>
	Fixes #331170

2006-02-14  William Jon McCann  <mccann@jhu.edu>

	* configure.in: Post release version bump.

=== 2.13.91 ===

2006-02-14  William Jon McCann  <mccann@jhu.edu>

	* NEWS: Update for 2.13.91 release.

2006-02-10  William Jon McCann  <mccann@jhu.edu>

	* nautilus-burn-drive.c: Re-enable the non-HAL
	fallback code until we can require HAL 0.5.7, sigh.

2006-02-10  William Jon McCann  <mccann@jhu.edu>

	* nautilus-cd-burner.c (request_media): 
	* nautilus-burn-recorder.c (nautilus_burn_recorder_wait_for_insertion): Clean
	up and use new drive APIs.

	* nautilus-burn-drive.c (hal_drive_get_first_child_udi):
	Comment out warning about udi not found.
	(nautilus_burn_drive_hal_get_media_type_full): Don't
	do non-HAL fallback since it will interfere with HAL
	reading the device.
	(nautilus_burn_drive_get_media_size): Ditto.
	(nautilus_burn_drive_hal_is_mounted) 
	(nautilus_burn_drive_nohal_is_mounted) 
	(nautilus_burn_drive_is_mounted): New public API.
	(nautilus_burn_drive_media_type_is_writable): New public API.

	* list_cddrives.c (list_drive_info): Show if mounted.
	(list_media_info): Show if writable.

	More fixes for #328494.

2006-02-09  William Jon McCann  <mccann@jhu.edu>

	* nautilus-cd-burner.c (request_media): Check
	media size for drive busy too.

	* nautilus-burn-drive.c (create_command): NULL
	terminate array.

	Based on patch from Martin Pitt <martin.pitt@canonical.com>
	Fixes #328494.

2006-01-30  William Jon McCann  <mccann@jhu.edu>

	* configure.in: Post release version bump.

=== 2.13.90 ===

2006-01-30  William Jon McCann  <mccann@jhu.edu>

	* NEWS: Update for 2.13.90 release.

2006-01-24  William Jon McCann  <mccann@jhu.edu>

	* nautilus-cd-burner.c (select_iso_filename, get_output_filename) 
	(burn_cd): Try to use disc label for the default iso filename.

	Patch from Fabio Bonelli <fabiobonelli@libero.it>
	Fixes #328446.

2006-01-24  William Jon McCann  <mccann@jhu.edu>

	* nautilus-burn-drive.c (nautilus_burn_drive_get_media_label):
	Fix typo in warning.

2006-01-23  William Jon McCann  <mccann@jhu.edu>

	* nautilus-cd-burner.c (eject_disc_cb, setup_close_button) 
	(selection_dialog_response): Add an eject button
	when writing to a disc is finished.  Don't
	always eject media.

	* cdburn.glade: Add eject button.

	Fixes #321931

2006-01-23  William Jon McCann  <mccann@jhu.edu>

	* nautilus-cd-burner.c (ask_for_media):
	Just redisplay dialog when eject is used.

2006-01-23  William Jon McCann  <mccann@jhu.edu>

	* nautilus-cd-burner.c (ask_for_media):
	Show an Eject button when asking for a reload.

	* nautilus-burn-drive.c (create_command) 
	(nautilus_burn_drive_eject): Pass --no-ui
	to gnome-mount.

2006-01-23  William Jon McCann  <mccann@jhu.edu>

	* nautilus-cd-burner.c (fill_selection_dialog): Use
	nautilus_burn_get_media_label for copied label.
	(main): Fix source-device arg.

2006-01-23  William Jon McCann  <mccann@jhu.edu>

	* nautilus-burn-drive.[ch] (nautilus_burn_drive_hal_get_media_label) 
	(nautilus_burn_drive_get_media_label): New public function.
	HAL implementation only.

	* list_cddrives.c (list_media_info, list_drive_info, list_drives):
	Break into functions and display media label.

2006-01-23  William Jon McCann  <mccann@jhu.edu>

	* nautilus-burn-drive.c: Fix typos and logic error
	from last commits.

2006-01-23  William Jon McCann  <mccann@jhu.edu>

	* list_cddrives.c (list_drives): Few more tweaks.

	* nautilus-burn-drive.c (nautilus_burn_drive_hal_get_media_type_full):
	Get media type information even if the volume is mounted.

2006-01-23  William Jon McCann  <mccann@jhu.edu>

	* nautilus-burn-drive.c (hal_drive_get_first_child_uid):
	Pull this into a function since its used a few times.
	(nautilus_burn_drive_hal_get_media_type_full) 
	(nautilus_burn_drive_hal_get_media_size): Use new function.

	* list_cddrives.c (list_drives): Reformat output to be simpler.

2006-01-21  William Jon McCann  <mccann@jhu.edu>

	* nautilus-burn-drive.c (nautilus_burn_drive_hal_get_media_size) 
	(nautilus_burn_drive_get_media_size):
	Use HAL disc.capacity property if it exists.
	Fixes #327461.

2006-01-18  William Jon McCann  <mccann@jhu.edu>

	* nautilus-cd-burner.c (main, expand_path_input): Use gnome-vfs to
	glob and tilde expand the source iso and cue files.
	Fixes #327574.

2006-01-18  William Jon McCann  <mccann@jhu.edu>

	* nautilus-burn-bar.c: Include glib/gi18n-lib.h instead
	of glib/gi18n.h.  May fix #327207.

2006-01-18  William Jon McCann  <mccann@jhu.edu>

	* nautilus-cd-burner.c (update_progress_dialog_disc_type):
	Actually translate the messages with _() after marking them
	statically with N_().

2006-01-18  William Jon McCann  <mccann@jhu.edu>

	* nautilus-cd-burner.c: Include config.h.

2006-01-17  William Jon McCann  <mccann@jhu.edu>

	* nautilus-burn-drive.c (nautilus_burn_drive_hal_get_media_size) 
	(nautilus_burn_drive_get_media_size): Use HAL disc capacity.

	Fixes #327461.

2006-01-16  William Jon McCann  <mccann@jhu.edu>

	* nautilus-cd-burner.c (refresh_dialog): Off by one error
	in default speed index.

2006-01-16  William Jon McCann  <mccann@jhu.edu>

	* nautilus-cd-burner.c (refresh_dialog): Use the speed
	in the model instead of the index.

	* nautilus-burn-drive.c (hal_parse_write_speeds): Fix braces.

2006-01-16  William Jon McCann  <mccann@jhu.edu>

	* configure.in: Bump HAL requirement.

	* list_cddrives.c (list_drives): List write speeds.

	* nautilus-burn-drive.c (fill_write_speeds)
	(nautilus_burn_drive_get_max_write_speeds, hal_parse_write_speeds)
	(hal_drive_from_udi, add_linux_cd_recorder, add_linux_cd_drive)
	(freebsd_scan, cdrecord_scan, nautilus_burn_drive_get_file_image)
	(nautilus_burn_drive_finalize, nautilus_burn_drive_init):
	3 new functions to deal with having a list of possible write
	speeds.  Added support for reading support drive speed from HAL.
	Added call to fill_write_speeds to other functions to fill in default
	write speeds (maxspeed to 1) and also in the case where HAL
	does not have the write_speeds property.  Added initialisation and
	memory free code to init/finalize functions respectively.

	* nautilus-burn-drive.h: Added write_speeds member.  Added
	nautilus_burn_drive_get_write_speeds() prototype.

	* nautilus-cd-burner.c (refresh_dialog): Replace old code which
	obtained maximum drive speed and listed all speeds up to it with
	code that lists the supported drive speeds as reported by
	nautilus_burn_drive_get_write_speeds().

	patch from: Ryan Lortie  <desrt@desrt.ca>
	Fixes #157899.
	
2006-01-16  William Jon McCann  <mccann@jhu.edu>

	* configure.in: Post release version bump.

=== 2.13.5 ===

2006-01-16  William Jon McCann  <mccann@jhu.edu>

	* NEWS: Update for 2.13.5 release.
	* Makefile.am: Fix typo.

2006-01-16  William Jon McCann  <mccann@jhu.edu>

	* nautilus-burn-bar.c (nautilus_burn_bar_init):
	Ref and sink the tooltips.
	Fixes #327204

2006-01-14  William Jon McCann  <mccann@jhu.edu>

	* nautilus-burn-drive.[ch]: 
	* configure.in: 
	* Makefile.am: 
	* .cvsignore: Rename new header to -features.h

2006-01-14  William Jon McCann  <mccann@jhu.edu>

	* Makefile.am: Install the new header.

2006-01-14  William Jon McCann  <mccann@jhu.edu>

	* nautilus-burn-drive.c: 
	* configure.in: 
	* Makefile.am: 
	* nautilus-burn-version.h.in:
	Add library version checking capability.

2006-01-14  William Jon McCann  <mccann@jhu.edu>

	* burn-extension.c (launch_process): Check the version
	of libeel.  Allow me to build using multiple versions.

2006-01-13  William Jon McCann  <mccann@jhu.edu>

	* nautilus-burn-drive.c (use_gnome_mount):
	(free_unmount_data, create_command, unmount_thread_start)
	(nautilus_burn_drive_unmount, nautilus_burn_drive_eject):
	Use gnome-mount for unmount and eject if it is found
	in the path.

	* Makefile.am: Link list_cddrives with gthreads.
	* list_cddrives.c: Init threads and try to
	unmount volume before querying.

2006-01-12  Ryan Lortie  <desrt@desrt.ca>

	* list_cddrives.c (list_drives): Fixed a typo.  Call
	nautilus_burn_drive_get_max_speed_write (not _read) to get the max
	write speed.  Fixes #326779.

2006-01-10  William Jon McCann  <mccann@jhu.edu>

	* nautilus-cd-burner.desktop.in:
	Tweak tooltip.

2006-01-10  William Jon McCann  <mccann@jhu.edu>

	* .cvsignore: 
	* po/.cvsignore: 
	* Makefile.am: 
	* nautilus-cd-burner.desktop.in: Add .desktop file

	Patch from Sebastien Bacher <seb128@debian.org>
	Fixes #326455

2006-01-07  Chao-Hsiung Liao  <j_h_liau@yahoo.com.tw>

	* configure.in: Added "zh_HK" to ALL_LINGUAS.

2006-01-03  Sunil Mohan Adapa  <sunil@atc.tcs.co.in>

	* configure.in: Added "te" to ALL_LINGUAS.

2006-01-02  William Jon McCann  <mccann@jhu.edu>

	* configure.in: Post release version bump.

=== 2.13.4 ===

2006-01-02  William Jon McCann  <mccann@jhu.edu>

	* NEWS: Update for 2.13.4 release.

2006-01-01  William Jon McCann  <mccann@jhu.edu>

	* mapping-daemon.c (remove_subscription, connection_free) 
	(monitor_cancel): Remove subscription directly when
	a connection drops instead of trying to look it up.

2005-12-21  William Jon McCann  <mccann@jhu.edu>

	* burn-extension.c (nautilus_burn_get_toolbar_items):
	Remove toolbar item now that we have burn bar.  One
	of the problems with the toolbar item is we don't
	have a way of desensitizing it.

2005-12-21  William Jon McCann  <mccann@jhu.edu>

	* burn-extension.c (nautilus_burn_get_location_widget):
	Only change sensitivity of button.

	* nautilus-burn-bar.[ch] (nautilus_burn_bar_get_button) 
	(nautilus_burn_bar_init): Add getter for button widget.

2005-12-20  William Jon McCann  <mccann@jhu.edu>

	* mapping-method.c (monitor_do_iter_unlocked):
	Print handle value in debug message.

	* mapping-daemon.c (subscription_get_userdata) 
	(connection_get_subscription): We were looking
	up the subscription by the path only.  If there
	is more than one monitor per connection of the
	same path then the wrong subscription may be
	removed.  Change to also compare the userdata.

2005-12-20  William Jon McCann  <mccann@jhu.edu>

	* burn-extension.c (dir_is_empty, destroyed_callback) 
	(sense_widget, nautilus_burn_get_location_widget) 
	(update_widget_sensitivity, burn_monitor_cb, start_monitor) 
	(nautilus_burn_instance_init, nautilus_burn_finalize) 
	(nautilus_burn_class_init):
	First try at setting correct sensitivity of burn bar.

2005-12-20  William Jon McCann  <mccann@jhu.edu>

	* mapping-daemon.c (connection_free, handle_request) 
	(handle_new_client):
	Replace use of GIOChannel with MappingProtocolChannel.

	* mapping-method.c (monitor_do_iter_unlocked): Add debugging.
	(monitor_setup, vfs_module_init, vfs_module_shutdown): 
	Replace use of GIOChannel with MappingProtocolChannel.

	* mapping-protocol.[ch] (mapping_protocol_data_available) 
	(mapping_protocol_channel_new, mapping_protocol_channel_free) 
	(mapping_protocol_channel_ref, mapping_protocol_channel_unref) 
	(write_all, read_all, decode_int, decode_string, decode_pointer) 
	(mapping_protocol_request_encode) 
	(mapping_protocol_request_decode, decode_handshake) 
	(mapping_protocol_reply_encode, mapping_protocol_reply_decode) 
	(mapping_protocol_monitor_event_encode) 
	(mapping_protocol_monitor_event_decode):
	The patch to add buffering caused any data in the buffer
	after decoding a single reply or event to be lost.  This
	was because the buffer only existed in the scope of a
	single decode function.  I've created a new ref counted
	structure to wrap GIOChannel and the buffer.  Now the
	mapping_protocol_data_available() function checks this
	buffer in addition to the socket.

2005-12-20  William Jon McCann  <mccann@jhu.edu>

	* burn-extension.c (nautilus_burn_get_location_widget) 
	(nautilus_burn_location_widget_provider_iface_init) 
	(nautilus_burn_class_init, nautilus_burn_register_type):
	Add location specific extra widgets to nautilus.

	Patch from Alexander Larsson <alexl@redhat.com>

	* configure.in: Require nautilus 2.13.4.

	* nautilus-burn-bar.[ch]: 
	* Makefile.am: New widget for burn bar.

2005-12-16  William Jon McCann  <mccann@jhu.edu>

	* dvd_plus_rw_utils.cpp (get_mmc_profile):
	Try to sniff the disc type from the capabilities.

	Patch from Jason D. Hildebrand <jason@peaceworks.ca>
	Fixes part of #317529

2005-12-16  William Jon McCann  <mccann@jhu.edu>

	* nautilus-burn-drive.c (nautilus_burn_drive_hal_get_media_type_full):
	Always fallback to low level method of determining media type
	when HAL is unable to.

	Patch from Jason D. Hildebrand <jason@peaceworks.ca>
	Fixes part of #317529

2005-12-12  William Jon McCann  <mccann@jhu.edu>

	* configure.in: Require EEL 2.13.3.

	Patch from Sebastien Bacher <seb128@debian.org>
	Fixes #323912.

2005-12-12  William Jon McCann  <mccann@jhu.edu>

	* configure.in: Post release version bump.

=== 2.13.3 ===

2005-12-12  William Jon McCann  <mccann@jhu.edu>

	* NEWS: Update for 2.13.3 release

2005-12-09  William Jon McCann  <mccann@jhu.edu>

	* burn-extension.c (launch_process): Update for
	eel API.

	Patch from Christopher Taylor <christophth@tiscali.it>
	Fixes #323653.

2005-12-06  William Jon McCann  <mccann@jhu.edu>

	* nautilus-burn-drive.c (nautilus_burn_drive_get_media_type_from_path_full):
	Perform disc type check even when can't get disc status.

	Patch from Frederic Crozat <fcrozat@mandriva.com>
	Fixes #323377

2005-12-02  William Jon McCann  <mccann@jhu.edu>

	* nautilus-cd-burner.c (refresh_dialog) 
	(selection_dialog_response): 
	* cdburn.glade: Remove the After Writing options
	from the interface.

2005-12-02  William Jon McCann  <mccann@jhu.edu>

	* nautilus-cd-burner.c (get_input_type_from_source_data) 
	(update_progress_dialog_disc_type) 
	(update_selection_dialog_source_type, create_selection_dialog): 
	* cdburn.glade: Use more appropriate text when copying a disc.
	Fixes #323061.

2005-11-30  William Jon McCann  <mccann@jhu.edu>

	* nautilus-burn-drive.c (nautilus_burn_drive_get_media_size_from_path): 

	* dvd_plus_rw_utils.cpp (get_read_capacity, get_disc_size_cd) 
	(get_disc_size_dvd, get_disc_size_dvdr):
	Correctly report the size of commercial DVDs.

2005-11-30  William Jon McCann  <mccann@jhu.edu>

	* dvd_plus_rw_utils.cpp (get_2k_capacity):
	Get the correct size for DVD-R media.

	Patch from Fabio Bonelli <fabiobonelli@libero.it>
	Fixes #322782.

2005-11-30  William Jon McCann  <mccann@jhu.edu>

	* make-iso.c (get_image_space_error_message): 
	(nautilus_burn_make_iso, nautilus_burn_make_iso_from_drive):
	Report space needed instead of image size.

2005-11-30  William Jon McCann  <mccann@jhu.edu>

	* make-iso.c (get_image_space_error_message) 
	(nautilus_burn_make_iso, nautilus_burn_make_iso_from_drive):
	Use proper format for number in message.

	Based on patch from Fabio Bonelli <fabiobonelli@libero.it>
	Fixes #322834.

2005-11-30  William Jon McCann  <mccann@jhu.edu>

	* make-iso.c (nautilus_burn_make_iso_from_drive):
	Fix double free.  Fixes #322826.

2005-11-28  William Jon McCann  <mccann@jhu.edu>

	* nautilus-burn-drive.c: Remove whitelist
	entries.
	https://bugs.freedesktop.org/show_bug.cgi?id=3036

2005-11-28  William Jon McCann  <mccann@jhu.edu>

	* configure.in: Fix enable_hal flag when
	hal isn't found.

	Patch from Sebastien Bacher <seb128@debian.org>
	Fixes #322236

2005-11-28  William Jon McCann  <mccann@jhu.edu>

	* configure.in: Bump libhal requirement.

2005-11-14  William Jon McCann  <mccann@jhu.edu>

	* configure.in: Post release version bump.

=== 2.13.2 ===

2005-11-14  William Jon McCann  <mccann@jhu.edu>

	* NEWS: Update for 2.13.2 release

2005-11-14  William Jon McCann  <mccann@jhu.edu>

	* mapping-method.c (do_tell): Correct the argument
	type.

2005-11-07  William Jon McCann  <mccann@jhu.edu>

	* Makefile.am: Formatting.

2005-11-07  William Jon McCann  <mccann@jhu.edu>

	* nautilus-cd-burner.c (burn_cd): Use drive_equal.
	(refresh_dialog): Use drive getters.

	* nautilus-burn-recorder.c (nautilus_burn_recorder_write_tracks): Use
	drive_can_rewrite method.

	* nautilus-burn-drive.c (nautilus_burn_drive_get_max_speed_write) 
	(nautilus_burn_drive_get_max_speed_read) 
	(nautilus_burn_drive_get_name_for_display):
	Add get methods for drive.  We shouldn't access object data
	directly.  The only object data that may be accessed directly
	are the type and device fields.  Mostly since they are so
	widely used already.

	* list_cddrives.c (list_drives): Use new getters for Drive.

2005-11-07  William Jon McCann  <mccann@jhu.edu>

	* nautilus-burn-drive.c (nautilus_burn_drive_can_write):
	Add file type to writers.

2005-11-07  William Jon McCann  <mccann@jhu.edu>

	* nautilus-cd-burner.c (ask_for_media, burn_cd) 
	(lookup_current_recorder, refresh_dialog) 
	(selection_dialog_response): Don't use a const Drive.
	Use new selection_get_active API.  Unref the drive
	returned from the lookup.

	* nautilus-burn-drive-selection.c (nautilus_burn_drive_selection_set_active) 
	(nautilus_burn_drive_selection_get_active): New methods that
	are now the preferred interface to the list.  get_active is
	basically the same as get_drive except that it refs the drive
	that it returns.
	(nautilus_burn_drive_selection_get_default_device) 
	(nautilus_burn_drive_selection_set_device) 
	(nautilus_burn_drive_selection_get_device) 
	(nautilus_burn_drive_selection_get_drive): Deprecated.

	* make-iso.c (nautilus_burn_make_iso_from_drive):
	Don't use a const Drive.

2005-11-07  William Jon McCann  <mccann@jhu.edu>

	* nautilus-cd-burner.c (ask_for_media):
	Use nautilus_burn_drive_can_rewrite.

	* nautilus-burn-drive.[ch] (nautilus_burn_drive_can_rewrite) 
	(nautilus_burn_drive_can_write): Add to public API.

2005-10-31  William Jon McCann  <mccann@jhu.edu>

	* TODO: Remove buffer protocol item.

	* mapping-protocol.c (buffered_read_channel_init, read_all) 
	(encode_int, decode_int, encode_string, decode_string) 
	(encode_pointer, decode_pointer, mapping_protocol_request_encode) 
	(mapping_protocol_request_decode, encode_handshake) 
	(decode_handshake, mapping_protocol_reply_encode) 
	(mapping_protocol_reply_decode) 
	(mapping_protocol_monitor_event_encode) 
	(mapping_protocol_monitor_event_decode): Buffer IO over
	the mapping protocol.

	Patch from Crispin Flowerday <crispin@gnome.org> Fixes #320201

2005-10-31  William Jon McCann  <mccann@jhu.edu>

	* nautilus-cd-burner.c (profile_add_indent, _ncb_profile_log) 
	(estimate_size): 
	* make-iso.c (profile_add_indent, _ncb_make_iso_profile_log) 
	(create_graft_file, nautilus_burn_make_iso):
	Added profiling code.  Added profiling points for testing
	the speed of reading over the mapping protocol.

2005-10-31  William Jon McCann  <mccann@jhu.edu>

	* mapping-daemon.c (main): Close sockets before exit to
	avoid compiler warnings.

	* burn-extension.c (write_iso_activate_cb, write_cue_activate_cb) 
	(copy_disc_activate_cb): Remove unused code.

	Patch from Kjartan Maraas <kmaraas@gnome.org> Fixes #320159

2005-10-24  William Jon McCann  <mccann@jhu.edu>

	* configure.in: Post release version bump.

=== 2.13.1 ===

2005-10-24  William Jon McCann  <mccann@jhu.edu>

	* NEWS: Update for 2.13.1 release

2005-10-24  William Jon McCann  <mccann@jhu.edu>

	* nautilus-cd-burner.c (nautilus_burn_progress_get_write_data) 
	(nautilus_burn_progress_set_write_data) 
	(nautilus_burn_progress_cleanup) 
	(nautilus_burn_progress_write_disc, write_another_disc_cb) 
	(setup_close_button, write_disc, burn_cd) 
	(selection_dialog_response, main):
	Don't store write data as callback data.  We really need to
	make a progress-dialog class.  Only free data at the end
	and not after two writes.  Also don't free the spinning
	images after one write.  Fixes #319495.

2005-10-21  William Jon McCann  <mccann@jhu.edu>

	* list_cddrives.c: Remove unused functions.
	
2005-10-21  William Jon McCann  <mccann@jhu.edu>

	* nautilus-cd-burner.c (ask_for_media): 
	* nautilus-burn-drive.[ch] (add_desc) 
	(nautilus_burn_drive_get_supported_media_string): 
	* list_cddrives.c (list_drives):
	Add public API nautilus_burn_drive_get_supported_media_string.

2005-10-21  William Jon McCann  <mccann@jhu.edu>

	* nautilus-cd-burner.c (drive_type_get_supported_media): 
	* nautilus-burn-recorder.c (can_burn_dvds): 
	* list_cddrives.c (drive_type): Add missing DVD+R DL stuff.

2005-10-21  William Jon McCann  <mccann@jhu.edu>

	* nautilus-burn-recorder.c:
	* nautilus-burn-drive.c:
	* nautilus-burn-drive-selection.c: Fix typo.

2005-10-21  William Jon McCann  <mccann@jhu.edu>

	* nautilus-burn-recorder.c (nautilus_burn_recorder_class_init) 
	(nautilus_burn_recorder_init, nautilus_burn_recorder_finalize): 
	* nautilus-burn-drive.c (nautilus_burn_drive_class_init) 
	(nautilus_burn_drive_init, nautilus_burn_drive_finalize): 
	* nautilus-burn-drive-selection.c (nautilus_burn_drive_selection_class_init) 
	(nautilus_burn_drive_selection_init) 
	(nautilus_burn_drive_selection_finalize):
	Use g_type_class_add_private.

2005-10-21  William Jon McCann  <mccann@jhu.edu>

	* nautilus-burn-drive.h: Add DVD_PLUS_R_DL_RECORDER type.

	* nautilus-burn-drive.c (hal_drive_from_udi, hal_scan):
	Break out getting drive from UDI into a separate routine.
	Get all UDI properties at once instead of doing separate
	dbus IPC calls for each one.  This should be more efficient
	and seems to solve a problem seen only in rhythmbox where
	we don't get the proper device type.

2005-10-20  William Jon McCann  <mccann@jhu.edu>

	* nautilus-burn-drive.c (set_monitor_enabled_hal) 
	(nautilus_burn_drive_finalize): Check for media when
	monitor is enabled.

	* .cvsignore: Add test_monitor.

2005-10-19  William Jon McCann  <mccann@jhu.edu>

	* nautilus-burn-drive.[ch] (get_hal_context) 
	(nautilus_burn_drive_hal_get_media_type_full) 
	(hal_udi_is_our_drive, hal_device_added, hal_device_removed) 
	(hal_mainloop_integration, drive_hal_shutdown, drive_hal_init) 
	(hal_scan, cdrecord_scan, freebsd_scan, nautilus_burn_drive_ref) 
	(nautilus_burn_drive_free, nautilus_burn_drive_unref) 
	(nautilus_burn_drive_lock, nautilus_burn_drive_unlock) 
	(nautilus_burn_drive_finalize, nautilus_burn_drive_init) 
	(nautilus_burn_drive_new, nautilus_burn_drive_copy) 
	(set_monitor_enabled_hal, poll_tray_opened) 
	(set_monitor_enabled_poll) 
	(nautilus_burn_drive_set_monitor_enabled) 
	(nautilus_burn_drive_set_property) 
	(nautilus_burn_drive_get_property) 
	(nautilus_burn_drive_class_init): Make NautilusBurnDrive into an
	object.  Add "enable-monitor" property.  Add device monitoring
	via HAL or polling.  Will emit "media-added" or "media-removed".

	* nautilus-burn-drive-selection.c (nautilus_burn_drive_selection_finalize) 
	(nautilus_burn_drive_selection_set_have_file_image) 
	(nautilus_burn_drive_selection_set_recorders_only): 
	* list_cddrives.c (list_drives, main): Use unref
	instead of free.

	* configure.in: Depend on dbus-glib.  Bump LT_VERSION.
	* test-monitor.c: 
	* Makefile.am: Add new test prog.

2005-10-18  William Jon McCann  <mccann@jhu.edu>

	* nautilus-cd-burner.c (select_iso_filename):
	Use "disc image" for window title.

2005-10-18  William Jon McCann  <mccann@jhu.edu>

	* nautilus-cd-burner.c (add_desc, ask_for_media):
	Don't put the list of supported types in the body
	of the message since this messes up translation.
	Fixes rest of #318719.

2005-10-18  William Jon McCann  <mccann@jhu.edu>

	* nautilus-cd-burner.c (update_progress_dialog_disc_type):
	New function to update the dialog text to match the input
	and output types.
	(burn_cd, selection_dialog_response): Use burn_data directly
	and call update_progress_dialog_disc_type.
	* cdburn.glade: Don't translate description text.

	Should fix part of #318719.

2005-10-11  William Jon McCann  <mccann@jhu.edu>

	* nautilus-burn-recorder.c (compute_time_remaining):
	Don't use bps less than or equal to one.

2005-10-07  William Jon McCann  <mccann@jhu.edu>

	* nautilus-cd-burner.c (burn_cd): Always use
	NAUTILUS_BURN_RECORDER_WRITE_DISC_AT_ONCE for data
	written from burn:// the frontend since that
	can only be ISO and CUE files.  Fixes #315068.

2005-10-07  William Jon McCann  <mccann@jhu.edu>

	* burn-extension.c (nautilus_burn_get_file_items):
	Use new nautilus info API to get drive.

	Patch from Christian Neumair <chris@gnome-de.org>
	Fixes #317068

2005-10-06  William Jon McCann  <mccann@jhu.edu>

	* configure.in: Bump version to 2.13.1 after branching.

2005-10-03  William Jon McCann  <mccann@jhu.edu>

	* configure.in: Post release version bump.

=== 2.12.1 ===

2005-10-03  William Jon McCann  <mccann@jhu.edu>

	* NEWS: 
	* configure.in: Update for 2.12.1 release

2005-10-03  William Jon McCann  <mccann@jhu.edu>

	* mapping-protocol.c (mapping_protocol_reply_destroy):
	Fix compiler warning.

2005-10-03  William Jon McCann  <mccann@jhu.edu>

	* nautilus-burn-drive.c (nautilus_burn_drive_door_is_open):
	Add missing docs.

2005-09-30  Brian Cameron  <brian.cameron@sun.com>

	* nautilus-burn-recorder.c: Rename "stdin" in
	  _Nautilus-BurnProcess data structure to
	  "pipe_stdin" since "stdin" is a reserved word
	  and causes the Forte compiler to fail.
	
2005-09-29  William Jon McCann  <mccann@jhu.edu>

	* nautilus-cd-burner.c (burn_cd): Check
	return values of g_mkstemp.  Fixes #314456.

2005-09-29  William Jon McCann  <mccann@jhu.edu>

	* nautilus-cd-burner.c (setup_close_button): 
	* cdburn.glade: Give the close button the focus
	Fixes #312700.

2005-09-26  William Jon McCann  <mccann@jhu.edu>

	* cdburn.glade: Mark string as translatable
	Fixes #317241.

2005-09-20  William Jon McCann  <mccann@jhu.edu>

	* make-iso.c (get_average_rate): Use ceil
	instead of round.  Fixes #316658.

2005-09-14  William Jon McCann  <mccann@jhu.edu>

	* nautilus-burn-recorder.h: Fix function pointers
	for signals in class structure.

2005-09-05  William Jon McCann  <mccann@jhu.edu>

	* configure.in: Post release version bump.

=== 2.12.0 ===

2005-09-05  William Jon McCann  <mccann@jhu.edu>

	* configure.in: 
	* NEWS: Update for 2.12.0 release

2005-08-23  William Jon McCann  <mccann@jhu.edu>

	* nautilus-burn-drive.c (get_disc_type): Fix ioctl return
	checking on Solaris.  Fix audio disc detection on
	BSD and Solaris.  Fixes #313053.

=== 2.11.7 ===
	
2005-08-22  William Jon McCann  <mccann@jhu.edu>

	* NEWS: Update for 2.11.7 release

2005-08-22  William Jon McCann  <mccann@jhu.edu>

	* nautilus-burn-drive.c: Explicitly set the CDS macros as
	done in gnome-vfs-cdrom.h.

2005-08-18  Ross Burton  <ross@burtonini.com>

	* nautilus-burn-drive.c:
	Fix a number of file descriptor leaks.

2005-08-15  Elijah Newren  <newren@gmail.com>

	* configure.in: Patch from Brent Smith to replace
	PKG_PROG_PKG_CONFIG() with PKG_PROG_PKG_CONFIG.  Fixes #313039.

2005-08-05  William Jon McCann  <mccann@jhu.edu>

	* configure.in: Post release version bump.

=== 2.11.6 ===

2005-08-05  William Jon McCann  <mccann@jhu.edu>

	* NEWS: Update for 2.11.6 release

2005-08-04  William Jon McCann  <mccann@jhu.edu>

	* nautilus-burn-drive.c (nautilus_burn_drive_get_media_size) 
	(nautilus_burn_drive_get_media_size_from_path):
	Fix documentation for return values.

2005-08-01  William Jon McCann  <mccann@jhu.edu>

	* dvd_plus_rw_utils.cpp (get_mmc_profile):
	Print out the partially determined profile on error.

2005-08-01  William Jon McCann  <mccann@jhu.edu>

	* configure.in: Add PKG_PROG_PKG_CONFIG to fix
	configure with --disable-hal.
	Patch from foser@gentoo.org.  (Closes #312168)

2005-07-28  William Jon McCann  <mccann@jhu.edu>

	* list_cddrives.c (list_drives): Don't try to use
	media size when it can't be determined.

	* nautilus-burn-drive.c (try_media_size_from_type) 
	(nautilus_burn_drive_get_media_size):
	When HAL is available try to get the media size based
	on the media type.

2005-07-28  William Jon McCann  <mccann@jhu.edu>

	* nautilus-burn-drive.h: Add deprecation comment for functions that
	operate on a device path.

	* nautilus-burn-drive.c (nautilus_burn_drive_get_media_type_from_path):
	Fix documentation.

	* dvd_plus_rw_utils.cpp (get_mmc_profile): Print error messages
	on failure.

2005-07-28  Abduxukur Abdurixit <abdurixit@gmail.com>

	*configure.in: added 'ug' to ALL_LINGUAS

2005-07-26  William Jon McCann  <mccann@jhu.edu>

	* nautilus-cd-burner.c (do_cancel): Fix the inverted logic
	for when the ask_cancel dialog should be shown.

2005-07-26  William Jon McCann  <mccann@jhu.edu>

	* nautilus-burn-recorder.c (nautilus_burn_recorder_write_cdrecord):
	Explicitly blank disc when using cdrecord because in some cases
	it incorrectly calculates the size of the resulting disc when
	blanking on the fly. (Closes #311631)

2005-07-25  William Jon McCann  <mccann@jhu.edu>

	* configure.in: Post release version bump.

=== 2.11.5 ===

2005-07-25  William Jon McCann  <mccann@jhu.edu>

	* NEWS: Update for 2.11.5 release

2005-07-12  William Jon McCann  <mccann@jhu.edu>

	* make-iso.c (dir_is_empty, nautilus_burn_make_iso): 
	* nautilus-burn-recorder.c (nautilus_burn_recorder_finalize): 
	* nautilus-burn-drive.c (nautilus_burn_drive_hal_get_media_type_full): 
	* nautilus-cd-burner.c (burn_cd):
	(nautilus_burn_progress_temp_files_cleanup):  La la la fixing leaks.

	* mapping-method.c (do_close): Free VirtualFileHandle data.

	* mapping-protocol.c (decode_int, decode_string): Use correct
	types.
	(mapping_protocol_reply_destroy): Free data.
	
	* nautilus-burn-recorder.c (nautilus_burn_recorder_run_process):
	Initialize variables.

	* nautilus-cd-burner.c (create_selection_dialog): Don't
	use deprecated gdk_cursor_destroy.

2005-07-11  William Jon McCann  <mccann@jhu.edu>

	* nautilus-burn-drive.c (nautilus_burn_drive_media_type_get_string):
	Fix ambiguous string.  (Closes #309872)

2005-07-01  William Jon McCann  <mccann@jhu.edu>

	* configure.in: Post release version bump.

=== 2.11.4 ===

2005-07-01  William Jon McCann  <mccann@jhu.edu>

	* NEWS: Update for 2.11.4 release

2005-07-01  William Jon McCann  <mccann@jhu.edu>

	* configure.in: Add configuration summary output.

	* nautilus-burn-drive.c (nautilus_burn_drive_get_media_type_from_path_full) 
	(nautilus_burn_drive_hal_get_media_type_full): Add warning messages.

2005-06-30  William Jon McCann  <mccann@jhu.edu>

	* nautilus-cd-burner.c (drive_can_rewrite, ask_for_media) 
	(insert_media_request_cb, request_media): Use drive information
	to determine whether to ask for blank or rewritable media instead
	of using media information.

2005-06-30  William Jon McCann  <mccann@jhu.edu>

	* nautilus-cd-burner.c (ask_for_media): Work around problem
	with translation of message.  (Closes #308339)

2005-06-30  William Jon McCann  <mccann@jhu.edu>

	* nautilus-burn-recorder.c (cd_write_needs_growisofs) 
	(media_type_matches): Add DVD+R DL support.

2005-06-22  William Jon McCann  <mccann@jhu.edu>

	* nautilus-cd-burner.c (burn_cd): Use burnproof by default
	for recording data.  See bug #137099.

2005-06-15  William Jon McCann  <mccann@jhu.edu>

	* nautilus-cd-burner.c (nautilus_burner_write_data_free): New
	function to free write data.
	(ask_for_media): Do conversion to MiB here.
	(setup_cancel_button): New function to reverse setup_close_button.
	(write_another_disc_cb): New function to handle "make another
	copy".
	(setup_close_button): Show "make another copy" button.
	(request_media): Don't convert to MiB here.
	(write_disc, burn_cd): Broke out track writing into new function.
	(init_dialog): Remove "another copy" checkbutton logic.
	(selection_dialog_response): Rename NautilusBurnerData
	NautilusBurnerSourceData.  Remove Remove "another copy"
	checkbutton logic.
	(create_selection_dialog, main): Rename NautilusBurnerData
	NautilusBurnerSourceData.

	* cdburn.glade: Remove "make another copy" checkbox.  Add "make
	another copy" button.

2005-06-14  William Jon McCann  <mccann@jhu.edu>

	* nautilus-burn-drive.c (get_hal_context) 
	(nautilus_burn_drive_hal_get_media_type_full, hal_scan) 
	(nautilus_burn_drive_lock, nautilus_burn_drive_unlock):
	Update to use HAL 0.5 API.

	Patch from David Zeuthen <david@fubar.dk> (Closes #172586)

2005-06-13  William Jon McCann  <mccann@jhu.edu>

	* burn-extension.c (nautilus_burn_get_file_items):
	Add check for NULL info.  Add check for NULL mime-type.
	(Closes #307438)

2005-06-10  William Jon McCann  <mccann@jhu.edu>

	* nautilus-cd-burner.c (ask_rewrite_disc): 
	* nautilus-burn-recorder.c (nautilus_burn_recorder_wait_for_insertion):
	Add enum for response warn-data-loss response codes.

2005-06-09  William Jon McCann  <mccann@jhu.edu>

	* make-iso.c (mkisofs_stderr_read): Use a more
	sane error message when some filenames don't use
	a valid character encoding.

2005-06-09  William Jon McCann  <mccann@jhu.edu>

	* make-iso.c (nautilus_burn_make_iso):
	Remove ISO on error.

	Patch from Bastien Nocera.  (Closes #307035)

2005-06-07  William Jon McCann  <mccann@jhu.edu>

	* configure.in: Post release version bump.

=== 2.11.3 ===

2005-06-07  William Jon McCann  <mccann@jhu.edu>

	* NEWS: Update for 2.11.3 release

2005-06-07  William Jon McCann  <mccann@jhu.edu>

	* configure.in: Bump version to 2.11.3.  Apparently
	2.11.2 wasn't announced.

2005-06-06  William Jon McCann  <mccann@jhu.edu>

	* nautilus-cd-burner.c (verify_source_location_contents):
	Make dialog more like a HIG alert dialog.

2005-06-06  William Jon McCann  <mccann@jhu.edu>

	* nautilus-cd-burner.c (dialog_set_size, dialog_set_disc_name) 
	(init_dialog, fill_selection_dialog, create_selection_dialog):
	Present the dialog before calculating data size.  (Closes #300023)

2005-06-05  Ignacio Casal Quinteiro <icq@cvs.gnome.org>

	*configure.in: added 'gl' to ALL_LINGUAS

2005-05-20  William Jon McCann  <mccann@jhu.edu>

	* list_cddrives.c (list_drives): 
	* nautilus-burn-drive.h:
	Add namespace prefix to SIZE_TO_TIME macro.

2005-05-20  William Jon McCann  <mccann@jhu.edu>

	* nautilus-burn-drive.[ch] (drive_door_is_open) 
	(nautilus_burn_drive_door_is_open) 
	(nautilus_burn_drive_get_media_type_from_path_full): 
	Add nautilus_burn_drive_door_is_open to public API.
	
	* list_cddrives.c (list_drives): Use nautilus_burn_drive_door_is_open.

2005-05-19  William Jon McCann  <mccann@jhu.edu>

	* configure.in: 
	* nautilus-burn-drive.c (get_disc_type, disc_type_get_info) 
	(nautilus_burn_drive_get_media_type_from_path_full):
	Correctly detect if a disc has audio/data in the no-HAL case.

2005-05-18  William Jon McCann  <mccann@jhu.edu>

	* configure.in: Post release version bump.

=== 2.11.1 ===

2005-05-17  William Jon McCann  <mccann@jhu.edu>

	* NEWS: Update for 2.11.1 release

2005-05-17  William Jon McCann  <mccann@jhu.edu>

	* nautilus-burn-recorder.c: Update documentation.

	* nautilus-burn-drive.[ch]: Update documentation and remove
	nautilus_burn_drive_get_media_type_and_rewritable from API.

	* make-iso.c: Update documentation.

2005-05-11  William Jon McCann  <mccann@jhu.edu>

	* nautilus-cd-burner.c (add_desc, drive_type_get_supported_media) 
	(ask_for_media, insert_media_request_cb, request_media, burn_cd): 
	Add media type hint to insert media dialog.
	(init_dialog): Init nautilus_burn_drive_selection here.

	* list_cddrives.c (drive_type): Add CD-RW type.

	* cdburn.glade: Use nautilus_burn_drive_selection_new directly.

2005-05-11  William Jon McCann  <mccann@jhu.edu>

	* burn-extension.c (nautilus_burn_get_file_items):
	Check if file has been deleted. (Closes #303489).

	Patch from Martin Wehner <martin.wehner@gmail.com>

2005-05-11  William Jon McCann  <mccann@jhu.edu>

	* nautilus-burn-recorder.c (media_type_matches): 
	* nautilus-cd-burner.c (media_type_matches): 
	* nautilus-burn-drive.c (nautilus_burn_drive_get_media_type_from_path_full) 
	(nautilus_burn_drive_hal_get_media_type_full) 
	(nautilus_burn_drive_get_media_size_from_path) 
	(nautilus_burn_drive_media_type_get_string):
	Add DVD+R DL support.  HAL support requires fixing:
	https://bugs.freedesktop.org/show_bug.cgi?id=3269

2005-05-10  William Jon McCann  <mccann@jhu.edu>

	* nautilus-cd-burner.c (burn_cd):
	Make sure we allow the dialog to close on error.

	* nautilus-burn-recorder.c (nautilus_burn_recorder_run_process) 
	(nautilus_burn_recorder_write_growisofs) 
	(nautilus_burn_recorder_write_cdrecord) 
	(nautilus_burn_recorder_blank_disc_cdrecord) 
	(nautilus_burn_recorder_blank_disc_dvdrw_format):
	Correctly fill in the GError.

2005-05-10  William Jon McCann  <mccann@jhu.edu>

	* nautilus-burn-recorder.c (nautilus_burn_process_new) 
	(nautilus_burn_process_free, growisofs_stdout_line) 
	(growisofs_blank_stdout_line, cdrecord_stdout_line) 
	(cdrecord_blank_stdout_line, dvdrw_format_stderr_line) 
	(growisofs_stderr_line, cdrecord_stderr_line) 
	(nautilus_burn_process_stdout_read) 
	(nautilus_burn_process_stderr_read) 
	(nautilus_burn_recorder_run_process) 
	(nautilus_burn_recorder_write_growisofs, cdrdao_stderr_line) 
	(nautilus_burn_recorder_write_cdrecord) 
	(nautilus_burn_recorder_blank_disc_cdrecord) 
	(nautilus_burn_recorder_blank_disc_dvdrw_format):
	Remove lots of code duplication by using a common set of watch
	functions instead of maintaining a watch function for each type
	of command.

2005-05-10  William Jon McCann  <mccann@jhu.edu>

	* test_blank.c (blank_disc): Update for nautilus-burn-recorder API

	* nautilus-cd-burner.c (show_error_message): Remove details button
	from error dialog.  Update for nautilus-burn-recorder API.
	(burn_cd): Update for nautilus-burn-recorder API

	* nautilus-burn-recorder.[ch] (nautilus_burn_recorder_error_quark):
	Add GErrors.
	(nautilus_burn_process_new, nautilus_burn_process_free)
	(nautilus_burn_process_cancel, insert_cd_retry)
	(growisofs_stdout_read, growisofs_blank_stdout_read)
	(cdrecord_stdout_read, cdrecord_blank_stdout_read)
	(dvdrw_format_stderr_read, growisofs_stderr_read)
	(cdrecord_stderr_read): Decouple sub-process accounting from
	recorder object.
	(nautilus_burn_recorder_write_tracks)
	(nautilus_burn_recorder_run_process)
	(nautilus_burn_recorder_write_growisofs): Add GErrors.
	(cdrdao_stderr_line, cdrdao_stderr_read): Decouple sub-process
	accounting from recorder object.
	(nautilus_burn_recorder_write_cdrecord) 
	(nautilus_burn_recorder_blank_disc_cdrecord) 
	(nautilus_burn_recorder_blank_disc_dvdrw_format) 
	(nautilus_burn_recorder_blank_disc): Add GErrors.
	(nautilus_burn_recorder_get_error_message_details)
	(nautilus_burn_recorder_get_error_message): Removed from API.
	(nautilus_burn_recorder_finalize): Decouple sub-process
	accounting from recorder object.

2005-05-09  William Jon McCann  <mccann@jhu.edu>

	* nautilus-cd-burner.c (nautilus_burn_progress_temp_files_add) 
	(nautilus_burn_progress_temp_files_cleanup, burn_cd, main):
	Cleanup temporary files only after we destroy the dialog.
	(Closes #172558).

2005-05-02  William Jon McCann  <mccann@jhu.edu>

	* nautilus-cd-burner.c (get_speed_selection, refresh_dialog) 
	(setup_speed_combobox, init_dialog, selection_dialog_response): 
	* cdburn.glade:
	Change write speed menu to use GtkComboBox.

2005-05-01  William Jon McCann  <mccann@jhu.edu>

	* nautilus-burn-recorder.c (nautilus_burn_recorder_write_cdrecord):
	Increase the cdrecord buffer size.

2005-05-01  William Jon McCann  <mccann@jhu.edu>

	* nautilus-cd-burner.c (burn_cd): Fix burning ISOs to DVD.
	Patch from Bastien Nocera.  (Closes #302618)

2005-04-30  William Jon McCann  <mccann@jhu.edu>

	* nautilus-burn-recorder.c (cdrecord_stdout_read):
	Report the seconds remaining correctly when writing multiple tracks.

2005-04-29  William Jon McCann  <mccann@jhu.edu>

	* nautilus-burn-recorder.c (nautilus_burn_recorder_wait_for_insertion):
	Remove debug statement.

2005-04-29  William Jon McCann  <mccann@jhu.edu>

	* nautilus-cd-burner.c (ask_rewrite_disc): 
	* nautilus-burn-recorder.c (nautilus_burn_recorder_wait_for_insertion):
	Need to change definition of return value in warn-data-loss signal
	so that the default doesn't get us stuck in a loop if no handler
	is connected.

2005-04-26  William Jon McCann  <mccann@jhu.edu>

	* nautilus-cd-burner.c (burn_cd): Initialize flags.

2005-04-24  William Jon McCann  <mccann@jhu.edu>

	* nautilus-burn-drive.c (nautilus_burn_drive_get_media_type_from_path_full):
	Don't set is_rewritable flag if NULL.

2005-04-18  William Jon McCann  <mccann@jhu.edu>

	* test_blank.c (action_changed_cb): Don't make strings for
	translation.

2005-04-14  William Jon McCann  <mccann@jhu.edu>

	* burn-extension.c (write_cue_activate_cb) 
	(nautilus_burn_get_file_items):
	Add Write to Disc to contextual menu for .cue files. (Closes #172714)

2005-04-14  William Jon McCann  <mccann@jhu.edu>

	* configure.in: Up glib requirement to 2.6.0.

	* nautilus-burn-drive.c (open_ioctl_handle, get_cd_scsi_id) 
	(linux_scan): 
	* make-iso.c (copy_file):
	Always use three arguments to g_open.  (Closes #300588)

2005-04-12  William Jon McCann  <mccann@jhu.edu>

	* nautilus-cd-burner.c (main): Off by one error.

2005-04-12  William Jon McCann  <mccann@jhu.edu>

	* nautilus-cd-burner.c (burn_cd, selection_dialog_response):
	Make sure we exit the main loop.

2005-04-12  William Jon McCann  <mccann@jhu.edu>

	* nautilus-cd-burner.c (nautilus_burn_progress_set_time):
	Use HIG progress bar text.

2005-04-12  William Jon McCann  <mccann@jhu.edu>

	* nautilus-cd-burner.c (file_info_is_allowed) 
	(estimate_size_callback, estimate_size): 
	* make-iso.c (file_info_is_allowed, graft_file_visitor) 
	(create_graft_file):
	Only allow directories, regular files and symlinks in ISOs.
	(Closes #300026)

2005-04-12  William Jon McCann  <mccann@jhu.edu>

	* test_blank.c (blank_disc): Use drive_new_from_path API.

2005-04-12  William Jon McCann  <mccann@jhu.edu>

	* nautilus-cd-burner.c (burn_cd): Fix incorrect return value.

	* nautilus-cd-burner.c (ask_for_media, request_media): 
	* nautilus-burn-recorder.c (nautilus_burn_recorder_wait_for_insertion):
	Don't ask for "reload" when error reading media.  Use OK button.
	(Closes #172553)

	* nautilus-burn-drive.c (nautilus_burn_drive_eject):
	Add a delay to make sure command finishes.

2005-04-12  William Jon McCann  <mccann@jhu.edu>

	* nautilus-cd-burner.c (get_output_filename, burn_cd) 
	(selection_dialog_response, create_selection_dialog, main):
	Break up monolithic main and burn_cd functions so that my
	little mind can handle them.  Run all widgets on main loop.

2005-04-12  William Jon McCann  <mccann@jhu.edu>

	* nautilus-cd-burner.c (ask_for_media, ask_rewrite_disc):
	Add icons to alert buttons.  Tweak button text.

2005-04-12  William Jon McCann  <mccann@jhu.edu>

	* nautilus-cd-burner.c (action_changed_cb) 
	(insert_media_request_cb, show_error_message, burn_cd) 
	(lookup_current_recorder, refresh_dialog, do_cancel, main): 
	* nautilus-burn-drive.c (nautilus_burn_drive_media_type_get_string): 
	* list_cddrives.c (list_drives): 
	* cdburn.glade:
	Add API to get media type string.  Add ability to set
	media type specific messages in dialog.  Revise some
	text in the dialog.  (Partially closes #300307)

2005-04-12  William Jon McCann  <mccann@jhu.edu>

	* nautilus-cd-burner.c (verify_source_location_contents):
	Use header capitalization in buttons.

2005-04-04  William Jon McCann  <mccann@jhu.edu>

	* nautilus-cd-burner.c (file_info_is_image) 
	(estimate_size_callback, estimate_size) 
	(verify_source_location_contents, verify_source_image, main):
	Give the user the option of burning from single image in burn:///
	(Closes #149364)

2005-04-03  William Jon McCann  <mccann@jhu.edu>

	* nautilus-burn-recorder.c (nautilus_burn_recorder_run_process) 
	(cdrdao_stderr_line): Show time remaining for cdrdao write.
	(Closes #172557)

2005-04-03  William Jon McCann  <mccann@jhu.edu>

	* cdburn.glade: Fix duplicate mnemonic.

2005-04-03  William Jon McCann  <mccann@jhu.edu>

	* nautilus-cd-burner.c (ask_rewrite_disc, warn_data_loss_cb): 
	* nautilus-burn-recorder.c (nautilus_burn_recorder_wait_for_insertion) 
	(nautilus_burn_recorder_class_init): 
	* cdrecorder-marshal.list:
	Make warn-data-loss signal return int in order to support
	cancellation.

2005-04-03  William Jon McCann  <mccann@jhu.edu>

	* nautilus-cd-burner.c (ask_for_media, burn_cd, init_dialog) 
	(main): 
	* cdburn.glade:
	Change "reuse these files" option to an option to burn another
	copy.  Also, don't remove files from burn://.
	(Closes #150310).

2005-04-03  William Jon McCann  <mccann@jhu.edu>

	* nautilus-cd-burner.c (ncb_hig_dialog): Don't set response and
	modality here.
	(request_media): Use gint64 for size instead of GnomeVFSFileSize.
	(burn_cd): Add source drive and cue support.
	(get_size_of_burn): Pull out estimating size of burn:/// into new
	function.
	(main): Add popt options.  Add support for source drive and cue.

	* nautilus-burn-recorder.c (nautilus_burn_recorder_track_free):
	Add cue support.
	(nautilus_burn_recorder_cancel): Add assert.
	(cdrecord_stdout_read): Make end of blank a FINISHED state.
	(dvdrw_format_stderr_read, growisofs_stderr_read)
	(cdrecord_stderr_read): Use stderr GString.
	(start_async_with_watch): Make sure watch ids are not set if used.
	(nautilus_burn_recorder_run_process): Only remove watchid if set.
	(nautilus_burn_recorder_write_growisofs): Move eject to Drive.
	(cdrdao_stderr_line, cdrdao_stderr_read)
	(nautilus_burn_recorder_write_cdrecord): Add cue track support.
	(nautilus_burn_recorder_blank_disc_cdrecord)
	(nautilus_burn_recorder_blank_disc_dvdrw_format)
	(nautilus_burn_recorder_blank_disc): Use new flags argument.
	Don't prompt for insertion.

	* nautilus-burn-drive.c (nautilus_burn_drive_get_media_size_from_path):
	Get size for commercial CD.
	(nautilus_burn_drive_unmount): Add assert.
	(nautilus_burn_drive_eject): New function, moved from Recorder.
	(nautilus_burn_drive_new_from_path): New convenience function.

	* make-iso.c (nautilus_burn_make_iso_cancel): Use correct return
	value.
	(readcd_stderr_read, get_average_rate, cdrdao_stderr_line)
	(cdrdao_stderr_read, start_async_with_watch, run_process)
	(nautilus_burn_make_iso_from_drive): Add ability to create a disc
	image from a Drive.

	* list_cddrives.c (list_cdroms): Show time for CD type.

	* dvd_plus_rw_utils.cpp (get_disc_size_cdr, get_disc_size_cd):
	Correctly report size for commercial CD.

	* configure.in: Increase libtool version.

	* burn-extension.c (write_activate_cb, write_iso_activate_cb): Use
	g_build_filename.
	(desktop_uri_get_drive_id, copy_disc_activate_cb)
	(nautilus_burn_get_file_items): Add copy disc option to contextual
	menu for CD desktop files.

2005-03-31  Steve Murphy  <murf@e-tools.com>

        * configure.in: Added "rw" to ALL_LINGUAS.

2005-03-31  William Jon McCann  <mccann@jhu.edu>

	* make-iso.c (mkisofs_stderr_read): Use more accurate error
	message.

2005-03-31  William Jon McCann  <mccann@jhu.edu>

	* *.[ch]: Make all header blocks consistent.

2005-03-31  William Jon McCann  <mccann@jhu.edu>

	* test_blank.c (action_changed_cb, progress_changed_cb) 
	(blank_disc): Add signal handlers to test.

	* nautilus-burn-recorder.c (growisofs_blank_stdout_read)
	(nautilus_burn_recorder_blank_disc_dvdrw_format): Implement full
	blanking for DVD+RW using growisofs.  Also, do nothing when a fast
	blank is requested for non-blank DVD+RW media.

2005-03-31  William Jon McCann  <mccann@jhu.edu>

	* test_blank.c (blank_disc, main): Fixup comment and add usage
	help.

	* nautilus-burn-recorder.c (dvdrw_format_stderr_read)
	(nautilus_burn_recorder_wait_for_insertion)
	(nautilus_burn_recorder_write_tracks)
	(nautilus_burn_recorder_blank_disc_cdrecord)
	(nautilus_burn_recorder_blank_disc_dvdrw_format)
	(nautilus_burn_recorder_blank_disc): Make blank work a bit better
	for DVD+RW.  There really doesn't seem to be a "fast" blank for
	this media.

2005-03-30  William Jon McCann  <mccann@jhu.edu>

	* nautilus-burn-recorder.c (growisofs_stdout_read)
	(cdrecord_stdout_read, growisofs_stderr_read)
	(cdrecord_stderr_read): Handle HUP without hanging.
	(nautilus_burn_recorder_blank_disc_cdrecord): Change full to all
	for blank type.
	(nautilus_burn_recorder_blank_disc_dvdrw_format) 
	(dvdrw_format_stderr_read):
	Implement DVD blanking. (Closes #157461).

2005-03-30  William Jon McCann  <mccann@jhu.edu>

	* nautilus-burn-recorder.c (start_async_with_watch)
	(nautilus_burn_recorder_run_process)
	(nautilus_burn_recorder_write_growisofs)
	(nautilus_burn_recorder_write_cdrecord)
	(nautilus_burn_recorder_blank_disc_cdrecord): Use a common
	function to start and monitor all sub processes.  This removes
	duplicate code and makes it easier to add new processes.

2005-03-30  William Jon McCann  <mccann@jhu.edu>

	* mapping-protocol.c (write_all, read_all, encode_int) 
	(decode_int, encode_string, decode_string, encode_pointer) 
	(decode_pointer, mapping_protocol_request_encode) 
	(mapping_protocol_request_decode, encode_handshake) 
	(decode_handshake, mapping_protocol_reply_encode) 
	(mapping_protocol_reply_decode) 
	(mapping_protocol_monitor_event_encode) 
	(mapping_protocol_monitor_event_decode):
	Push the IOChannel down into the read/write functions.

2005-03-29  William Jon McCann  <mccann@jhu.edu>

	* nautilus-cd-burner.c (action_changed_cb, burn_cd):
	Update the progress bar when the action changes.

2005-03-29  William Jon McCann  <mccann@jhu.edu>

	* nautilus-cd-burner.c (estimate_size_callback, burn_cd) 
	(cdname_entry_insert_text): 
	* nautilus-burn-drive.c (freebsd_scan): 
	* mapping-method.c (get_path_from_uri, monitor_do_iter_unlocked) 
	(do_set_file_info): 
	* mapping-daemon.c (virtual_node_lookup): 
	* make-iso.c (graft_file_visitor, create_graft_file):
	Use char instead of gchar.  Add some debug statements.

2005-03-29  William Jon McCann  <mccann@jhu.edu>

	* nautilus-burn-drive.c: Fix order of includes.

	* mapping-protocol.c (mapping_protocol_get_unix_name): 
	* mapping-method.c (monitor_do_iter_unlocked, launch_daemon) 
	(vfs_module_init): 
	* mapping-daemon.c (main):
	Remove a few more of the hardcoded "/" chars.

2005-03-29  William Jon McCann  <mccann@jhu.edu>

	* nautilus-cd-burner.c (burn_cd, main): 
	* nautilus-burn-drive.c: 
	(open_ioctl_handle, get_cd_scsi_id, drive_get_name, linux_scan): 
	* nautilus-burn-drive-selection.c: 
	* mapping-method.c (debug_init, monitor_do_iter_unlocked) 
	(do_set_file_info): 
	* mapping-daemon.c (debug_init, virtual_node_free) 
	(virtual_root_free, virtual_node_lookup, virtual_create, main): 
	* make-iso.c: 
	(nautilus_burn_make_iso_cancel, copy_file) 
	(graft_file_end_dir_visitor, graft_file_visitor) 
	(nautilus_burn_make_iso): 
	* burn-extension.c:
	Use GLib features.  Fix order of includes.

2005-03-29  William Jon McCann  <mccann@jhu.edu>

	* mapping-protocol.c (mapping_protocol_data_available) 
	(mapping_protocol_request_encode) 
	(mapping_protocol_request_decode, mapping_protocol_reply_encode) 
	(mapping_protocol_reply_decode) 
	(mapping_protocol_monitor_event_encode) 
	(mapping_protocol_monitor_event_decode): 
	* mapping-method.c (request_op_unlocked, monitor_event_pending) 
	(monitor_setup, vfs_module_init, vfs_module_shutdown): 
	* mapping-daemon.c (subscription_send_event, handle_request):
	Change the protocol API to use GIOChannel.

2005-03-29  William Jon McCann  <mccann@jhu.edu>

	* mapping-protocol.[ch]:
	* mapping-method.c (request_op_unlocked, monitor_event_pending) 
	(monitor_do_iter_unlocked, request_op, remove_file_helper) 
	(do_open, do_create, do_open_directory, do_get_file_info) 
	(do_make_directory, do_remove_directory, do_move) 
	(do_set_file_info, do_truncate, do_create_symbolic_link) 
	(do_monitor_add, do_monitor_cancel): 
	* mapping-daemon.c (subscription_send_event, operation_string) 
	(handle_request):
	Add namespace prefix to mapping-protocol functions.

2005-03-28  William Jon McCann  <mccann@jhu.edu>

	* Makefile.am: Use included mkdtemp if necessary.
	* configure.in: Remove -Werror from cflags.
	* nautilus-burn-drive.c (get_cd_properties): Remove unused variables.

2005-03-27  Pawan Chitrakar  <pawan@nplinux.org>

	* configure.in: Added ne in ALL_LINGUAS

2005-03-24  Adi Attar  <aattar@cvs.gnome.org>

	* configure.in: Added 'xh' to ALL_LINGUAS.

2005-03-22  William Jon McCann  <mccann@jhu.edu>

	* nautilus-cd-burner.c (main): 
	* make-iso.c (nautilus_burn_make_iso, nautilus_burn_verify_iso):
	Use term "disc image" instead of "CD image" since it can also be a
	DVD image.

2005-03-21  William Jon McCann  <mccann@jhu.edu>

	* nautilus-burn-drive.c (get_cd_scsi_id): Memset with zero not
	one.  (Closes #171103)

2005-03-21  William Jon McCann  <mccann@jhu.edu>

	* mapping-daemon.c (create_dir_link, create_link): Use lstat
	instead of stat to avoid symbolic link loops.  (Closes #170408)

2005-03-18  William Jon McCann  <mccann@jhu.edu>

	* nautilus-cd-burner.c (ask_rewrite_disc, warn_data_loss_cb) 
	(burn_cd): 
	* nautilus-burn-recorder.c (nautilus_burn_recorder_wait_for_insertion):
	Make it easier to try another disc if the user doesn't want to erase.

2005-03-18  William Jon McCann  <mccann@jhu.edu>

	* burn-extension.c (nautilus_burn_get_file_items): Check gnome-vfs
	is-local flag instead of hardcoding "file:" scheme.

2005-03-16  William Jon McCann  <mccann@jhu.edu>

	* nautilus-cd-burner.c (ask_rewrite_disc): Set parent for dialog.
	Fix message text.  Use Cancel button per HIG.

2005-03-16  William Jon McCann  <mccann@jhu.edu>

	* nautilus-cd-burner.c (ask_cancel): Fix difficult to translate
	message.  (Closes #149211)

2005-03-16  William Jon McCann  <mccann@jhu.edu>

	* nautilus-cd-burner.c (time_to_string_text) 
	(nautilus_burn_progress_set_time, progress_changed_cb): 
	* nautilus-burn-recorder.c (compute_time_remaining) 
	(growisofs_stdout_read, cdrecord_stdout_read) 
	(nautilus_burn_recorder_write_growisofs) 
	(nautilus_burn_recorder_run_cdrecord) 
	(nautilus_burn_recorder_class_init): 
	* make-iso.c (mkisofs_output_error, mkisofs_stderr_read): 
	* cdrecorder-marshal.list: Add time argument to progress-changed
	signal.  Report time to finish for mkisofs, cdrecord, growisofs.
	(Closes #141947)

2005-03-15  William Jon McCann  <mccann@jhu.edu>

	* list_cddrives.c (list_cdroms): Fix typo.

2005-03-15  William Jon McCann  <mccann@jhu.edu>

	* TODO: Update.

2005-03-15  William Jon McCann  <mccann@jhu.edu>

	* mapping-protocol.c (data_available): New function adapted from
	gamin_data_available() that reports if data is available for
	reading on the socket.
	(write_all, read_all): Only return success/fail not bytes.
	(encode_int): Don't do g_htonl in-place.
	(encode_pointer, decode_pointer): New functions to pass pointer
	values.  Assumes a local socket is used.
	(encode_request, decode_request): Add userdata pointer to request.
	(encode_handshake, decode_handshake): New functions used to send a
	signature that leads each packet sent over the socket.  With the
	current implementation this is barely a sanity check that listener
	and sender are in sync.
	(encode_reply, decode_reply): Use "handshake".
	(decode_reply_error): New function to construct error message.
	(encode_monitor_event, decode_monitor_event)
	(destroy_monitor_event): New functions for handling new monitor
	event packets.

	* mapping-method.c: Use G_LOCK_DEFINE_STATIC.
	(debug_init, debug_print): Add ability to print debug information
	to a file.
	(get_path_from_uri, get_uri): Add g_return_val_if_fail.
	(request_op_unlocked): New function that does what request_op used
	to do but without the mutex_lock.
	(monitor_event_pending): New function to report if a monitor event
	is available and read it if it is.
	(monitor_do_iter_unlocked): New function to process available
	monitor events.
	(request_op): Wrap request_op_unlocked and process available
	events before sending request to client in order to avoid a
	deadlock.  Add userdata argument.
	(remove_file_helper, do_open, do_create, do_open_directory)
	(do_get_file_info, do_make_directory, do_remove_directory)
	(do_move, do_set_file_info, do_truncate, do_create_symbolic_link):
	Use NULL userdata in request_op call.
	(monitor_callback): New function as IO watch callback for monitor
	events.
	(monitor_stop_unlocked): New function to stop the IO watch.
	(monitor_setup): New function to create IO watch for monitor
	events.
	(do_monitor_add): New function to create a file monitor in the
	daemon.
	(do_monitor_cancel): New function to remove a file monitor from
	the daemon.
	(do_forget_cache): New function to mark forget-cache method as
	unsupported.
	(vfs_module_init): Init debug if necessary.
	(vfs_module_shutdown): Remove IO watch.

	* mapping-daemon.c (debug_init, debug_print): Add ability to print
	debug information to a file.
	(subscription_free, subscription_ref, subscription_unref)
	(subscription_cancel, subscription_get_path)
	(subscription_send_event, actually_dispatch_event)
	(dispatch_data_free, virtual_node_add_subscription)
	(virtual_node_remove_subscription)
	(virtual_node_subscription_event, subscription_new): New functions
	to implement individual requests to monitor a file.
	(get_backing_file, create_file): strdup path.
	(create_dir, remove_dir, remove_file, create_file, create_link)
	(move_file): Send events for each subscription.
	(connection_add_subscription, connection_remove_subscription)
	(connection_free, connection_ref, connection_unref)
	(connection_new, connection_get_subscription, connection_add)
	(connection_remove, connection_error): New functions to keep track
	of each client connection and which subscription requests
	originate from that client.
	(monitor_add, monitor_cancel): New functions to add/remove
	subscriptions.
	(operation_string): New function to get a string description of
	the requested operation for debugging.
	(handle_request): Support monitoring.
	(handle_new_client): Add support for connection.
	(cleanup_timeout): Use length of list of connections.
	(main): Init debug if necessary.

2005-03-15  William Jon McCann  <mccann@jhu.edu>

	* cdspin[1-8].png: Incremental improvement to disc images.

2005-03-15  William Jon McCann  <mccann@jhu.edu>

	* configure.in: Bump version to 2.11.1 after branching.

2005-03-14  William Jon McCann  <mccann@jhu.edu>

	* nautilus-burn-drive.c (open_ioctl_handle, close_ioctl_handle)
	(nautilus_burn_drive_get_media_type_from_path_full)
	(nautilus_burn_drive_get_media_size_from_path)
	(get_device_max_read_speed, get_device_max_write_speed): Abstract
	the open calls in order to add support for FreeBSD.
	(Closes #168952)

2005-03-10  William Jon McCann  <mccann@jhu.edu>

	* nautilus-burn-recorder.c (nautilus_burn_recorder_write_tracks)
	(nautilus_burn_recorder_blank_disc_cdrecord): Make sure we unlock
	the drive when we are done with it.  (Closes #169855)

2005-03-08  William Jon McCann  <mccann@jhu.edu>

	* nautilus-cd-burner.c (burn_cd): Lock the drive while
	requesting media.

	Patch from David Zeuthen <david@fubar.dk> (Closes #169133)

2005-03-07  William Jon McCann  <mccann@jhu.edu>

	* configure.in: Changing to post-release version incrementing.
	Post release version bump.

=== 2.10.0 ===

2005-03-07  William Jon McCann  <mccann@jhu.edu>

	* configure.in: 
	* README: 
	* NEWS: Release version 2.10.0.

2005-03-01  Abel Cheung  <maddog@linuxhall.org>

	* configure.in: Added "mk" "nn" "ta" to ALL_LINGUAS.

=== 2.9.8 ===

2005-03-01  William Jon McCann  <mccann@jhu.edu>

	* NEWS: 
	* configure.in: Update for release.

2005-03-01  William Jon McCann  <mccann@jhu.edu>

	* make-iso.c (mkisofs_stdout_read, mkisofs_stderr_read):
	Fix hang on pipe EOF on BSD.  Thanks to Joe Marcus Clarke.

2005-02-28  William Jon McCann  <mccann@jhu.edu>

	* dvd_plus_rw_utils.cpp (get_mmc_profile):
	Upstream doesn't always know best... make non-DVD devices
	report blank status again for non-HAL builds.
	Thanks to Joe Marcus Clarke.

=== 2.9.7 ===

2005-02-28  William Jon McCann  <mccann@jhu.edu>

	* NEWS: 
	* configure.in: Update for release.

2005-02-23  William Jon McCann  <mccann@jhu.edu>

	* dvd_plus_rw_utils.cpp (get_2k_capacity): Treat a sequential
	DVD-RW like a restricted-overwrite DVD-RW. Since we don't support
	appending to the disc we should report the formatted capacity of
	the DVD-RW instead of the space available.  (Closes #168096)

2005-02-22  William Jon McCann  <mccann@jhu.edu>

	* dvd_plus_rw_utils.cpp (get_mmc_profile, get_2k_capacity): Fix to
	detect blank discs.  Partial merge with upstream.

	* transport.hxx: Use patched version from Fedora.

	* nautilus-burn-drive.c (nautilus_burn_drive_get_media_type_from_path_full): 
	* dvd_plus_rw_utils.cpp (get_disc_status): Get blank status correctly for
	systems without HAL.

2005-02-22  William Jon McCann  <mccann@jhu.edu>

	* nautilus-cd-burner.c (warn_data_loss_cb): Fix inverted gboolean logic.
	(request_media): Don't warn about data loss here, wait until signal.

	* nautilus-burn-recorder.c (nautilus_burn_recorder_wait_for_insertion):
	Use nautilus_burn_drive_get_media_type_full.
	(media_type_matches): Update to use is_blank as in nautilus-cd-burner.c.

	* list_cddrives.c (list_cdroms): Use correct units.  Fix missing space in text.

2005-02-22  William Jon McCann  <mccann@jhu.edu>

	* list_cddrives.c (list_cdroms): Use nautilus_burn_drive_get_media_type_full.

2005-02-21  William Jon McCann  <mccann@jhu.edu>

	* nautilus-cd-burner.c (ncb_hig_dialog): Don't use a title on error
	dialogs per HIG.

2005-02-21  William Jon McCann  <mccann@jhu.edu>

	* nautilus-cd-burner.c (request_media, ask_rewrite_disc) 
	(warn_data_loss_cb): Warn about possible dataloss if the disc
	is not blank.  Don't rely on whether the disc was unmounted or not.
	(Closes #152379)

2005-02-16  William Jon McCann  <mccann@jhu.edu>

	* nautilus-cd-burner.c (main): Remove spurious debug message.

	* make-iso.c (ncb_mkisofs_supports_utf8, nautilus_burn_make_iso):
	Check to make sure that mkisofs supports UTF8 before using it as
	the input charset.  (Closes #167459)

2005-02-15  William Jon McCann  <mccann@jhu.edu>

	* cdburn.glade: Use stock response id for write button.

	* nautilus-cd-burner.c (main): Don't set up progress dialog if the user
	cancels the setup dialog.  This may fix some hard to track down crashes.
	(refresh_dialog): Don't try to add items to the speed selection if we don't
	have a recorder.

2005-02-15  William Jon McCann  <mccann@jhu.edu>

	* make-iso.c (mkisofs_stdout_read, mkisofs_stderr_read):
	Handle subprocess HUP so that we don't hang the interface when
	an unknown error errors.  Detect mkisofs uknown charset error.
	(Closes #167459)

2005-02-11  William Jon McCann  <mccann@jhu.edu>

	* mapping-daemon.c (virtual_node_lookup): Fix a leak found
	by Kjartan Maraas.  (Closes #166927)

2005-02-11  William Jon McCann  <mccann@jhu.edu>

	* nautilus-cd-burner.c (ask_cancel): Change wording and buttons
	in write interrupt confirmation dialog to be less ambiguious.
	(Closes #166726)

2005-02-10  William Jon McCann  <mccann@jhu.edu>

	* nautilus-burn-drive.c (nautilus_burn_drive_get_media_type_from_path_full) 
	(nautilus_burn_drive_get_media_size_from_path, get_cd_scsi_id) 
	(get_device_max_read_speed, get_device_max_write_speed):
	Add fallback to open RDONLY for compatibility with Linux 2.4.
	(Closes #165962)

2005-02-10  William Jon McCann  <mccann@jhu.edu>

	* transport.hxx: Sync with upstream dvd+rw-tools 5.21.4.10.8.
	The only difference is the O_EXCL in open in our version.
	(Closes #166689)

=== 2.9.6 ===

2005-02-08  William Jon McCann  <mccann@jhu.edu>

	* NEWS: 
	* configure.in: Update for release.

2005-01-28  William Jon McCann  <mccann@jhu.edu>

	* nautilus-cd-burner.c (burn_cd): Report errors during make_iso
	and remove incorrect error message.  (Closes #164432)

	* make-iso.c (nautilus_burn_iso_error_quark) 
	(nautilus_burn_make_iso_cancel, mkisofs_stderr_read) 
	(nautilus_burn_make_iso): Add GError to make_iso to be able to
	report errors back to the user.

2005-01-26  William Jon McCann  <mccann@jhu.edu>

	* make-iso.c (mkisofs_stderr_read): Watch for mkisofs error messages
	and return an error condition.
	(Closes #158940)

	* nautilus-cd-burner.c (burn_cd): Use warn_low_space for writing
	to ISO file output also.

	* make-iso.c (nautilus_burn_make_iso):
	Make size comparison between values of the same units.

2005-01-26  William Jon McCann  <mccann@jhu.edu>

	* nautilus-cd-burner.c (media_type_matches, request_media) 
	(burn_cd): Try to unmount busy volumes before asking for media.
	Add comparison between media type and is_blank to media request.
	(Closes: #164352)

	* nautilus-burn-recorder.c (nautilus_burn_recorder_wait_for_insertion):
	Move private drive unmounting functions to burn-drive.

	* nautilus-burn-drive.c
	(nautilus_burn_drive_get_media_type_from_path_full)
	(nautilus_burn_drive_get_media_type_from_path)
	(nautilus_burn_drive_get_media_type)
	(nautilus_burn_drive_hal_get_media_type_full)
	(nautilus_burn_drive_get_media_type_full)
	(nautilus_burn_drive_get_media_type_and_rewritable)
	(free_unmount_data, unmount_done, unmount_timeout, find_command)
	(unmount_thread_start, nautilus_burn_drive_unmount): Add ability
	to query media for is_blank, has_data, has_audio.  Move drive
	unmounting from burn-recorder to here and expose api.

=== 2.9.5 ===

2005-01-24  William Jon McCann  <mccann@jhu.edu>

	* NEWS: 
	* configure.in: Update for 2.9.5 release.

2005-01-24  William Jon McCann  <mccann@jhu.edu>

	* Makefile.am (EXTRA_DIST): Add MAINTAINERS file.

2005-01-21  William Jon McCann  <mccann@jhu.edu>

	* MAINTAINERS: Added new file.

2005-01-13  William Jon McCann  <mccann@jhu.edu>

	* nautilus-cd-burner.c (main): Fix typo in previous commit.

2005-01-13  William Jon McCann  <mccann@jhu.edu>

	* nautilus-cd-burner.c (main): Clarify language in dialog.
	(Closes: #163968)

2005-01-12  William Jon McCann  <mccann@jhu.edu>

	* make-iso.c (nautilus_burn_make_iso): 
	* nautilus-cd-burner.c (init_dialog):
	Use consistent size units (Closes: #163834)

=== 2.9.4 ===

2005-01-10  Bastien Nocera  <hadess@hadess.net>

	* configure.in:
	* NEWS: updated for 2.9.4
	* Makefile.am: updated for release, increase libtool versions

2005-01-10  Bastien Nocera  <hadess@hadess.net>

	* nautilus-cd-burner.c: (warn_data_loss_cb), (burn_cd), (main):
	warn the user of a possible data loss (Closes: #152379)

2005-01-10  Bastien Nocera  <hadess@hadess.net>

	* nautilus-cd-burner.c: (main): only warn the user about only having
	ISOs if we *do* have files in burn:/// (Closes: #163535)

2005-01-09  Bastien Nocera  <hadess@hadess.net>

	* make-iso.c: (ask_disable_joliet): make it clear we're talking about
	Microsoft Windows (Closes: #163446)

2005-01-08  Bastien Nocera  <hadess@hadess.net>

	* nautilus-cd-burner.c: (estimate_size_callback), (estimate_size),
	(main): warn the user if he's about to write a CD with an ISO image
	inside (Closes: #149364)

2005-01-08  William Jon McCann  <mccann@jhu.edu>

	* nautilus-cd-burner.c (ncb_hig_dialog): Use window icon.
	(overwrite_existing_file): Tweak dialog text.
	(refresh_dialog): Tweak text.
	(my_gdk_pixbuf_new_from_stock): Remove unused function.
	(main): Use gnome-dev-cdrom as window icon.

	* configure.in: Update required GTK to 2.5.4.

	* cdburn.glade: Change window gravity to center.

	Patch from Luca Ferretti <elle.uca@libero.it>
	(Closes: #157925)

2005-01-07  William Jon McCann  <mccann@jhu.edu>

	* make-iso.c (ask_disable_joliet, nautilus_burn_make_iso):
	Use gtk_message_dialog_format_secondary_text API.

	* nautilus-cd-burner.c (ncb_hig_dialog):
	Use gtk_message_dialog_format_secondary_text API.
	(ask_for_media, insert_media_request_cb, burn_cd, main):
	Ask the user to replace the in-drive media if data size is bigger
	than media size (and he hasn't the gconf overburn set). If
	difference is only 5 MiBs show a button to overburn it.  Also show
	the required size in the insert disc dialog.
	Based on patch from Fernando Herrera  <fherrera@onirica.com>
	(Closes: #135985)

2005-01-07  William Jon McCann  <mccann@jhu.edu>

	* nautilus-cd-burner.c (estimate_size_callback, estimate_size) 
	(main): Report unreadable files before starting burn.
	(Closes: #161557)

2005-01-07  William Jon McCann  <mccann@jhu.edu>

	* nautilus-burn-recorder.c (nautilus_burn_recorder_write_tracks) 
	(nautilus_burn_recorder_write_cdrecord) 
	(nautilus_burn_recorder_write_growisofs): 
	* nautilus-cd-burner.c (burn_cd):
	Add missing namespace prefix to NautilusBurnRecorderWriteFlags.
	(Closes: #161260)

2005-01-04  Bastien Nocera  <hadess@hadess.net>

	* mapping-method.c: (do_create): fix compilation with debug enabled
	(Closes: #162901)

2004-12-18  Bastien Nocera  <hadess@hadess.net>

	* nautilus-burn-recorder.c:
	(nautilus_burn_recorder_write_growisofs): don't set
	non-blocking mode on stdout twice, but set it on stderr, patch
	by Nicholas J. Skehin <nicholas@skehin.com> (Closes: #161634)

2004-12-17  Bastien Nocera  <hadess@hadess.net>

	* Makefile.am: fix .c/.h typo

2004-12-16  Bastien Nocera  <hadess@hadess.net>

	* .cvsignore:
	* Makefile.am:
	* bacon-cd-selection.c:
	* bacon-cd-selection.h:
	* bcs-test.c:
	* nautilus-burn-drive-selection.c:
	* nautilus-burn-drive-selection.h:
	* nautilus-cd-burner.c: rename bacon-cd-selection.[ch] to
	nautilus-burn-drive-selection.[ch]

2004-12-16  Bastien Nocera  <hadess@hadess.net>

	* Makefile.am:
	* cd-recorder.c:
	* cd-recorder.h:
	* nautilus-burn-recorder.c:
	* nautilus-burn-recorder.h:
	* nautilus-cd-burner.h:
	* test_blank.c: rename cd-recorder.[ch] to nautilus-burn-recorder.[ch]

2004-12-16  Bastien Nocera  <hadess@hadess.net>

	* .cvsignore:
	* Makefile.am:
	* bacon-cd-selection.c:
	* bacon-cd-selection.h:
	* cd-drive.c:
	* cd-drive.h:
	* cd-recorder.h:
	* list_cddrives.c:
	* nautilus-burn-drive.c:
	* nautilus-burn-drive.h:
	* nautilus-cd-burner.h:
	* test_blank.c: rename cd-drive.[ch] to nautilus-burn-drive.[ch]

2004-12-15  Bastien Nocera  <hadess@hadess.net>

	* configure.in: update version to 2.9.0

2004-12-13  Bastien Nocera  <hadess@hadess.net>

	* *: patch from William Jon McCann <mccann@jhu.edu> to correctly
	namespace the libnautilus-burn objects and functions
	(Closes: #152198, 153782)

2004-12-10  Bastien Nocera  <hadess@hadess.net>

	* cd-recorder.c: (media_type_matches), (unmount_drive),
	(cd_recorder_wait_for_insertion),
	(cd_recorder_blank_disc_cdrecord), (cd_recorder_class_init):
	* cd-recorder.h:
	* cdrecorder-marshal.list: rework the insertion code to emit
	a warn-data-loss signal if the medium is rewritable, and we unmounted
	it (step towards closing: #152379)

2004-12-10  Bastien Nocera  <hadess@hadess.net>

	* .cvsignore:
	* Makefile.am:
	* cd-drive.c: (get_hal_context):
	* cd-recorder.c: (cd_write_needs_growisofs),
	(growisofs_stderr_read), (cd_recorder_write_tracks),
	(cd_recorder_run_cdrecord), (cd_recorder_write_cdrecord),
	(cd_recorder_blank_disc_cdrecord),
	(cd_recorder_blank_disc_dvdrw_format), (cd_format_needs_growisofs),
	(cd_recorder_blank_disc):
	* cd-recorder.h:
	* configure.in:
	* test_blank.c: (blank_disc), (main):
	patch inspired by James Bowes' <bowes@cs.dal.ca> to add blanking
	support to libnautilus-burn (is missing DVD format support)
	Fix compilation with HAL 0.4.2 and newer

2004-12-06  Bastien Nocera  <hadess@hadess.net>

	* configure.in:
	* make-iso.c: (make_iso_get_free_space), (make_iso):
	use gnome_vfs_get_volume_free_space instead of statfs/statvfs, and
	remove the checks for those functions from configure.in
	(Closes: #151642)

2004-12-06  Bastien Nocera  <hadess@hadess.net>

	* nautilus-cd-burner.c: (insert_cd_request_cb): better error message
	when asked to insert a CD (patch by Iain Holmes
	<bugs@prettypeople.org>) (Closes: #154043)

2004-12-06  Bastien Nocera  <hadess@hadess.net>

	* make-iso.c: (make_iso), (ncb_make_valid_utf8), (verify_iso):
	* make-iso.h:
	* nautilus-cd-burner.c: (main): move ISO verification to make-iso.h,
	give a reasonable error message when the error isn't "not an ISO
	image" (Closes: #155394)

=== 2.8.6 ===

2004-12-06  Bastien Nocera  <hadess@hadess.net>

	* configure.in: 2.8.6

2004-12-04  Bastien Nocera  <hadess@hadess.net>

	* make-iso.c: (mkisofs_stderr_read), (make_iso):
	* nautilus-cd-burner.c: (burn_cd): When an incorrectly encoded file
	is to be added to an image, we need to error out. Also force utf8
	encoding on the command-line when building the image (Closes: #149486)

2004-11-29  Bastien Nocera  <hadess@hadess.net>

	* nautilus-cd-burner.c: (burn_cd): fix crash when closing the
	"Completed" dialog with the window manager buttons instead of the
	Close button (Closes: #159644)

2004-11-22  Frederic Crozat  <fcrozat@mandrakesoft.com>

	* dvd_plus_rw_utils.cpp:
	Fix memleak spotted by valgrind.

2004-11-16  Marco Pesenti Gritti  <marco@gnome.org>

	* autogen.sh:

	Fix out of src directory build

2004-11-10  James Henstridge  <james@jamesh.id.au>

	* Makefile.am: make a few changes to work with newer automakes.

	* configure.in: remove some cruft that isn't needed with newer
	Automakes.

	* autogen.sh (REQUIRED_AUTOMAKE_VERSION): require Automake 1.7.

2004-11-10  Bastien Nocera  <hadess@hadess.net>

	* bacon-cd-selection.c: (combo_device_changed),
	(bacon_cd_selection_set_recorders_only): fix crash when the first
	CD drive wasn't a recorder (Closes: #157387)
	* cd-drive.c: (test_cdroms): added a test_cdroms() that can be used
	to fake configurations

=== 2.8.5 ===

2004-11-03  Bastien Nocera  <hadess@hadess.net>

	* NEWS:
	* configure.in: 2.8.5

2004-11-03  Christophe Fergeau  <teuf@gnome.org>

	* bacon-cd-selection.c: (bacon_cd_selection_set_recorders_only): make
	sure there is still an active combo box entry after filtering the 
	combo box content to only show cd recorders.

2004-10-26  Bastien Nocera  <hadess@hadess.net>

	* bacon-cd-selection.c: (bacon_cd_selection_init),
	(bacon_cd_selection_finalize), (bacon_cd_selection_new):
	move initialisation from _new to _init for use by bindings
	(patch by Bryan Forbes <bryan@reigndropsfall.net>) (Closes: #154106)

2004-10-22  Bastien Nocera  <hadess@hadess.net>

	* bacon-cd-selection.c:
	* bacon-cd-selection.h:
	* burn-extension.c:
	* cd-drive.c:
	* cd-drive.h:
	* cd-recorder.c:
	* cd-recorder.h:
	* list_cddrives.c:
	* make-iso.c:
	* make-iso.h:
	* nautilus-cd-burner.c:
	* nautilus-cd-burner.h: add G_BEGIN_DECLS/G_END_DECLS, update
	Copyright notices

=== 2.8.4 ===

2004-10-21  Bastien Nocera  <hadess@hadess.net>

	* NEWS: upd
	* configure.in: 2.8.4

2004-10-20  Alexander Larsson  <alexl@redhat.com>

	* mapping-method.c (fill_in_directory_info):
	The user should own the folders. This fixed writability for
	users in the root group.

2004-10-19  Frederic Crozat  <fcrozat@mandrakesoft.com>

	* Makefile.am:
	Oops, use LDFLAGS, not LIBADD.

	* burn-extension.c:
	Use glib header for library i18n.

2004-10-19  Frederic Crozat  <fcrozat@mandrakesoft.com>

	* Makefile.am:
	Don't use version for nautilus extension soname.

2004-10-12  Alexander Larsson  <alexl@redhat.com>

	* cd-recorder.c (unmount_thread_start):
	Try to unmount the cdrom if its busy.

2004-10-02  Bastien Nocera  <hadess@hadess.net>

	* configure.in: test for Solaris' volmgt library (Closes: #145550)

2004-09-30  Sebastien Bacher  <seb128@canonical.com>

	* cd-recorder.c: (growisofs_stderr_read), (cdrecord_stderr_read):
	display the cdrecord and growisofs outputs in the right order
	(Closes: #154160).

2004-09-30  Bastien Nocera  <hadess@hadess.net>

	* cd-drive.c: (cd_drive_get_media_type_from_path_full),
	(cd_drive_get_media_size_from_path), (get_cd_scsi_id),
	(get_device_max_read_speed), (get_device_max_write_speed),
	(linux_scan):
	* transport.hxx: open the devices read-write, not read-only if we're
	actually going to write stuff to them. Should fix problems seen
	on Linux 2.6.8 kernels

2004-09-27  Bastien Nocera  <hadess@hadess.net>

	* cd-drive.c: (cd_drive_copy):
	* cd-drive.h: add a function to copy a CDDrive struct
	* configure.in: don't bomb out if HAL is present but not new enough,
	simply compile with an older version

2004-09-25  Bastien Nocera  <hadess@hadess.net>

	* make-iso.c: (make_iso): Oops, that wasn't supposed to be there

2004-09-24  Bastien Nocera  <hadess@hadess.net>

	* make-iso.c: (make_iso): Force the input character set to UTF-8 when
	creating an ISO image (Closes: #151480)

=== 2.8.3 ===

2004-09-22  Bastien Nocera  <hadess@hadess.net>

	* NEWS: upd
	* configure.in: 2.8.3

2004-09-22  Alexander Larsson  <alexl@redhat.com>

	* cd-drive.[ch]:
	Add functions to lock/unlock drives with hal.
	* cd-recorder.c:
	Lock drives while burning.
	* configure.in:
	Require hal with lock primitives.

2004-09-21  Bastien Nocera  <hadess@hadess.net>

	* dvd_plus_rw_utils.cpp: fix potential crasher in
	get_read_write_speed (patch from Martin Pitt
	<martin.pitt@canonical.com>)

2004-09-21  Bastien Nocera  <hadess@hadess.net>

	* bacon-cd-selection.c: (combo_device_changed),
	(bacon_cd_selection_set_have_file_image),
	(bacon_cd_selection_set_recorders_only): Fix crash when no (real)
	drives are available (Closes: #153268)

=== 2.8.2 ===

2004-09-21  Bastien Nocera  <hadess@hadess.net>

	* NEWS: upd
	* configure.in: 2.8.2

2004-09-20  Bastien Nocera  <hadess@hadess.net>

	* cd-drive.c: (cd_drive_door_open),
	(cd_drive_get_media_type_from_path_full),
	(cd_drive_get_media_type_from_path), (cd_drive_get_media_type),
	(cd_drive_get_media_type_and_rewritable):
	* cd-drive.h:
	* cd-recorder.c: (media_type_matches),
	(cd_recorder_wait_for_insertion):
	* dvd_plus_rw_utils.cpp:
	* list_cddrives.c: (list_cdroms):
	More fixes for drives that don't handle medium reporting properly,
	including fixes for blanking (patch from Alex Larsson
	<alexl@redhat.com>)

2004-09-19  Bastien Nocera  <hadess@hadess.net>

	* nautilus-cd-burner.c: (action_changed_cb): correct translations
	of the actions (we translated, but not displayed by the program)
	(Closes: #153074)

2004-09-17  Bastien Nocera  <hadess@hadess.net>

	* cd-drive.c: (cd_drive_get_media_type_from_path),
	(cd_drive_get_media_type), (hal_scan): use HAL to get the CD medium
	type if possible (patch from Alex Larsson <alexl@redhat.com>)
	(Closes: #145196)

2004-09-17  Bastien Nocera  <hadess@hadess.net>

	* cd-recorder.c: (insert_cd_retry), (cdrecord_stdout_read),
	(growisofs_stderr_read), (cdrecord_stderr_read),
	(cd_recorder_write_tracks): Revert the changes to assert when
	cdrecord can't find a medium, fixes potential crashes with older
	CD drives that don't support MMC v2 commands (patch from Alex
	Larsson <alexl@redhat.com>)

2004-09-17  Bastien Nocera  <hadess@hadess.net>

	* cd-recorder.h: fix the insert_cd signal prototype
	* nautilus-cd-burner.c: (insert_cd_request_cb): fix the inverted
	usage of is_reload in insert_cd_request_cb (Patches from Alex
	Larsson <alexl@redhat.com>)

=== 2.8.1 ===

2004-09-16  Bastien Nocera  <hadess@hadess.net>

	* NEWS: upd
	* configure.in: 2.8.1

2004-09-16  Bastien Nocera  <hadess@hadess.net>

	* bacon-cd-selection.c: (bacon_cd_selection_class_init):
	fix the default value of the default property (patch from Kjartan
	Maraas <kmaraas@gnome.org>) (Closes: #152854)

2004-09-16  Bastien Nocera  <hadess@hadess.net>

	* .cvsignore: upd
	* cd-drive.c: (cd_drive_get_media_type_from_path): an MMC Profile
	of 0 means that there is no medium in the drive, fixes the crash
	trying to burn a CD without a CD in the drive (Closes: #151986)
	* nautilus-cd-burner.c: (ncb_hig_dialog), (insert_cd_request_cb),
	(main): swap the title/reason dialog for CD insertion to the right
	order, use the right glade file when running n-c-b from its source
	directory

2004-09-14  Bastien Nocera  <hadess@hadess.net>

	* nautilus-cd-burner.c: (target_optionmenu_create): Only show
	CD recorders in the main window (Closes: #152387)

2004-09-10  William Jon McCann  <mccann@jhu.edu>

	* bacon-cd-selection.c (bacon_cd_selection_class_init)
	(cdrom_combo_box, bacon_cd_selection_new, compare_drives)
	(bacon_cd_selection_set_recorders_only)
	(bacon_cd_selection_set_property)
	(bacon_cd_selection_get_property):
	Add show-recorders-only property.  Fixes #152061.

2004-09-10  Bastien Nocera  <hadess@hadess.net>

	* Makefile.am: upd
	* bacon-cd-selection.c: (bacon_cd_selection_set_have_file_image):
	fix an off-by-one mistake (spotted by William Jon McCann
	<mccann@jhu.edu>)
	* bcs-test.c: added, based on William Jon McCann's test program

=== 2.8.0 ===

2004-09-10  Bastien Nocera  <hadess@hadess.net>

	* NEWS: upd
	* configure.in: 2.8.0

2004-09-10  Bastien Nocera  <hadess@hadess.net>

	* nautilus-cd-burner.c: (insert_cd_request_cb): put the dialog buttons
	in the right order (Closes: #152093) (Patch by Bryan Clark
	<bclark@redhat.com>)

2004-09-10  Bastien Nocera  <hadess@hadess.net>

	* list_cddrives.c: (media_type_get_string), (list_cdroms): update to
	print the time length only if it's a CD or CD-RW

2004-08-28  Akagic Amila  <bono@linux.org.ba>

        * configure.in: Added 'bs' to ALL_LINGUAS.

2004-08-21  Kjartan Maraas  <kmaraas@gnome.org>

	* configure.in: Add Â«nbÂ» to ALL_LINGUAS.

2004-08-17  Alexander Larsson  <alexl@redhat.com>

	* NEWS:
	Update

	* configure.in:
	2.7.6

2004-08-02  Christian Rose  <menthos@menthos.com>

	* configure.in: Added "or" to ALL_LINGUAS.

2004-07-31  Bastien Nocera  <hadess@hadess.net>

	* cd-drive.h: don't return negative times
	* dvd_plus_rw_utils.cpp: fix getting the size for DVD-R[W] medium

=== 2.7.5 ===

2004-07-29  Bastien Nocera  <hadess@hadess.net>

	* configure.in: 2.7.5

2004-07-29  Bastien Nocera  <hadess@hadess.net>

	* nautilus-cd-burner.c: (details_clicked), (ask_cancel), (main):
	Call the "CD Creator" "CD/DVD Creator"

2004-07-29  Bastien Nocera  <hadess@hadess.net>

	* cd-recorder.c: (cdrecord_stderr_read),
	(cd_recorder_write_cdrecord):
	* cd-recorder.h:
	* nautilus-cd-burner.c: (burn_cd), (main):
	* ncb.schemas.in: Implement "burnproof" as an option, as it is
	necessary to burn CDs on some systems (Closes: #137099). Display
	an error when cdrecord tells us that the system is too slow
	(Closes: #148749)

2004-07-29  Bastien Nocera  <hadess@hadess.net>

	* burn-extension.c: (nautilus_burn_get_file_items):
	* cd-drive.c: (hal_scan), (get_scsi_cd_name):
	* cd-recorder.c: (growisofs_stdout_read), (cdrecord_stdout_read),
	(growisofs_stderr_read), (cd_recorder_write_growisofs),
	(cd_recorder_write_cdrecord), (cd_recorder_finalize),
	(cd_recorder_init), (cd_recorder_class_init):
	* cd-recorder.h:
	* cdburn.glade:
	* cdrecorder-marshal.list:
	* nautilus-cd-burner.c: (action_changed_cb):
	Fix up the API of CDRecorder to list actions, as well as media type
	in the action-changed signal, Have "CD", "DVD", or "Disc" used
	appropriately (Closes: #140282)

2004-07-29  Bastien Nocera  <hadess@hadess.net>

	* nautilus-cd-burner.c: (main): make it possible to run n-c-b from
	its source directory

2004-07-29  Frederic Crozat  <fcrozat@mandrakesoft.com>

	* burn-extension.c: (nautilus_module_initialize):
	* configure.in:
	Initialize i18n for nautilus extension.

2004-07-28  Bastien Nocera  <hadess@hadess.net>

	* nautilus-cd-burner.c: (ncb_hig_dialog),
	(ncb_hig_show_error_dialog), (insert_cd_request_cb),
	(show_error_message), (overwrite_existing_file), (burn_cd),
	(ask_cancel), (help_activate), (main): HIGify all the dialog windows
	in the application itself (Closes: #143117)

2004-07-28  Bastien Nocera  <hadess@hadess.net>

	* cd-drive.h:
	* list_cddrives.c: (list_cdroms): fix printing out the DVD sizes

2004-07-28  Bastien Nocera  <hadess@hadess.net>

	* cd-drive.c: (cd_drive_get_media_size_from_path):
	* dvd_plus_rw_utils.cpp: fix function prototypes for getting sizes from
	DVDs (still slightly broken)

2004-07-27  Bastien Nocera  <hadess@hadess.net>

	* cd-drive.c: (cd_drive_get_media_size_from_path):
	* cd-drive.h:
	* dvd_plus_rw_utils.cpp:
	* list_cddrives.c: (list_cdroms): merge the 2 different code paths
	(ATIP for CDs, and READ CAPACITY SCIS for DVDs), implements getting
	the size from a medium, and macro for bytes->minutes conversion

2004-07-27  Bastien Nocera  <hadess@hadess.net>

	* cd-drive.c: (cd_drive_get_media_size_from_path):
	rename get_disc_size to get_disc_size_cd
	move CD_ROM_SPEED where it can be used without HAL support
	(Closes: #148521)
	* dvd_plus_rw_utils.cpp: add get_disc_size_dvd which returns the
	amount of data in bytes that can fit on a DVD media

2004-07-26  Bastien Nocera  <hadess@hadess.net>

	* list_cddrives.c: (list_cdroms): print out the size, and length in
	minutes/seconds of the media in the drive (Closes: #148274)

2004-07-23  Fernando Herrera  <fherrera@onirica.com>
 
	* dvd_plus_rw_utils.cpp: MMC functions to get read/write speed
	and blank disc size 
	* cd-drive.c: (get_cd_properties):
	(get_device_max_read_speed), (get_device_max_write_speed),
	(add_linux_cd_recorder), (freebsd_scan), (cdrecord_scan):
	Use MMC functions to get speeds.
	(cd_drive_get_media_size_from_path), (cd_drive_get_media_size),
	* cd-drive.h: New functions to get media size.

2004-07-26  Bastien Nocera  <hadess@hadess.net>

	* cdburn.glade: chop the progress window text in 2 labels
	(Closes: #148425)

2004-07-23  Bastien Nocera  <hadess@hadess.net>

	* cd-drive.c: (cdrecord_scan): should be /dev/pgX not /dev/X for
	cdrecord detected drives (thanks Fernando)

=== 2.7.4 ===

2004-07-21  Bastien Nocera  <hadess@hadess.net>

	* NEWS: upd
	* configure.in: 2.7.4

2004-07-21  Bastien Nocera  <hadess@hadess.net>

	* cd-drive.c: (hal_scan), (add_linux_cd_recorder),
	(add_linux_cd_drive), (freebsd_scan), (cdrecord_scan),
	(cd_drive_get_file_image), (cd_drive_free), (cd_drive_new):
	* cd-drive.h: remove some struct members that should be private,
	and hide them
	* nautilus-cd-burner.c: (burn_cd), (main): remove unneeded cruft

2004-07-08  Bastien Nocera  <hadess@hadess.net>

	* cd-recorder.c: (growisofs_stdout_read), (cdrecord_stdout_read):
	remove our lame attempts at getting decent debug lines from cdrecord
	* cdburn.glade: name the primary label on the progress dialog

2004-07-08  Bastien Nocera  <hadess@hadess.net>

	* dvd_plus_rw_utils.cpp: fix compilation on Solaris (Closes: #145550)

2004-06-30  Bastien Nocera  <hadess@hadess.net>

	* .cvsignore: upd

2004-06-30  Bastien Nocera  <hadess@hadess.net>

	* cd-recorder.c: (cdrecord_stdout_read), (growisofs_stderr_read),
	(cdrecord_stderr_read), (cd_recorder_wait_for_insertion),
	(cd_recorder_write_tracks), (cd_recorder_class_init):
	* cd-recorder.h:
	* cdrecorder-marshal.list:
	* nautilus-cd-burner.c: (insert_cd_request_cb):
	Start fixing things up for the RW-already mounted use-case

2004-06-26  Bastien Nocera  <hadess@hadess.net>

	* Makefile.am: fix marshal files generation
	* list_cddrives.c: (media_type): fix warning

2004-06-25  Bastien Nocera  <hadess@hadess.net>

	* .cvsignore: upd
	* Makefile.am: generate the marshal files
	* cd-drive.c: (cd_drive_door_open),
	(cd_drive_get_media_type_from_path): return an error if the tray is
	opened, rather than "unknown type"
	* cd-recorder.c: (cd_needs_growisofs), (cdrecord_stderr_read),
	(media_type_matches), (cd_recorder_wait_for_insertion),
	(cd_recorder_write_tracks), (cd_recorder_finalize),
	(cd_recorder_class_init):
	* cd-recorder.h:
	* cdburn.glade:
	* cdrecorder-marshal.list:
	* nautilus-cd-burner.c: (insert_cd_request_cb), (burn_cd),
	(refresh_dialog), (main):

	Remove the Erase checkbox altogether, nautilus-cd-burner and the
	CDRecorder object now detects the CD type, and whether the tray is
	opened, refactor the "Ask user to slot in a CD" job, much leaner
	and cleaner now (Closes: #144925)

2004-06-25  Bastien Nocera  <hadess@hadess.net>

	* burn-extension.c: (nautilus_burn_get_file_items),
	(nautilus_burn_get_background_items),
	(nautilus_burn_get_toolbar_items):
	* cdburn.glade: Fix some strings (patch from Luca Ferretti
	<elle.uca@libero.it>) (Closes: #143116)

2004-06-24  Bastien Nocera  <hadess@hadess.net>

	* cd-recorder.c: (cd_recorder_track_free),
	(cd_recorder_write_tracks), (cd_recorder_finalize):
	Free the track item itself when freeing a track, check that the
	number of tracks is under 100 when burning, more memleaks fixed in
	_finalize

2004-06-24  Bastien Nocera  <hadess@hadess.net>

	* .cvsignore: upd
	* Makefile.am: upd
	* cd-drive.c: (hal_scan): Fixed up to use the new HAL properties
	* cd-recorder.c: (cdrecord_stdout_read): remove the "\r" so that
	we can see the output of cdrecord when burning a CD in debug mode
	* configure.in: require a newer HAL
	* list_cddrives.c: added, from libbacon, handy for testing

2004-06-21  Bastien Nocera  <hadess@hadess.net>

	* burn-extension.c: (nautilus_burn_get_file_items),
	(nautilus_burn_get_background_items): use ellipsis correctly
	* cdburn.glade:
	* nautilus-cd-burner.c: (cd_progress_set_text), (init_dialog):
	changes to match the HIG, and simplify the burn, especially when
	default options fill the bill (based on patches from Luca Ferretti
	<elle.uca@libero.it>) (Closes: #143116)

2004-06-21  Bastien Nocera  <hadess@hadess.net>

	* cd-drive.c: (hal_scan): free the device list when we're done with it
	* configure.in: only hal 0.2.91 is required

2004-06-21  Bastien Nocera  <hadess@hadess.net>

	* Makefile.am:
	* cd-drive.c: (hal_scan):
	* configure.in: simplify the HAL autotool code, and the detection code
	(no need to load all the properties, only those of removable drives)

2004-06-20  Bastien Nocera  <hadess@hadess.net>

	* configure.in: remove bash-ism (spotted by Joe Marcus Clarke
	<marcus@FreeBSD.org>)

2004-06-18  Bastien Nocera  <hadess@hadess.net>

	* Makefile.am:
	* cd-drive.c: (hal_scan):
	* configure.in: Use HAL by default when it's there, use the HAL_CFLAGS
	defined, and support HAL CVS properties (with help from Young-Ho Cha
	<ganadist@chollian.net>) (Closes: #144533)

2004-06-18  Bastien Nocera  <hadess@hadess.net>

	* cd-drive.c: (hal_scan): Ooops, we were leaking the HAL context if
	we managed to get some CD drives

2004-06-18  Bastien Nocera  <hadess@hadess.net>

	* NEWS: upd

2004-06-17  Bastien Nocera  <hadess@hadess.net>

	* cd-recorder.c: (growisofs_stdout_read), (growisofs_stderr_read),
	(cd_recorder_write_growisofs), (cd_recorder_write_cdrecord):
	* cd-recorder.h:
	* nautilus-cd-burner.c: (burn_cd), (main):
	* ncb.schemas.in: support overburn in GConf, small fixes in the
	CD recorder's debug mode (Closes: #144122)

2004-06-17  Bastien Nocera  <hadess@hadess.net>

	* nautilus-cd-burner.c: (main): Dummy write and debug are the wrong
	way around

2004-06-17  Bastien Nocera  <hadess@hadess.net>

	* nautilus-cd-burner.c: (target_changed): Fix a crash when selecting
	the File Image target

2004-06-17  Bastien Nocera  <hadess@hadess.net>

	* NEWS: upd

2004-06-17  Bastien Nocera  <hadess@hadess.net>

	* configure.in:
	* nautilus-cd-burner.c: (ncb_make_valid_utf8), (verify_iso):
	remove the eel dependency in nautilus-cd-burner itself

=== 2.7.3 ===

2004-06-16  Bastien Nocera  <hadess@hadess.net>

	* configure.in: release 2.7.3

2004-06-16  Bastien Nocera  <hadess@hadess.net>

	* configure.in: use the libstdc++ hack on FreeBSD 5 (thanks to
	Joe Marcus Clarke <marcus@FreeBSD.org> for the testing)

2004-06-14  Bastien Nocera  <hadess@hadess.net>

	* configure.in: require hal 0.2.92 or greater (Closes: #144188)

2004-06-14  Bastien Nocera  <hadess@hadess.net>

	* bacon-cd-selection.c: (bacon_cd_selection_finalize): fix a
	double-free, and bad ordering when removing the CD from the linked-list
	(thanks to Fernando Herrera <fherrera@onirica.com> for the testcase)

2004-06-14  Bastien Nocera  <hadess@hadess.net>

	* bacon-cd-selection.c: (bacon_cd_selection_class_init),
	(bacon_cd_selection_finalize), (cdrom_combo_box),
	(bacon_cd_selection_new), (bacon_cd_selection_set_have_file_image),
	(bacon_cd_selection_set_device), (bacon_cd_selection_get_device),
	(bacon_cd_selection_get_cdrom):
	* bacon-cd-selection.h: make the BaconCdSelection descend from a
	GtkComboBox instead of a GtkVBox
	* libnautilus-burn.pc.in: make libnautilus-burn depend on gtk+

2004-06-11  Bastien Nocera  <hadess@hadess.net>

	* bacon-cd-selection.c: (bacon_cd_selection_finalize): don't destroy
	the internal widget, it's already destroyed when we get to our
	container
	* nautilus-cd-burner.c: (main): destroy the dialog on exit
	Thanks to Fernando Herrera <fherrera@onirica.com> for spotting this

2004-06-11  Bastien Nocera  <hadess@hadess.net>

	* bacon-cd-selection.c: (bacon_cd_selection_set_have_file_image),
	(bacon_cd_selection_get_default_device): more parameters checking
	in those functions

=== 2.7.2 ===

2004-06-11  Bastien Nocera  <hadess@hadess.net>

	* NEWS:
	* configure.in: paperbag release

2004-06-11  Bastien Nocera  <hadess@hadess.net>

	* configure.in: fix ALL_LINGUAS not being taken into account,
	spotted by Joe Marcus Clarke <marcus@FreeBSD.org>

=== 2.7.1 ===

2004-06-11  Bastien Nocera  <hadess@hadess.net>

	* NEWS: upd for release

2004-06-11  Bastien Nocera  <hadess@hadess.net>

	* bacon-cd-selection.c: remove the HAVE_DISCOVERY ifdef's, everybody
	has discovery now
	* cd-drive.c: (cdrecord_get_stdout_for_id), (get_cd_properties),
	(add_whitelist), (add_dvd_plus),
	(cd_drive_get_media_type_from_path), (cd_drive_get_media_type),
	(hal_scan), (linux_add_whitelist), (get_scsi_units),
	(get_device_max_speed), (linux_scan), (freebsd_scan),
	(cdrecord_scan_get_stdout), (cdrecord_scan), (scan_for_cdroms),
	(cd_drive_free):
	* cd-drive.h:
	Add basic discovery with cdrecord when the system isn't Linux or
	FreeBSD, implement your better algorithms, rename guess_media_type
	to cd_drive_get_media_type_from_path, or alternatively, use the new
	cd_drive_get_media_type
	* cd-recorder.c: (cd_needs_growisofs):
	* configure.in:
	* nautilus-cd-burner.c: (wait_for_insertion): update accordingly

2004-06-10  Bastien Nocera  <hadess@hadess.net>

	* cd-recorder.c: more G_DEFINE_TYPE-fu

2004-06-10  Bastien Nocera  <hadess@hadess.net>

	* bacon-cd-selection.c: (bacon_cd_selection_init): more code saving
	with G_DEFINE_TYPE

2004-06-09  Bastien Nocera  <hadess@hadess.net>

	* bacon-cd-selection.c:
	* cd-drive.c:
	* cd-recorder.c:
	* configure.in: all hail to our new gi18n.h overlords

2004-06-08  Bastien Nocera  <hadess@hadess.net>

	* cd-drive.c: (linux_scan): small-devfs isn't supported, and this
	code could conflict with udev (patch from Andreas Boman
	<aboman@eiwaz.com>)

2004-05-31  Bastien Nocera  <hadess@hadess.net>

	* Makefile.am: install the bacon-cd-selection.h header as well

2004-05-31  Bastien Nocera  <hadess@hadess.net>

	* Makefile.am:
	* bacon-cd-selection.[ch]:
	* cd-drive.c: (cd_drive_get_file_image), (scan_for_cdroms):
	* cd-drive.h:
	* cdburn.glade:
	* configure.in:
	* nautilus-cd-burner.c: (wait_for_insertion), (burn_cd),
	(lookup_current_recorder), (refresh_dialog), (target_changed),
	(target_optionmenu_create), (init_dialog), (main):
	Move the BaconCdSelection to nautilus-cd-burner, use GtkComboBox
	instead of the old GtkOptionMenu for the CD selection widget (patch
	from Iain Holmes <iain@prettypeople.org>), make ourselves use
	the newly imported widget

2004-05-30  Bastien Nocera  <hadess@hadess.net>

	* Makefile.am:
	* cd-drive.c: updated from libbacon
	* configure.in:
	* update-from-bacon.sh: removed

	nautilus-cd-burner is now the place to get the CD detection stuff from

2004-05-29  Bastien Nocera  <hadess@hadess.net>

	* cd-drive.c: (hal_scan): updated from libbacon for Sony CDU-948S
	support

2004-05-12  Bastien Nocera  <hadess@hadess.net>

	* make-iso.c: (mkisofs_stdout_read), (mkisofs_stderr_read),
	(make_iso):
	* make-iso.h:
	* nautilus-cd-burner.c: (burn_cd), (main): fix warning when sscanf
	sucks at parsing mkisofs messages, add run-time debug for make-iso.[ch]
	* ncb.schemas.in: entry type is bool not boolean

2004-05-11  Bastien Nocera  <hadess@hadess.net>

	* cdburn.glade: add mnemonics to the main window (Closes: #138286)

2004-05-11  Bastien Nocera  <hadess@hadess.net>

	* nautilus-cd-burner.c: (main): set the icon on the progress window
	as well (Closes: #142244)

2004-05-11  Bastien Nocera  <hadess@hadess.net>

	* cd-recorder.c: (growisofs_stdout_read), (cdrecord_stdout_read),
	(growisofs_stderr_read), (cdrecord_stderr_read),
	(cd_recorder_write_tracks), (cd_recorder_write_growisofs),
	(cd_recorder_write_cdrecord):
	* cd-recorder.h:
	* configure.in:
	* nautilus-cd-burner.c: (burn_cd), (main):
	* ncb.schemas.in: make debugging a run-time option (via GConf) rather
	than a compile-time one

2004-05-11  Bastien Nocera  <hadess@hadess.net>

	* cd-recorder.c: (cdrecord_stderr_read): error out when trying to
	write on an already written-to non-rewritable medium with cdrecord,
	also error out if a wav file isn't in the right format for audio CDs
	(From: #142167)

2004-05-10  Bastien Nocera  <hadess@hadess.net>

	* mapping-daemon.c: (virtual_create):
	* nautilus-cd-burner.c: (burn_cd): use g_mkstemp instead of mkstemp
	(patch by FabrÃ­cio Barros Cabral <fxcabral@yahoo.com.br>)
	(Closes: #140751)

2004-05-04  Alexander Larsson  <alexl@redhat.com>

	* nautilus-cd-burner.c (help_activate): 
	Fix help launching

2004-05-04  Bastien Nocera  <hadess@hadess.net>

	* configure.in: remove extraneous comma (Closes: #140997)
	Patch by Mariano SuÃ¡rez-Alvarez <msuarezalvarez@arnet.com.ar>

2004-04-20  SamÃºel JÃ³n Gunnarsson  <sammi@techattack.nu>

	* configure.in: Added "is" to ALL_LINGUAS.

2004-04-19  Bastien Nocera  <hadess@hadess.net>

	* nautilus-cd-burner.c: (burn_cd): fix logic in using the temp_dir
	for temp ISOs (Closes: #138699)

2004-04-18  Bastien Nocera  <hadess@hadess.net>

	* nautilus-cd-burner.c: (init_dialog): it's 32 bytes, not 32
	characters

2004-04-14  Bastien Nocera  <hadess@hadess.net>

	* cd-drive.c: (linux_bsd_media_type):
	* dvd_plus_rw_utils.cpp: update from libbacon

2004-04-10  Guntupalli Karunakar  <karunakar@freedomink.org>

        * configure.in: Added "gu" (Gujarati) to ALL_LINGUAS.

2004-04-05  Bastien Nocera  <hadess@hadess.net>

	* cd-drive.c: (get_cd_scsi_id), (get_scsi_cd_name), (linux_scan):
	* dvd_plus_rw_utils.cpp: update and merge from libbacon, including
	valgrind fixes

2004-04-01  Bastien Nocera  <hadess@hadess.net>

	* Makefile.am:
	* configure.in:
	* dvd_plus_rw_utils.cpp: don't link to libstdc++ on GCC/Linux systems,
	as it's not needed, post branch version bump to 2.7.1

2004-04-01  Johan Dahlin  <johan@gnome.org>

	* Makefile.am: Split up cd-drive.c and cd-recoder.c into a library

	* libnautilus-burn.pc.in: New file for library

	* configure.in: Add .pc file

	* cd-drive.c, cd-recorder.c: Remove dependency of libgnome

	* burn-extension.c: Refactor process launching

2004-03-30  Adam Weinberger  <adamw@gnome.org>

	* configure.in: Added en_CA (Canadian English) to ALL_LINGUAS.

2004-03-22  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Post release bump to 2.6.1

=== 2.6.0 ===

2004-03-22  Alexander Larsson  <alexl@redhat.com>

	* NEWS: 
	* configure.in:
	Bump version to 2.6.0

2004-03-22  Gareth Owen  <gowen72@yahoo.com>

	* configure.in: Added en_GB to ALL_LINGUAS

2004-03-22  Guntupalli Karunakar  <karunakar@freedomink.org>

        * configure.in: Added "pa" (Punjabi) to ALL_LINGUAS.

=== 0.6.7 ===

2004-03-15  Alexander Larsson  <alexl@redhat.com>

	* NEWS: 
	* configure.in:
	Update to 0.6.7

=== 0.6.6 ===

2004-03-08  Alexander Larsson  <alexl@redhat.com>

	* NEWS: 
	* configure.in:
	Update to 0.6.6

2004-03-05  Alexander Larsson  <alexl@redhat.com>

	* mapping-modules.conf (burn):
	Don't use lib and .so in library name.

2004-03-05  Alexander Larsson  <alexl@redhat.com>

	* nautilus-cd-burner.c (select_iso_filename):
	Clean up fileselector usage.

2004-03-04  Alexander Larsson  <alexl@redhat.com>

	* burn-extension.c (nautilus_burn_get_file_items):
	Handle new iso mime type.

2004-03-02  Alexander Larsson  <alexl@redhat.com>

	* nautilus-cd-burner.c (cdname_entry_insert_text):
	Limit the cdname entry to 32 bytes (not chars)

2004-02-24  Bastien Nocera  <hadess@hadess.net>

	* make-iso.c: For stat.h and vfs.h, apply the same rules for NetBSD
	and OpenBSD as for FreeBSD (Patch from (Julio M. Merino Vidal
	<jmmv@menta.net>) (Closes: #135307)

2004-02-23  Guntupalli Karunakar  <karunakar@freedomink.org>

	* configure.in: Added "hi" for Hindi in ALL_LINGUAS.

2004-02-19  Alexander Larsson  <alexl@redhat.com>

	* mapping-daemon.c (main):
	chdir to /. (fixes #134668)

2004-02-13  Alexander Larsson  <alexl@redhat.com>

	* make-iso.c (make_iso):
	actually pass GError.

=== 0.6.5 ===

2004-02-11  Alexander Larsson  <alexl@redhat.com>

	* Makefile.am (EXTRA_DIST):
	remove acconfig.h

	* NEWS: 
	* configure.in:
	Bump to 0.6.5

2004-02-10  Ross Burton  <ross@burtonini.com>

	* acconfig.h:
	Removed.

	* configure.in:
	Added comments from acconfig.h here.

	* Makefile.am:
	Do more cleaning.

2004-02-05  Bastien Nocera  <hadess@hadess.net>

	* Makefile.am:
	* cd-recorder.c: (cd_recorder_write_growisofs):
	* cdburn.glade:
	* nautilus-cd-burner.c: (init_dialog), (help_activate), (main):
	
	Fix crashes with DVD recording debug enabled,
	Eject the DVD after burning with growisofs if told so
	Add link to the user guide (partially Closes: #119991)
	Get the sensitivity of the ISO label the right way around

2004-02-01  Bastien Nocera  <hadess@hadess.net>

	* Makefile.am:
	* cd-drive.[ch]:
	* transport.hxx:
	* dvd_plus_rw_utils.cpp:
	* cd-recorder.c: (cd_recorder_track_free), (can_burn_dvds),
	(cd_needs_growisofs), (cd_recorder_cancel),
	(growisofs_stdout_read), (cdrecord_stdout_read),
	(cd_recorder_write_tracks), (cd_recorder_write_growisofs),
	(cd_recorder_write_cdrecord), (cd_recorder_class_init):
	* cd-recorder.h:
	* cdburn.glade:
	* cdrecorder-marshal.list: removed
	* make-iso.c: (make_iso_cancel), (make_iso):
	* make-iso.h:
	* nautilus-cd-burner.c: (reload_dialog_response),
	(insert_cd_response), (insert_cdrw_response), (media_type_matches),
	(details_clicked), (estimate_size), (file_chooser_response_cb),
	(burn_cd), (refresh_dialog), (init_dialog), (ask_cancel),
	(do_cancel), (main):
	* nautilus-cd-burner.h:

	Updated from libbacon, detects blank media and media where logical
	type != physical type properly (Closes: #130090)
	Removed music support from nautilus-cd-burner itself (Closes: #125374),
	cleaned up cancellation handling

=== 0.6.4 ===

2004-01-30  Alexander Larsson  <alexl@redhat.com>

	* NEWS: 
	* configure.in:
	Bump to 0.6.4

2003-12-10  Dave Camp  <dave@ximian.com>

	* Makefile.am:
	* Nautilus_CD_Burner_Context_Menu.server.in.in:
	* burn-extension.c: (write_activate_cb), (write_iso_activate_cb),
	(nautilus_burn_get_file_items),
	(nautilus_burn_get_background_items),
	(nautilus_burn_get_toolbar_items),
	(nautilus_burn_menu_provider_iface_init),
	(nautilus_burn_instance_init), (nautilus_burn_class_init),
	(nautilus_burn_get_type), (nautilus_burn_register_type),
	(nautilus_module_initialize), (nautilus_module_shutdown),
	(nautilus_module_list_types):
	* configure.in:
	* context-menu.c: Use the new nautilus extensions interface.

2004-01-13  Alexander Larsson  <alexl@redhat.com>

	* nautilus-cd-burner.c (select_iso_filename):
	Don't set default filesel size.

=== 0.6.3 ===

2004-01-12  Alexander Larsson  <alexl@redhat.com>

	* NEWS: 
	* configure.in: 
	0.6.3

2004.01.10  Arafat Medini <lumina@silverpen.de>
                                                                                
        * ar.po: Added Arabic locale "ar" to ALL_LINGUAS

2004-01-06  Bastien Nocera  <hadess@hadess.net>

	* configure.in: we weren't using the minimum gtk+ requirement...
	* nautilus-cd-burner.c: (file_chooser_response_cb):
	avoid possible segfaults, patch by Joe Marcus Clarke
	<marcus@freebsd.org> (Closes: #130584)

2004-01-05  Roozbeh Pournader  <roozbeh@sharif.edu>

	* configure.in: Added "fa" (Persian) in ALL_LINGUAS.

2004-01-03  Robert Sedak  <robert.sedak@sk.htnet.hr>

        * configure.in: Added "hr" in ALL_LINGUAS.

2004-01-02  Taneem Ahmed  <taneem@bengalinux.org>

	* configure.in: Added "bn" to ALL_LINGUAS.

2003-12-31  Bastien Nocera  <hadess@hadess.net>

	* cd-drive.c: (get_cd_properties), (freebsd_scan):
	Merge FreeBSD fixes from libbacon

2003-12-31  Bastien Nocera  <hadess@hadess.net>

	* cd-recorder.c: (cd_recorder_get_type),
	(cd_recorder_write_growisofs), (cd_recorder_write_cdrecord):
	* cd-recorder.h:
	* make-iso.c: (build_list_of_audio_tracks):
	* nautilus-cd-burner.c: (track_free), (burn_cd):
	Fix build on GCC 2.95.x platforms (Closes: #129041)
	Patch by Joe Marcus Clarke <marcus@freebsd.org>

=== 0.6.2 ===

2003-12-29  Alexander Larsson  <alexl@redhat.com>

	* NEWS: 
	* configure.in:
	0.6.2

2003-12-22  Bastien Nocera  <hadess@hadess.net>

	* ncb.schemas.in: add periods at the end of the long schema
	descriptions (Closes: #124843)

2003-12-18  Bastien Nocera  <hadess@hadess.net>

	* cd-recorder.c: (cd_recorder_write_tracks),
	(cd_recorder_write_cdrecord):
	* cd-recorder.h: add disc-at-once support (for audio CDs)
	* make-iso.c: (ask_disable_joliet), (make_iso):
	* make-iso.h: warn the user when the ISO image doesn't allow Joliet
	support because of the filenames (Closes: #129408)
	* nautilus-cd-burner.c: (estimate_size), (burn_cd):
	make it possible to burn CD with files that end up being 0-sized

2003-12-16  Frederic Crozat  <fcrozat@mandrakesoft.com>

	* nautilus-cd-burner.c: (init_dialog):
	Use g_strftime_date instead of strftime for better UTF-8 handling.

2003-12-16	Mohammad DAMT  <mdamt@bisnisweb.com>

	* configure.in: Added "id" in ALL_LINGUAS
	* po/id.po: Indonesian translation by Ahmad Riza H Nst <ari@160c.afraid.org>

2003-12-09  Alexander Larsson  <alexl@redhat.com>

	* nautilus-cd-burner.c: (verify_iso):
	Fix out of bounds array access.
	
2003-12-09  Alexander Larsson  <alexl@redhat.com>

	* nautilus-cd-burner.c (file_chooser_response_cb):
	Fix up handling of delete event

2003-12-09  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Require gtk+ 2.3.0

2003-12-06  Jan Arne Petersen  <jpetersen@uni-bonn.de>

	* nautilus-cd-burner.c: (file_chooser_response_cb),
	(select_iso_filename):
	Replace GtkFileSelection with GtkFileChooser.

=== 0.6.1 ===

2003-12-08  Alexander Larsson  <alexl@redhat.com>

	* NEWS: 
	* configure.in:
	0.6.1

2003-12-06  IÃ±aki LarraÃ±aga <dooteo@euskalgnu.org>

	* configure.in: Addedd eu to ALL_LINGUAS

2003-12-03  Sanlig Badral  <badral@openmn.org>

	* configure.in: Added mn to ALL_LINGUAS

2003-11-28  Ross Burton  <ross@burtonini.com>

	* cd-recorder.[ch]:
	Refactor into cd_recorder_write_tracks(), which takes a list of
	Track pointers.

	* make-iso.[ch]:
	Cleanup thanks to above change.

	* nautilus-cd-recorder.c:
	Handle above change, and always attempt to write to discs of
	UNKNOWN type.

2003-11-26  Ross Burton  <ross@burtonini.com>

	* cd-drive.c:
	* cd-drive.h:
	Update from libbacon.

2003-10-29  Narayana Pattipati <narayana.pattipati@wipro.com>

	* nautilus-cd-burner.c: Fix file selector relared problems while
	writing iso images. Bugzilla bug#123025.

=== 0.6.0 ===

2003-10-24  Bastien Nocera  <hadess@hadess.net>

	* NEWS: updated
	* configure.in: 0.6.0

Wed Oct 15 13:44:32 2003  Jonathan Blandford  <jrb@redhat.com>

	* configure.in: move AC_C_CONST earlier to prevent it from picking
	up the -Werror in $CFLAGS

	* nautilus-cd-burner.c (estimate_size): explicitly cast this to
	make gcc not complain.

2003-10-07  Bastien Nocera  <hadess@hadess.net>

	* configure.in: added geck for ngettext
	* make-iso.c: (make_iso): handle plural with ngettext (patch from
	Danilo Segan <segan@gmx.net>)

2003-10-06  Mugurel Tudor  <mugurelu@go.ro>

	* configure.in: Added 'ro' to ALL_LINGUAS

2003-09-26  Frederic Crozat  <fcrozat@mandrakesoft.com>

	* cd-drive.c: (linux_scan):
	* dvd_plus_rw_utils.cpp:
	Update from libbacon.

2003-09-07  Bastien Nocera  <hadess@hadess.net>

	* nautilus-cd-burner.c: (init_dialog): s/strftime/strftime/ in the
	comment for translators (spotted by Jordi Mallach)

2003-09-07  Marcel Telka  <marcel@telka.sk>

	* configure.in (ALL_LINGUAS): Added sk.

2003-09-05  Jordi Mallach  <jordi@sindominio.net>

	* configure.in (ALL_LINGUAS): Added "ca" (Catalan).

2003-09-05  Bastien Nocera  <hadess@hadess.net>

	* mapping-method.c: (do_read_directory): fix confusion between
	g_build_filename and g_build_path (thanks Alex)

2003-09-04  Bastien Nocera  <hadess@hadess.net>

	* NEWS: updated
	* mapping-method.c: (remove_file_helper), (do_read_directory),
	(do_unlink): remove from burn:/// the items for which we cannot find
	the backing file anymore (Closes: #119668)

2003-09-04  Bastien Nocera  <hadess@hadess.net>

	* Nautilus_CD_Burner_Context_Menu.server.in.in: add an icon for the
	contextual menu item
	* cd-drive.c: (add_whitelist), (add_linux_cd_recorder),
	(add_linux_cd_drive), (linux_scan): updated from libbacon, adds
	a whitelist for misbehaving CD recorders
	* nautilus-cd-burner: added an icon for the dialog window

2003-09-03  Pauli Virtanen  <pauli.virtanen@hut.fi>

	* configure.in: Added "fi" (Finnish) to ALL_LINGUAS.

2003-09-03  Bastien Nocera  <hadess@hadess.net>

	* cd-drive.c: (get_device_max_speed), (add_linux_cd_recorder):
	updated from libbacon (better speed detection if "cdrecord -prcap"
	fails)
	* nautilus-cd-burner.c: (lookup_current_recorder),
	(refresh_dialog), (main): save the speed used so that it is used
	again on the next run (Closes: #113714), add g_object_unrefs on
	the GConfClients

2003-09-03  Bastien Nocera  <hadess@hadess.net>

	* configure.in: add gconftool-2 detection
	* .cvsignore: updated
	* Makefile.am: added schemas file
	* make-iso.c: (make_iso):
	* make-iso.h:
	* nautilus-cd-burner.c: (burn_cd):
	* nautilus-cd-burner.h: modified to try to write the temporary
	ISO image in the user-supplied directory, then in the system tmp
	directory and finally in the user's home directory (Closes: #109950)
	* ncb.schemas.in: added

2003-09-02  Bastien Nocera  <hadess@hadess.net>

	* cd-recorder.c: (cd_recorder_write_iso_cdrecord): don't set
	non-blocking mode on stdout twice, but set it on stderr

2003-09-02  Bastien Nocera  <hadess@hadess.net>

	* NEWS: start updating for the coming 0.6.0 release

2003-09-02  Gediminas Paulauskas  <menesis@delfi.lt>

	* configure.in: Added lt to ALL_LINGUAS.

2003-08-30  Bastien Nocera  <hadess@hadess.net>

	* cdburn.glade: mark test string as not translatable (Closes: #120172)

2003-08-29  Bastien Nocera  <hadess@hadess.net>

	* cd-drive.c: (linux_bsd_media_type):
	* cd-drive.h: updated from libbacon
	* nautilus-cd-burner.c: (media_type_matches), (wait_for_insertion):
	differentiate error guessing media type from unknown media type

2003-08-26  Bastien Nocera  <hadess@hadess.net>

	* cd-recorder.c: (cd_needs_growisofs), (cd_recorder_write_iso):
	Remove unneeded filename argument (thanks Ross)

=== 0.5.1 ===

2003-08-25  Alexander Larsson  <alexl@redhat.com>

	* NEWS: 
	* configure.in: 0.5.1

2003-08-22 Paul Duffy <dubhthach@frink.nuigalway.ie>

        * configure.in: Added "ga" to ALL_LINGUAS
2003-08-13  Bastien Nocera  <hadess@hadess.net>

	* cd-drive.c: (get_device_max_speed), (add_linux_cd_recorder),
	(linux_scan): update from libbacon, fixes detection of the speed
	with some versions of cdrecord

2003-08-11  Bastien Nocera  <hadess@hadess.net>

	* cd-recorder.c: (growisofs_stderr_read),
	(cd_recorder_write_iso_growisofs),
	(cd_recorder_write_iso_cdrecord): fix buglets when growisofs is
	supposed to die and no error message was showing up, ever,
	added debug to cd_recorder_write_iso_growisofs and
	cd_recorder_write_iso_cdrecord

2003-08-10  Bastien Nocera  <hadess@hadess.net>

	* NEWS: added entry: "Burning support on all growisofs supported drives"
	* cd-drive.c: (linux_bsd_media_type):
	* cd-drive.h: upd from libbacon
	* cd-recorder.c: (cd_needs_growisofs), (growisofs_stdout_read),
	(growisofs_stderr_read), (cdrecord_stderr_read),
	(cd_recorder_write_iso), (cd_recorder_write_iso_growisofs),
	(cd_recorder_write_iso_cdrecord): implement writing with growisofs,
	automatically use growisofs depending on the type of media,
	enables writing on DVD-R, DVD-RW, DVD+R and DVD+RW media
	* make-iso.c: (make_iso): fix dirname being freed before it's used
	* nautilus-cd-burner.c: (media_type_matches), (wait_for_insertion),
	(burn_cd): check for a media being inserted before launching the
	burning process (Closes: #116833)

2003-08-10  Paisa Seeluangsawat <paisa@users.sf.net>

	* configure.in: (ALL_LINGUAS) Added Thai (th).
	
=== 0.5.0 ===

2003-08-08  Alexander Larsson  <alexl@redhat.com>

	* NEWS:
	Update

	* configure.in: Bump to 0.5.0

2003-08-07  Yanko Kaneti <yaneti@declera.com>

	* configure.in: (ALL_LINGUAS) Added Bulgarian (bg).

2003-08-06  Wang Jian  <lark@linux.net.cn>

	* configure.in: Added "zh_CN" to ALL_LINGUAS.

2003-08-06  Yuriy Syrota  <yuriy@beer.com>

	* configure.in: Added "uk" (Ukrainian) to ALL_LINGUAS.

2003-07-27  Bastien Nocera  <hadess@hadess.net>

	* nautilus-cd-burner.c: (init_dialog): add a warning for translators
	about the volid field of 32 chars maximum

2003-07-27  Bastien Nocera  <hadess@hadess.net>

	* cdburn.glade: make the maximum length of the volid 32 characters
	* make-iso.c: (make_iso): check for the length of the volid,
	only use "-V" if there is a volid

2003-07-23  Bastien Nocera  <hadess@hadess.net>

	* Makefile.am:
	* configure.in:
	* make-iso.c: (make_iso):
	* mapping-daemon.c: (main):
	* mapping-method.c: (vfs_module_init):
	* mkdtemp.c:
	* mkdtemp.h: patch from Fredrik JÃ¶nsson <fjo@nada.kth.se> to provie
	statfs replacement on Solaris, and mkdtemp.[ch] on non-OpenBSD,
	or non-glibc systems, use the same code in mapping-method.c as in
	mapping-daemon.c to create the communication socket (Closes:
	#117948, #117899)

2003-07-23  Bastien Nocera  <hadess@hadess.net>

	* cd-drive.c: (add_linux_cd_recorder): update from libbacon to allow
	proper selection of IDE CD Burners on Linux 2.6.x (patch from
	robert@t-bse.de)

2003-07-22  Bastien Nocera  <hadess@hadess.net>

	* cd-drive.c: (get_device_max_speed), (get_scsi_cd_name): update
	from libbacon, fixes a leak, and s/CDROM/CD-ROM/

2003-07-22  Bastien Nocera  <hadess@hadess.net>

	* cd-recorder.c: (cdrecord_stderr_read):
	* cdburn.glade:
	* nautilus-cd-burner.c: (burn_cd), (init_dialog): applied patch
	from Dafydd Harries <daf@parnassus.ath.cx> to enhance some strings
	(Closes: #117557)

2003-07-14  Dafydd Harries  <daf@parnassus.ath.cx>

	* configure.in: Added "cy" (Welsh) to ALL_LINGUAS.

2003-07-11  Andras Timar  <timar@gnome.hu>

	* configure.in: Added "hu" to ALL_LINGUAS.

2003-07-07  Bastien Nocera  <hadess@hadess.net>

	* Makefile.am, cd-drive.[ch], configure.in, dvd_plus_rw_utils.cpp,
	transport.hxx: updated from libbacon
	* cd-recorder.c: (cd_needs_dvd_writer), (cd_recorder_write_iso):
	update for changes from libbacon, added bits necessary for DVD-R and
	DVD-RW functionality
	* nautilus-cd-burner.c: (refresh_dialog): only allow "blank cd" to
	be sensitive if the drive is a CD-RW

2003-07-01  Laurent Dhima  <laurenti@alblinux.net>

	* configure.in: Added "sq" to ALL_LINGUAS.

2003-06-27  Ross Burton  <ross@burtonini.com>

	* mapping-daemon.c: Remove hard-coded "/tmp" paths, using
	g_get_tmp_dir() instead.

2003-06-18  Dmitry G. Mastrukov  <dmitry@taurussoft.org>

	* configure.in: Added Russian to ALL_LINGUAS.

2003-05-28  Alexander Larsson  <alexl@redhat.com>

	* mapping-method.c (vfs_module_init):
	Fix stupid initialization bug that kept spewing warning.

2003-05-28  Alexander Larsson  <alexl@redhat.com>

	* cd-recorder.c:
	Reorder includes for FreeBSD.

2003-05-27  Alexander Larsson  <alexl@redhat.com>

	* cdburn.glade:
	Don't mark the you have selected... string as translatable.

=== 0.4.3 ===

2003-05-27  Alexander Larsson  <alexl@redhat.com>

	* NEWS: 
	* configure.in:
	Bump version to 0.4.3
	
2003-05-27  Alexander Larsson  <alexl@redhat.com>

	* cd-drive.c (get_scsi_units):
	Move variable initialization
	Fix memory overwrite bug.
	
2003-05-27  Alexander Larsson  <alexl@redhat.com>

	* cd-drive.c:
	Remove unneeded exists flag.

2003-05-26  Bob Doan  <bdoan@sicompos.com>

	* cd-recorder.[ch]: Ability to burn structured audio files as a music cd
	* cdburn.glade: likewise
	* nautilus-cd-burner.[ch]: likewise
	* make-iso.[ch]: likewise

2003-05-26  Alexander Larsson  <alexl@redhat.com>

	* cd-drive.c:
	* cd-recorder.c:
	* configure.in:
	* make-iso.c:
	FreeBSD support by marcus@freebsd.org

2003-05-23  Alexander Larsson  <alexl@redhat.com>

	* cd-recorder.c:
	Remove scsi includes.
	
2003-05-23  Alexander Larsson  <alexl@redhat.com>

	* cd-recorder.c (cd_recorder_get_error_message):
	Fix up assertions, pointed out by marcus@FreeBSD.org.

2003-05-19  Alexander Larsson  <alexl@redhat.com>

	* cd-drive.c (linux_scan):
	Fix super-ugly FILE * casts. (64bit problem)

=== 0.4.2 ===

2003-05-19  Alexander Larsson  <alexl@redhat.com>

	* NEWS: 
	* configure.in:
	Bump version to 0.4.2

2003-05-19  Ross Burton  <ross@burtonini.com>

	* nautilus-cd-burner.c:
	Disable and check the "resuse these files" check box when burning
	an ISO.

2003-05-19  Alexander Larsson  <alexl@redhat.com>

	* cd-drive.c (linux_scan):
	Look for /dev/cdroms to trigger have_devfs.

2003-05-19  Alexander Larsson  <alexl@redhat.com>

	* cd-drive.[ch]:
	Update from libbacon.
	Add patch from ross to fix indexing with devfs.

2003-05-18  Bob Doan  <bdoan@sicompos.com>

	* cd-recorder.c: Ability to blank CD-RW's before burn
	* cd-recorder.h: likewise
	* cdburn.glade: likewise
	* nautilus-cd-burner.c: likewise

2003-05-15  Alex Duggan  <aldug@astrolinux.com>

	* cdburn.glade: use a cd icon in the Write files to cd button.

2003-05-06  Danilo Å egan  <dsegan@gmx.net>

	* configure.in: Added "sr" and "sr@Latn" to ALL_LINGUAS.

=== 0.4.1 ===

2003-05-05  Alexander Larsson  <alexl@redhat.com>

	* NEWS: 
	Update
	
	* configure.in:
	Bump to 0.4.1

2003-04-26  Hasbullah Bin Pit  <sebol@ikhlas.com>

        * configure.in: Added "ms" to ALL_LINGUAS.

2003-04-22  Alexander Larsson  <alexl@redhat.com>

	* make-iso.c (make_iso):
	Correct label switch. (-V instead of -A)
	Thanks to Mikael Hultgren who pointed this out.

=== 0.4.0 ===

2003-04-01  Alexander Larsson  <alexl@redhat.com>

	* Makefile.am (EXTRA_DIST):
	Dist the right intltool files

2003-04-01  Alexander Larsson  <alexl@redhat.com>

	* NEWS: 
	* configure.in: 
	Bump to 0.4.0
		
2003-04-01  Alexander Larsson  <alexl@redhat.com>

	* Makefile.am (EXTRA_DIST):
	Add Nautilus_CD_Burner_Context_Menu.server.in.in

2003-03-31  Ross Burton  <ross@burtonini.com>

	* configure.in:
	Find intltool for translating .server files.
	
	* Makefile.am:
	Build nautilus-cd-burner-context-menu into $libexec. Also pass the
	BINDIR into cpp.
	
	* context-menu.c:
	A Nautilus context menu, adding "Write to CD" for ISO images.
	
	* Nautilus_CD_Burner_Context_Menu.server.in.in:
	Added a Bonobo server file for above.

2003-03-26  Evandro Fernandes Giovanini <evandrofg@ig.com.br>
 
        * configure.in: Added "pt_BR" to ALL_LINGUAS.

2003-03-25  Metin Amiroff <metin@karegen.com>

	* configure.in: Added "az" to ALL_LINGUAS.

2003-03-23  Duarte Loreto <happyguy_pt@hotmail.com>

        * configure.in: Added "pt" to ALL_LINGUAS.

2003-03-23  Takeshi AIHANA <aihana@gnome.gr.jp>

	* configure.in: Added Japanese 'ja' into ALL_LINGUAS.

2003-03-20  Zbigniew Chyla  <cyba@gnome.pl>

	* configure.in (ALL_LINGUAS): Added pl (Polish).

2003-03-13  Alexander Larsson  <alexl@redhat.com>

	* nautilus-cd-burner.c (burn_cd):
	Don't unlink iso if the user specified it.

2003-02-28  Ross Burton  <ross@burtonini.com>

	* configure.in: Find eel.

	* nautilus-cd-burner.c: Check that the ISO label is valid UTF-8,
	if it isn't try out best to make it so.

2003-02-28  Ross Burton  <ross@burtonini.com>

	* nautilus-cd-burner.c: Allow the argument to be an ISO image, and
	burn that. Also open burn:/// if the user hasn't dropped anything
	in there yet.

2003-02-27  Alexander Larsson  <alexl@redhat.com>

	* .cvsignore:
	Add new files
	
	* Makefile.am:
	* cdrecorder-marshal.list:
	Marshallers
	
	* cd-recorder.[ch]:
	* nautilus-cd-burner.[ch]:
	GObjectify cd recording.

	Based on patch by Bastien Nocera <bnocera@redhat.com>

2003-02-20  Dmitry G. Mastrukov  <dmitry@taurussoft.org>

	* configure.in: Added Belarusian to ALL_LINGUAS.

2003-02-09  TÃµivo LeedjÃ¤rv  <toivo@linux.ee>

	* configure.in: Added et to ALL_LINGUAS.

2003-02-09  Abel Cheung  <maddog@linux.org.hk>

	* configure.in: Added "zh_TW" (traditional Chinese) to ALL_LINGUAS.

2003-01-30  Fatih Demir <kabalak@gtranslator.org>

	* configure.in: Added "tr" (Turkish) to the languages' list.

2003-01-27  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	* NEWS
	Bump to 0.3.2

2003-01-27  Alexander Larsson  <alexl@redhat.com>
	
	* nautilus-cd-burner.c (burn_cd): 
	* make-iso.c (make_iso):
	Use g_get_tmp_dir() to get temporary dir.
	Patch from tommi.komulainen@iki.fi (Tommi Komulainen)

2003-01-22  Pablo Saratxaga  <pablo@mandrakesoft.com>

	* configure.in: Added Amharic (am) and Dutch (nl) to ALL_LINGUAS.

=== 0.3.1 ===

2003-01-13  Alexander Larsson  <alexl@redhat.com>

	* NEWS: 
	* configure.in:
	Bump to 0.3.1

2003-01-10  Alexander Larsson  <alexl@redhat.com>

	* nautilus-cd-burner.c (main):
	Call gettext to make translation work.

2003-01-11  Kenneth Christiansen <kenneth@gnu.org>

	* configure.in: Added "da" to ALL_LINGUAS.

=== 0.3 ===
		
2003-01-10  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	* NEWS:
	Update to 0.3

2003-01-10  Alexander Larsson  <alexl@redhat.com>

	* nautilus-cd-burner.c:
	Error out if no files selected.
	Better handling of mapping optionmenu->recorder
	Add separator menu item before file image.
	Remove big header.
	Changed default name of CD.

	* cdburn.glade:
	Move target label to left of optionmenu
	Recording speed -> Write speed
	Add tooltips

2003-01-10  Alexander Larsson  <alexl@redhat.com>

	* cd-recorder.c:
	Use CD, not disc.

	* cdburn.glade:
	Move big header text to title.
	cd -> CD
	Burn -> Write

2003-01-06  Alessio Frusciante  <algol@firenze.linux.it>

	* configure.in (ALL_LINGUAS): Added Italian (it) 

2003-01-06  Bastien Nocera  <hadess@hadess.net>

	* Makefile.am: add a regenerate-built-sources to copy the cd-drive.[ch]
	from libbacon
	* update-from-bacon.sh: added

2002-01-06  Dennis Cranston <dennis_cranston@yahoo.com>

	* cd-recorder.c (details_clicked):  Fixed a crash caused by 
	a missing argument to gtk_dialog_new_with_button().
	 
2003-01-06  Alexander Larsson  <alexl@redhat.com>

	* nautilus-cd-burner.c:
	Handle closing the window.

2003-01-05  Artis Trops  <hornet@navigator.lv>

        * configure.in: Added Latvian (lv) to ALL_LINGUAS.

2002-12-30  Kjartan Maraas  <kmaraas@gnome.org>

	* configure.in (ALL_LINGUAS): Added Norwegian (no).
	
2002-12-23  Pablo Saratxaga  <pablo@mandrakesoft.com>

	* configure.in (ALL_LINGUAS): Added German (de) and Vietnamese (vi).

2002-12-23  Pablo Gonzalo del Campo <pablodc@bigfoot.com>

	* configure.in (ALL_LINGUAS): Added Spanish (es).

2002-12-22  Christophe Merlet  <redfox@redfoxcenter.org>

	* configure.in (ALL_LINGUAS): Added French (fr).

2002-12-19  Alexander Larsson  <alexl@redhat.com>

	* nautilus-cd-burner.c (burn_cd):
	Make eject checkbutton insensitive when target is iso.

	* configure.in (ALL_LINGUAS):
	Removed de since the pofile was not checked in, breaking the build.

2002-12-17  Miloslav Trmac  <mitr@volny.cz>

	* configure.in (ALL_LINGUAS): Added Czech (cs).

2002-12-15  Christian Neumair  <chris@gnome-de.org>

	* configure.in (ALL_LINGUAS): Added German (de).

2002-12-14  Christian Rose  <menthos@menthos.com>

	* configure.in: Added "sv" to ALL_LINGUAS.

2002-12-13  Alexander Larsson  <alexl@redhat.com>

	* Makefile.am (EXTRA_DIST):
	Add spin images

	* configure.in:
	* NEWS:
	Bump version to 0.2.

2002-12-13  Alexander Larsson  <alexl@redhat.com>

	* cd-drive.c (scan_for_cdroms):
	Rename units to scsi_units
	
2002-12-13  Alexander Larsson  <alexl@redhat.com>

	* cd-drive.[ch]:
	* Makefile.am:
	* nautilus-cd-burner.[ch]:
	Move cd detection to separate file.
	Handle non-recorders too and IDE.
	Based on work by Bastien Nocera  <hadess@hadess.net>

2002-12-06  Bastien Nocera  <hadess@hadess.net>

	* TODO: upd
	* cdburn.glade: s/image1/cd_image/
	* cd-recorder.c: (write_iso): call cd_progress_set_image_spinning
	* configure.in: only require gtk+ 2.x
	* make-iso.c: (make_iso): call cd_progress_set_image_spinning
	* nautilus-cd-burner.c: (cd_progress_set_image),
	(cd_progress_set_image_spinning), (cd_progress_image_setup),
	(cd_progress_image_cleanup), (main): spinning CD animation work
	* nautilus-cd-burner.h: upd

2002-12-05  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Require glib 2.1.0 for g_has_prefix

2002-12-05  Alexander Larsson  <alexl@redhat.com>

	* TODO:
	Update
	
	* Makefile.am:
	Add cdsping*.png

2002-12-05  Alexander Larsson  <alexl@redhat.com>

	* cdspin[1-8].png:
	Spinning cd images from jdub.
	
=== nautilus-cd-burner 0.1 ===
	
2002-12-05  Alexander Larsson  <alexl@redhat.com>
	
	* NEWS:
	* README:
	Update
	
	* cd-recorder.c:
	* make-iso.c:
	* mapping-daemon.c:
	* mapping-method.c:
	* nautilus-cd-burner.c:
	* nautilus-cd-burner.h:
	Fix warnings

	* CVSVERSION:
	Add new file so we get more warnings

2002-12-05  Alexander Larsson  <alexl@redhat.com>
	
	* AUTHORS:
	* COPYING:
	* COPYING.LIB:
	* make-iso.c:
	* make-iso.h:
	* mapping-daemon.c:
	* mapping-daemon.h:
	* mapping-protocol.c:
	* mapping-protocol.h:
	* nautilus-cd-burner.c:
	* nautilus-cd-burner.h:
	Updated license headers (method LGPL, rest GPL)

2002-12-05  Alexander Larsson  <alexl@redhat.com>

	* nautilus-cd-burner.c:
	* cdburn.glade:
	Remove separate finished dialog.

2002-12-05  Alexander Larsson  <alexl@redhat.com>
	
	* Makefile.am:
	* acconfig.h:
	* autogen.sh:
	* configure.in:
	* nautilus-cd-burner.h:
	* po/*:
	Gettextize

2002-12-05  Alexander Larsson  <alexl@redhat.com>

	* make-iso.c (make_iso):
	Move declarations

	* nautilus-cd-burner.c (main):
	Move GList declaration.

2002-12-05  Alexander Larsson  <alexl@redhat.com>

	* make-iso.c (mkisofs_stdout_read):
	Remove warning.

2002-12-05  Alexander Larsson  <alexl@redhat.com>

	* Makefile.am (EXTRA_DIST):
	Add cdburn.glade.

2002-12-05  Alexander Larsson  <alexl@redhat.com>

	* TODO:
	Updated
	
	* acconfig.h:
	* configure.in:
	* nautilus-cd-burner.c:
	Added --enable-dummy-write
	
	* nautilus-cd-burner.h:
	Include config.h
	
	* cd-recorder.c:
	* make-iso.c:
	Less spewage

2002-12-05  Alexander Larsson  <alexl@redhat.com>

	* cd-recorder.c:
	* nautilus-cd-burner.[ch]:
	Better error reporting. (Added details button with cdrecord crack in it.)

2002-12-05  Alexander Larsson  <alexl@redhat.com>

	* mapping-method.c (vfs_module_init): 
	* mapping-protocol.c: 
	* mapping-daemon.c:
	Remove debug spew.

2002-12-05  Alexander Larsson  <alexl@redhat.com>

	* cd-recorder.c:
	* make-iso.c: 
	* nautilus-cd-burner.c:
	Handle burning speed.
	probe to load sg module
	Don't break if no files selected

2002-12-04  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Require gnome-vfs 2.1.3.1

2002-12-04  Alexander Larsson  <alexl@redhat.com>

	* make-iso.c:
	Handle iso not fitting on HD.
	
2002-12-04  Alexander Larsson  <alexl@redhat.com>

	* cd-record.c:
	* make-iso.c:
	* nautilus-cd-burner.c:
	* nautilus-cd-burner.h:
	Handle iso larger than CD.

2002-12-04  Alexander Larsson  <alexl@redhat.com>

	* nautilus-cd-burner.c:
	Implement removing all contents of burn: after burn.

	* mapping-daemon.c:
	Disallow removing root dir.

2002-12-04  Alexander Larsson  <alexl@redhat.com>
	
	* cd-recorder.c: 
	* cdburn.glade:
	* make-iso.c:
	* nautilus-cd-burner.h:
	Further handling of progress bar and UI.

2002-12-03  Christian Neumair  <chris@gnome-de.org>

	* .cvsignore: Added.

2002-12-03  Alexander Larsson  <alexl@redhat.com>

	* cd-recorder.c:
	Make pipes nonblocking.
	Call cdrecord with -v.

2002-12-03  Alexander Larsson  <alexl@redhat.com>
	
	* cdburn.glade:
	* make-iso.c: 
	* make-iso.h:
	* nautilus-cd-burner.c: 
	* nautilus-cd-burner.h:
	Initial work on a progress dialog.

2002-12-02  Alexander Larsson  <alexl@redhat.com>

	* nautilus-cd-burner.c (burn_cd):
	Added cheesy cdrecord call.

2002-12-02  Alexander Larsson  <alexl@redhat.com>

	* Makefile.am:
	* nautilus-cd-burner.h:
	Break out the CDRecorder defines.
	
	* cd-recorder.c:
	Implement cd recorder scanning
	
	* nautilus-cd-burner.c:
	Refresh dialog when target changes.
	

2002-11-28  Alexander Larsson  <alexl@redhat.com>

	* make-iso.c:
	Don't leak fds.
	Don't double free.

2002-11-28  Alexander Larsson  <alexl@redhat.com>

	* nautilus-cd-burner.c (burn_cd): 
	* make-iso.c (make_iso):
	Correctly put label in iso.

2002-11-28  Alexander Larsson  <alexl@redhat.com>

	* nautilus-cd-burner.c:
	Handle cancel in file selector.
	
	* make-iso.c:
	Clean up after iso write.
	Don't spew debug info.
	

2002-11-27  Alexander Larsson  <alexl@redhat.com>

	* Makefile.am:
	Add make-iso.[ch]
	
	* TODO:
	Update

	* make-iso.[ch]:
	* nautilus-cd-burner.c:
	Split out the mkisofs stuff. Handle deep hierarchies and empty dirs.
	
	* mapping-method.c: (do_unlink):
	Fix unlink.
